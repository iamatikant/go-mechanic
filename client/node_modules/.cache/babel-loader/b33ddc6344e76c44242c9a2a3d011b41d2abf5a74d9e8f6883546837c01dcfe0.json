{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { forwardRef, useCallback, useEffect } from 'react';\nimport { useConsolidatedRef } from '../../../hooks';\nimport { BareInput } from './DateTime.styles';\nconst padNumberWithZeros = function (maxLength) {\n  let value = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  if (value === '') return '';\n  return value.padStart(Number.isFinite(maxLength) ? maxLength : 0, '0');\n};\nconst PartInput = forwardRef((_ref, ref) => {\n  let {\n    value,\n    onChange,\n    readOnly,\n    min = 0,\n    max = Infinity,\n    size = 2,\n    maxLength = Infinity,\n    padWithZeros = true,\n    ...restProps\n  } = _ref;\n  const onKeyDown = useCallback(ev => {\n    if (['+', '-', 'e', 'E', '.', ','].includes(ev.key)) ev.preventDefault();\n  }, []);\n  const inputRef = useConsolidatedRef(ref);\n  useEffect(() => {\n    if (inputRef.current && value && !Number.isNaN(value)) {\n      inputRef.current.value = padNumberWithZeros(maxLength, value?.toString());\n    }\n  }, [value, inputRef.current]);\n  const onInputChange = useCallback(ev => {\n    const targetEl = ev.target;\n    if (targetEl.value.length > maxLength) targetEl.value = targetEl.value.slice(0, maxLength);else if (size !== maxLength) targetEl.style.width = `${Math.max(targetEl.value.length, size)}ch`;\n  }, [maxLength]);\n  const onBlur = useCallback(ev => {\n    const targetElValue = ev.target.value;\n    onChange?.(padWithZeros ? padNumberWithZeros(maxLength, targetElValue) : targetElValue);\n  }, [onChange]);\n  const defaultValue = value !== undefined ? padNumberWithZeros(maxLength, value?.toString()) : '';\n  return _jsx(BareInput, {\n    type: 'number',\n    defaultValue: defaultValue,\n    onBlur: onBlur,\n    onKeyDown: onKeyDown,\n    onChange: onInputChange,\n    step: 1,\n    min: min,\n    max: max,\n    maxLength: maxLength,\n    readOnly: readOnly,\n    ref: inputRef,\n    size: size,\n    ...restProps\n  });\n});\nexport default PartInput;","map":{"version":3,"names":["forwardRef","useCallback","useEffect","useConsolidatedRef","BareInput","padNumberWithZeros","maxLength","value","arguments","length","undefined","padStart","Number","isFinite","PartInput","_ref","ref","onChange","readOnly","min","max","Infinity","size","padWithZeros","restProps","onKeyDown","ev","includes","key","preventDefault","inputRef","current","isNaN","toString","onInputChange","targetEl","target","slice","style","width","Math","onBlur","targetElValue","defaultValue","_jsx","type","step"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/components/DateTime/Input/PartInput.tsx"],"sourcesContent":["import {\n  FocusEvent,\n  KeyboardEvent,\n  FunctionComponent,\n  forwardRef,\n  PropsWithoutRef,\n  Ref,\n  useCallback,\n  useEffect,\n  ChangeEvent\n} from 'react';\n\nimport { useConsolidatedRef } from '../../../hooks';\nimport { ForwardProps, OmitStrict } from '../../../types';\nimport { InputProps } from '../../Input/Input';\n\nimport { BareInput } from './DateTime.styles';\n\nconst padNumberWithZeros = (maxLength: number, value: string = '') => {\n  if (value === '') return '';\n\n  return value.padStart(Number.isFinite(maxLength) ? maxLength : 0, '0');\n};\n\nexport interface PartInputProps extends OmitStrict<InputProps, 'defaultValue' | 'value'> {\n  value?: number;\n  min?: number;\n  max?: number;\n  maxLength?: number;\n  padWithZeros?: boolean;\n  size?: number;\n  onChange?: (value?: string) => void;\n}\n\nconst PartInput: FunctionComponent<PartInputProps & ForwardProps> = forwardRef(\n  (\n    {\n      value,\n      onChange,\n      readOnly,\n      min = 0,\n      max = Infinity,\n      size = 2,\n      maxLength = Infinity,\n      padWithZeros = true,\n      ...restProps\n    }: PropsWithoutRef<PartInputProps>,\n    ref: Ref<HTMLInputElement>\n  ) => {\n    const onKeyDown = useCallback((ev: KeyboardEvent<HTMLInputElement>) => {\n      if (['+', '-', 'e', 'E', '.', ','].includes(ev.key)) ev.preventDefault();\n    }, []);\n\n    const inputRef = useConsolidatedRef(ref);\n    useEffect(() => {\n      if (inputRef.current && value && !Number.isNaN(value)) {\n        inputRef.current.value = padNumberWithZeros(maxLength, value?.toString());\n      }\n    }, [value, inputRef.current]);\n\n    const onInputChange = useCallback(\n      (ev: ChangeEvent<HTMLInputElement>) => {\n        const targetEl = ev.target;\n        if (targetEl.value.length > maxLength) targetEl.value = targetEl.value.slice(0, maxLength);\n        else if (size !== maxLength)\n          targetEl.style.width = `${Math.max(targetEl.value.length, size)}ch`;\n      },\n      [maxLength]\n    );\n\n    const onBlur = useCallback(\n      (ev: FocusEvent<HTMLInputElement>) => {\n        const targetElValue = ev.target.value;\n        onChange?.(padWithZeros ? padNumberWithZeros(maxLength, targetElValue) : targetElValue);\n      },\n      [onChange]\n    );\n\n    const defaultValue =\n      value !== undefined ? padNumberWithZeros(maxLength, value?.toString()) : '';\n\n    return (\n      <BareInput\n        type='number'\n        defaultValue={defaultValue}\n        onBlur={onBlur}\n        onKeyDown={onKeyDown}\n        onChange={onInputChange}\n        step={1}\n        min={min}\n        max={max}\n        maxLength={maxLength}\n        readOnly={readOnly}\n        ref={inputRef}\n        size={size}\n        {...restProps}\n      />\n    );\n  }\n);\n\nexport default PartInput;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}