{"ast":null,"code":"import { NUMBER_MAX_DECIMAL_PLACES } from '../Number/NumberInput.types';\nimport { getFormattedValue as getNumberFormattedValue } from '../Number/utils';\nexport const isValidCurrency = currency => {\n  try {\n    // eslint-disable-next-line no-new\n    new Intl.NumberFormat(undefined, {\n      style: 'currency',\n      currency\n    });\n    return true;\n  } catch {\n    return false;\n  }\n};\nexport const getFormattedValue = function (value, locale, currency) {\n  let {\n    showGroupSeparators = true,\n    showAs = 'code',\n    numberOfDecimals\n  } = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  const [integer, fractionPart] = value.split('.', 2);\n  if (!currency) return getNumberFormattedValue(value, locale, undefined, {\n    useGrouping: showGroupSeparators,\n    maximumFractionDigits: numberOfDecimals,\n    minimumFractionDigits: Math.min(numberOfDecimals ?? 0, fractionPart?.length ?? 0)\n  });\n  const isCurrency = isValidCurrency(currency);\n  const formatter = new Intl.NumberFormat(locale, {\n    useGrouping: showGroupSeparators,\n    maximumFractionDigits: numberOfDecimals,\n    minimumFractionDigits: Math.min(numberOfDecimals ?? 0, fractionPart?.length ?? 0),\n    ...(isCurrency ? {\n      style: 'currency',\n      currency,\n      currencyDisplay: showAs\n    } : {})\n  });\n  let formatted = value;\n  if (value && !Number.isNaN(parseFloat(integer))) {\n    const endsWithDot = fractionPart === '';\n    const valueNumber = Number(endsWithDot ? `${value}1` : value);\n    formatted = formatter.formatToParts(valueNumber).reduce((result, _ref) => {\n      let {\n        type,\n        value: part\n      } = _ref;\n      if (type === 'fraction' && endsWithDot) return result;\n      return result + part;\n    }, '');\n  } else if (currency) {\n    formatted = formatter.formatToParts(value.startsWith('-') ? -1 : 1).reduce((result, _ref2) => {\n      let {\n        type,\n        value: part\n      } = _ref2;\n      return ['currency', 'minusSign'].includes(type) ? result + part : result;\n    }, '');\n  }\n  return formatted;\n};\nexport function getCurrencyMinimumFractionDigits(locale, currencyISOCode) {\n  return currencyISOCode ? new Intl.NumberFormat(locale, {\n    style: 'currency',\n    currency: currencyISOCode\n  }).resolvedOptions().minimumFractionDigits : NUMBER_MAX_DECIMAL_PLACES;\n}\nexport function formatCurrency(value, _ref3) {\n  let {\n    locale,\n    options\n  } = _ref3;\n  const formatter = new Intl.NumberFormat(locale, options);\n  return formatter.format(value);\n}","map":{"version":3,"names":["NUMBER_MAX_DECIMAL_PLACES","getFormattedValue","getNumberFormattedValue","isValidCurrency","currency","Intl","NumberFormat","undefined","style","value","locale","showGroupSeparators","showAs","numberOfDecimals","arguments","length","integer","fractionPart","split","useGrouping","maximumFractionDigits","minimumFractionDigits","Math","min","isCurrency","formatter","currencyDisplay","formatted","Number","isNaN","parseFloat","endsWithDot","valueNumber","formatToParts","reduce","result","_ref","type","part","startsWith","_ref2","includes","getCurrencyMinimumFractionDigits","currencyISOCode","resolvedOptions","formatCurrency","_ref3","options","format"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/components/Currency/utils.ts"],"sourcesContent":["import { NUMBER_MAX_DECIMAL_PLACES } from '../Number/NumberInput.types';\nimport { getFormattedValue as getNumberFormattedValue } from '../Number/utils';\n\nexport const isValidCurrency = (currency: string) => {\n  try {\n    // eslint-disable-next-line no-new\n    new Intl.NumberFormat(undefined, { style: 'currency', currency });\n    return true;\n  } catch {\n    return false;\n  }\n};\n\nexport const getFormattedValue = (\n  value: string,\n  locale: string,\n  currency?: string,\n  {\n    showGroupSeparators = true,\n    showAs = 'code',\n    numberOfDecimals\n  }: { showGroupSeparators?: boolean; showAs?: 'code' | 'symbol'; numberOfDecimals?: number } = {}\n) => {\n  const [integer, fractionPart] = value.split('.', 2) as [string, string?];\n\n  if (!currency)\n    return getNumberFormattedValue(value, locale, undefined, {\n      useGrouping: showGroupSeparators,\n      maximumFractionDigits: numberOfDecimals,\n      minimumFractionDigits: Math.min(numberOfDecimals ?? 0, fractionPart?.length ?? 0)\n    });\n\n  const isCurrency = isValidCurrency(currency);\n\n  const formatter = new Intl.NumberFormat(locale, {\n    useGrouping: showGroupSeparators,\n    maximumFractionDigits: numberOfDecimals,\n    minimumFractionDigits: Math.min(numberOfDecimals ?? 0, fractionPart?.length ?? 0),\n    ...(isCurrency\n      ? {\n          style: 'currency',\n          currency,\n          currencyDisplay: showAs\n        }\n      : {})\n  });\n\n  let formatted = value;\n\n  if (value && !Number.isNaN(parseFloat(integer))) {\n    const endsWithDot = fractionPart === '';\n    const valueNumber = Number(endsWithDot ? `${value}1` : value);\n    formatted = formatter.formatToParts(valueNumber).reduce((result, { type, value: part }) => {\n      if (type === 'fraction' && endsWithDot) return result;\n      return result + part;\n    }, '');\n  } else if (currency) {\n    formatted = formatter\n      .formatToParts(value.startsWith('-') ? -1 : 1)\n      .reduce(\n        (result, { type, value: part }) =>\n          ['currency', 'minusSign'].includes(type) ? result + part : result,\n        ''\n      );\n  }\n  return formatted;\n};\n\nexport function getCurrencyMinimumFractionDigits(locale: string, currencyISOCode?: string): number {\n  return currencyISOCode\n    ? new Intl.NumberFormat(locale, {\n        style: 'currency',\n        currency: currencyISOCode\n      }).resolvedOptions().minimumFractionDigits\n    : NUMBER_MAX_DECIMAL_PLACES;\n}\n\ninterface CurrencyFormatOptions {\n  locale: string;\n  options?: Intl.NumberFormatOptions;\n}\n\nexport function formatCurrency(value: number | bigint, { locale, options }: CurrencyFormatOptions) {\n  const formatter = new Intl.NumberFormat(locale, options);\n\n  return formatter.format(value);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}