{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useEffect, useRef, useState, useContext } from 'react';\nimport { useBreakpoint, useI18n } from '../../hooks';\nimport Icon from '../Icon';\nimport SearchInput from '../SearchInput';\nimport NavigationListItemWrapper from './NavigationListItemWrapper';\nimport { StyledAppShellSearchButton, StyledAppshellSearchContainer, StyledAppShellSearchDecoration, StyledSearch } from './AppShellSearch.styles';\nimport AppShellContext from './AppShellContext';\nexport const AppShellSearch = _ref => {\n  let {\n    collapsed,\n    searchLabel,\n    searchInput\n  } = _ref;\n  const btnElRef = useRef(null);\n  const formElRef = useRef(null);\n  const searchRef = useRef();\n  const t = useI18n();\n  const [menuOpen, setMenuOpen] = useState(false);\n  const isMediumOrAbove = useBreakpoint('md');\n  const {\n    navState,\n    mobileNavOpen\n  } = useContext(AppShellContext);\n  const onMenuToggle = state => {\n    setMenuOpen(state === 'open');\n  };\n  useEffect(() => {\n    const onTab = e => {\n      if (menuOpen && e.key === 'Tab') {\n        e.preventDefault();\n        searchRef.current?.focus();\n      }\n    };\n    btnElRef.current?.addEventListener('keydown', onTab);\n    return () => {\n      btnElRef.current?.removeEventListener('keydown', onTab);\n    };\n  }, [searchRef, menuOpen]);\n  const searchFormProps = {\n    role: 'search',\n    'aria-label': searchLabel,\n    onSubmit: e => e.preventDefault()\n  };\n  return _jsx(StyledSearch, {\n    collapsed: collapsed,\n    isMediumOrAbove: isMediumOrAbove,\n    children: navState === 'closed' && !mobileNavOpen ? _jsx(NavigationListItemWrapper, {\n      childElementRef: formElRef,\n      label: t('search_placeholder_default'),\n      tooltipLabel: t('search_placeholder_default'),\n      onMenuToggle: onMenuToggle,\n      content: _jsx(StyledAppshellSearchContainer, {\n        children: _jsx(SearchInput, {\n          ...searchInput,\n          resultsPopover: false,\n          ref: searchRef\n        })\n      }),\n      children: _jsx(\"form\", {\n        ...searchFormProps,\n        ref: formElRef,\n        children: _jsx(StyledAppShellSearchButton, {\n          ref: btnElRef,\n          children: _jsx(StyledAppShellSearchDecoration, {\n            children: _jsx(Icon, {\n              name: 'search'\n            })\n          })\n        })\n      })\n    }) : _jsx(\"form\", {\n      ...searchFormProps,\n      children: _jsx(SearchInput, {\n        ...searchInput\n      })\n    })\n  });\n};","map":{"version":3,"names":["useEffect","useRef","useState","useContext","useBreakpoint","useI18n","Icon","SearchInput","NavigationListItemWrapper","StyledAppShellSearchButton","StyledAppshellSearchContainer","StyledAppShellSearchDecoration","StyledSearch","AppShellContext","AppShellSearch","_ref","collapsed","searchLabel","searchInput","btnElRef","formElRef","searchRef","t","menuOpen","setMenuOpen","isMediumOrAbove","navState","mobileNavOpen","onMenuToggle","state","onTab","e","key","preventDefault","current","focus","addEventListener","removeEventListener","searchFormProps","role","onSubmit","_jsx","children","childElementRef","label","tooltipLabel","content","resultsPopover","ref","name"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/components/AppShell/AppShellSearch.tsx"],"sourcesContent":["import { FC, useEffect, useRef, useState, useContext, FormEvent } from 'react';\n\nimport { useBreakpoint, useI18n } from '../../hooks';\nimport Icon from '../Icon';\nimport SearchInput from '../SearchInput';\n\nimport NavigationListItemWrapper from './NavigationListItemWrapper';\nimport { AppShellProps, NavListItemWrapperProps } from './AppShell.types';\nimport {\n  StyledAppShellSearchButton,\n  StyledAppshellSearchContainer,\n  StyledAppShellSearchDecoration,\n  StyledSearch\n} from './AppShellSearch.styles';\nimport AppShellContext from './AppShellContext';\n\nexport interface AppShellSearchProps {\n  collapsed: boolean;\n  searchLabel: string;\n  searchInput: AppShellProps['searchInput'];\n}\n\nexport const AppShellSearch: FC<AppShellSearchProps> = ({\n  collapsed,\n  searchLabel,\n  searchInput\n}) => {\n  const btnElRef = useRef<HTMLButtonElement>(null);\n  const formElRef = useRef<HTMLFormElement>(null);\n  const searchRef = useRef<HTMLInputElement>();\n  const t = useI18n();\n  const [menuOpen, setMenuOpen] = useState(false);\n  const isMediumOrAbove = useBreakpoint('md');\n  const { navState, mobileNavOpen } = useContext(AppShellContext);\n\n  const onMenuToggle: NavListItemWrapperProps['onMenuToggle'] = state => {\n    setMenuOpen(state === 'open');\n  };\n\n  useEffect(() => {\n    const onTab = (e: KeyboardEvent) => {\n      if (menuOpen && e.key === 'Tab') {\n        e.preventDefault();\n        searchRef.current?.focus();\n      }\n    };\n    btnElRef.current?.addEventListener('keydown', onTab);\n    return () => {\n      btnElRef.current?.removeEventListener('keydown', onTab);\n    };\n  }, [searchRef, menuOpen]);\n\n  const searchFormProps = {\n    role: 'search',\n    'aria-label': searchLabel,\n    onSubmit: (e: FormEvent) => e.preventDefault()\n  };\n\n  return (\n    <StyledSearch collapsed={collapsed} isMediumOrAbove={isMediumOrAbove}>\n      {navState === 'closed' && !mobileNavOpen ? (\n        <NavigationListItemWrapper\n          childElementRef={formElRef}\n          label={t('search_placeholder_default')}\n          tooltipLabel={t('search_placeholder_default')}\n          onMenuToggle={onMenuToggle}\n          content={\n            <StyledAppshellSearchContainer>\n              <SearchInput {...searchInput} resultsPopover={false} ref={searchRef} />\n            </StyledAppshellSearchContainer>\n          }\n        >\n          <form {...searchFormProps} ref={formElRef}>\n            <StyledAppShellSearchButton ref={btnElRef}>\n              <StyledAppShellSearchDecoration>\n                <Icon name='search' />\n              </StyledAppShellSearchDecoration>\n            </StyledAppShellSearchButton>\n          </form>\n        </NavigationListItemWrapper>\n      ) : (\n        <form {...searchFormProps}>\n          <SearchInput {...searchInput} />\n        </form>\n      )}\n    </StyledSearch>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}