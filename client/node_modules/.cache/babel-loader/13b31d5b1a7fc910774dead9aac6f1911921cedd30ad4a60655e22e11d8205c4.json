{"ast":null,"code":"import { useCallback, useRef, useState } from 'react';\nconst isTouchEvent = e => {\n  return 'touches' in e;\n};\nconst preventDefault = e => {\n  if (!isTouchEvent(e)) return;\n  if (e.touches.length < 2 && e.preventDefault) {\n    e.preventDefault();\n  }\n};\nconst useLongPress = function (onLongPress, onClick) {\n  let {\n    key = 'Enter',\n    shouldPreventDefault = true,\n    delay = 500\n  } = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  const [longPressTriggered, setLongPressTriggered] = useState(false);\n  const timeout = useRef();\n  const target = useRef();\n  const start = useCallback(event => {\n    if (shouldPreventDefault && event.target) {\n      event.target.addEventListener('touchend', preventDefault, {\n        passive: false\n      });\n      target.current = event.target;\n    }\n    timeout.current = setTimeout(() => {\n      onLongPress();\n      setLongPressTriggered(true);\n    }, delay);\n  }, [onLongPress, delay, shouldPreventDefault]);\n  const clear = useCallback(function () {\n    let shouldTriggerClick = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    if (timeout.current) {\n      clearTimeout(timeout.current);\n    }\n    if (shouldTriggerClick && !longPressTriggered) {\n      onClick?.();\n    }\n    setLongPressTriggered(false);\n    if (shouldPreventDefault && target.current) {\n      target.current.removeEventListener('touchend', preventDefault);\n    }\n  }, [shouldPreventDefault, onClick, longPressTriggered]);\n  return {\n    onMouseDown: e => start(e),\n    onTouchStart: e => start(e),\n    onKeyDown: e => {\n      if (e.repeat || e.key !== key) return;\n      start(e);\n    },\n    onMouseUp: () => clear(),\n    onKeyUp: e => {\n      if (e.repeat || e.key !== key) return;\n      clear();\n    },\n    onMouseLeave: () => clear(false),\n    onTouchEnd: () => clear()\n  };\n};\nexport default useLongPress;","map":{"version":3,"names":["useCallback","useRef","useState","isTouchEvent","e","preventDefault","touches","length","useLongPress","onLongPress","onClick","key","shouldPreventDefault","delay","arguments","undefined","longPressTriggered","setLongPressTriggered","timeout","target","start","event","addEventListener","passive","current","setTimeout","clear","shouldTriggerClick","clearTimeout","removeEventListener","onMouseDown","onTouchStart","onKeyDown","repeat","onMouseUp","onKeyUp","onMouseLeave","onTouchEnd"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/hooks/useLongPress.ts"],"sourcesContent":["import { useCallback, useRef, useState } from 'react';\n\nconst isTouchEvent = (e: Event): e is TouchEvent => {\n  return 'touches' in e;\n};\n\nconst preventDefault = (e: Event) => {\n  if (!isTouchEvent(e)) return;\n\n  if (e.touches.length < 2 && e.preventDefault) {\n    e.preventDefault();\n  }\n};\n\ninterface Options {\n  key?: string;\n  delay?: number;\n  shouldPreventDefault?: boolean;\n}\n\nconst useLongPress = <T>(\n  onLongPress: () => void,\n  onClick?: () => void,\n  { key = 'Enter', shouldPreventDefault = true, delay = 500 }: Options = {}\n) => {\n  const [longPressTriggered, setLongPressTriggered] = useState(false);\n  const timeout = useRef<ReturnType<typeof setTimeout>>();\n  const target = useRef<EventTarget>();\n\n  const start = useCallback(\n    (event: React.MouseEvent<T> | React.KeyboardEvent<T> | React.TouchEvent<T>) => {\n      if (shouldPreventDefault && event.target) {\n        event.target.addEventListener('touchend', preventDefault, {\n          passive: false\n        });\n        target.current = event.target;\n      }\n      timeout.current = setTimeout(() => {\n        onLongPress();\n        setLongPressTriggered(true);\n      }, delay);\n    },\n    [onLongPress, delay, shouldPreventDefault]\n  );\n\n  const clear = useCallback(\n    (shouldTriggerClick = true) => {\n      if (timeout.current) {\n        clearTimeout(timeout.current);\n      }\n      if (shouldTriggerClick && !longPressTriggered) {\n        onClick?.();\n      }\n      setLongPressTriggered(false);\n      if (shouldPreventDefault && target.current) {\n        target.current.removeEventListener('touchend', preventDefault);\n      }\n    },\n    [shouldPreventDefault, onClick, longPressTriggered]\n  );\n\n  return {\n    onMouseDown: (e: React.MouseEvent<T>) => start(e),\n    onTouchStart: (e: React.TouchEvent<T>) => start(e),\n    onKeyDown: (e: React.KeyboardEvent<T>) => {\n      if (e.repeat || e.key !== key) return;\n      start(e);\n    },\n    onMouseUp: () => clear(),\n    onKeyUp: (e: React.KeyboardEvent<T>) => {\n      if (e.repeat || e.key !== key) return;\n      clear();\n    },\n    onMouseLeave: () => clear(false),\n    onTouchEnd: () => clear()\n  };\n};\n\nexport default useLongPress;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}