{"ast":null,"code":"import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { forwardRef, useState, useCallback, useEffect, useMemo, useContext, useRef, isValidElement } from 'react';\nimport Flex from '../Flex';\nimport Link from '../Link';\nimport Count from '../Badges/Count';\nimport Icon, { registerIcon } from '../Icon';\nimport * as timesIcon from '../Icon/icons/times.icon';\nimport * as plusIcon from '../Icon/icons/plus.icon';\nimport * as caseSolidIcon from '../Icon/icons/case-solid.icon';\nimport * as barsIcon from '../Icon/icons/bars.icon';\nimport * as caretLeftIcon from '../Icon/icons/caret-left.icon';\nimport * as caretRightIcon from '../Icon/icons/caret-right.icon';\nimport Image from '../Image';\nimport { useI18n, useBreakpoint, useConsolidatedRef, useDirection, useTheme, useElement, useTransitionState, useEvent } from '../../hooks';\nimport { openCloseStates } from '../../hooks/useTransitionState';\nimport Grid from '../Grid';\nimport Button from '../Button';\nimport Drawer from '../Drawer';\nimport Backdrop from '../Backdrop';\nimport Tooltip from '../Tooltip/Tooltip';\nimport SkipLinks from '../SkipLinks';\nimport VisuallyHiddenText from '../VisuallyHiddenText';\nimport Progress from '../Progress';\nimport { registerAction } from '../ShortcutManager';\nimport useShortcut from '../../hooks/useShortcut';\nimport { focusHeadingOrContainer } from '../../utils';\nimport AppShellContext, { AppShellDrawerContext } from './AppShellContext';\nimport AppShellDrawer from './Drawer';\nimport AppHeader from './AppHeader';\nimport { StyledAppNav, StyledAppInfo, StyledCaseTypes, StyledScrollWrap, StyledUtils, StyledAppMain, StyledNavCasesList, StyledAppEnvironment, StyledBannerRegion, StyledCountIcon, StyledUtilIconCount, StyledMobileNav, StyledAppShellTooltip, StyledAppShellToggleButton } from './AppShell.styles';\nimport NavigationList from './NavigationList';\nimport { AppShellSearch } from './AppShellSearch';\nimport { followingNodes } from './utils';\nregisterIcon(timesIcon, plusIcon, caseSolidIcon, barsIcon, caretRightIcon, caretLeftIcon);\nregisterAction({\n  id: 'NextRegion',\n  defaultKeyBinding: 'F9'\n}, {\n  id: 'PrevRegion',\n  defaultKeyBinding: 'Shift+F9'\n});\nconst CaseTypes = _ref => {\n  let {\n    caseTypes\n  } = _ref;\n  const t = useI18n();\n  const transformedCaseTypes = caseTypes.map(caseType => {\n    return {\n      ...caseType,\n      primary: caseType.name\n    };\n  });\n  return useMemo(() => _jsx(StyledCaseTypes, {\n    children: _jsx(NavigationList, {\n      items: [{\n        primary: t('app_shell_create'),\n        visual: _jsx(Icon, {\n          name: 'plus'\n        }),\n        items: transformedCaseTypes\n      }]\n    })\n  }), [caseTypes]);\n};\nconst Links = props => {\n  const {\n    links\n  } = props;\n  const [transformedLinks, setTransformedLinks] = useState([]);\n  // TODO: Can this be a memo instead of a state and an effect?\n  const mergedNavLinks = items => {\n    return items.map(link => {\n      return {\n        ...link,\n        primary: link.name,\n        'aria-current': link.active ? 'page' : null,\n        visual: link.icon ? _jsx(Icon, {\n          name: link.icon\n        }) : null,\n        onClick: link.links ? undefined : link.onClick,\n        items: link.links ? mergedNavLinks(link.links) : undefined\n      };\n    });\n  };\n  useEffect(() => {\n    setTransformedLinks(mergedNavLinks(links));\n  }, [links]);\n  return _jsx(\"div\", {\n    children: _jsx(NavigationList, {\n      items: transformedLinks\n    })\n  });\n};\nconst Cases = props => {\n  const {\n    cases\n  } = props;\n  const setupCases = items => {\n    return items.map(item => {\n      const {\n        id,\n        primary,\n        secondary,\n        visual = _jsx(Icon, {\n          name: 'case-solid'\n        }),\n        active,\n        onClick,\n        onDismiss,\n        ...restProps\n      } = item;\n      return {\n        ...restProps,\n        id,\n        'aria-current': active ? 'page' : undefined,\n        primary,\n        secondary,\n        active: !!active,\n        onClick,\n        onDismiss,\n        visual\n      };\n    });\n  };\n  return _jsx(StyledNavCasesList, {\n    children: _jsx(NavigationList, {\n      items: setupCases(cases)\n    })\n  });\n};\nexport const Utils = _ref2 => {\n  let {\n    contextSwitcher = {},\n    operator,\n    items,\n    appHeader\n  } = _ref2;\n  const t = useI18n();\n  const {\n    contexts,\n    onContextClick,\n    label: contextSwitcherLabel = t('switch_to')\n  } = contextSwitcher;\n  const {\n    navOpen,\n    navState,\n    drawerOpen,\n    setDrawerOpen\n  } = useContext(AppShellContext);\n  const [item, setItem] = useState();\n  useEffect(() => {\n    if (drawerOpen && item) {\n      setItem(items?.find(utilItem => !isValidElement(utilItem) && utilItem.name === item.name));\n    }\n  }, [items]);\n  const operatorInfo = useMemo(() => appHeader ? [] : [{\n    primary: operator.name,\n    visual: operator.avatar,\n    items: operator.actions\n  }], [appHeader, operator.name, operator.avatar, operator.actions]);\n  const contextSwitcherUtilItem = useMemo(() => {\n    if (!appHeader && contexts && contexts?.length > 1 && !!onContextClick) {\n      return {\n        name: contextSwitcherLabel,\n        primary: contextSwitcherLabel,\n        visual: _jsx(Icon, {\n          name: 'dot-9-solid'\n        }),\n        drawerView: _jsx(NavigationList, {\n          items: contexts.map(context => ({\n            ...context,\n            primary: context.primary,\n            'aria-current': !!context.selected,\n            visual: context.visual,\n            onClick: e => {\n              onContextClick(context.id, e);\n            }\n          })),\n          singleSelect: true\n        })\n      };\n    }\n  }, [appHeader, contexts, contextSwitcherLabel, onContextClick]);\n  const transform = useCallback(utilItem => {\n    const uItem = {\n      ...utilItem\n    };\n    delete uItem.onDrawerClose;\n    delete uItem.onDrawerOpen;\n    return {\n      onClick: () => {\n        if (utilItem.drawerView) {\n          setItem(utilItem);\n        }\n      },\n      ...uItem,\n      primary: utilItem.name,\n      visual: utilItem.count ? _jsxs(StyledUtilIconCount, {\n        children: [utilItem.visual, _jsx(Count, {\n          as: StyledCountIcon,\n          variant: 'urgent',\n          id: `${utilItem.name}-count`,\n          children: utilItem.count\n        })]\n      }) : utilItem.visual,\n      collapseItems: !navOpen\n    };\n  }, [navOpen]);\n  const utilItems = useMemo(() => {\n    return [...(items ?? []).map(uItem => {\n      return isValidElement(uItem) ? uItem : transform(uItem);\n    }), ...(contextSwitcherUtilItem ? [transform(contextSwitcherUtilItem)] : []), ...operatorInfo];\n  }, [items, operatorInfo, transform]);\n  useEffect(() => {\n    if (item) setDrawerOpen(true);\n  }, [item]);\n  useEffect(() => {\n    if (navState === 'closed' || navState === 'closing') setDrawerOpen(false);\n  }, [navState]);\n  return _jsxs(AppShellDrawerContext.Provider, {\n    value: useMemo(() => ({\n      drawerOpen,\n      closeDrawer: () => {\n        setDrawerOpen(false);\n      },\n      openDrawer: setItem\n    }), [drawerOpen]),\n    children: [_jsx(StyledUtils, {\n      children: _jsx(NavigationList, {\n        items: utilItems,\n        collapsed: true\n      })\n    }), item && _jsx(AppShellDrawer, {\n      drawerOpen: drawerOpen,\n      setDrawerOpen: setDrawerOpen,\n      content: item.drawerView,\n      header: item.drawerHeader || item.name,\n      onDrawerClose: () => {\n        setItem(undefined);\n        item.onDrawerClose?.();\n      },\n      onDrawerOpen: item.onDrawerOpen\n    })]\n  });\n};\nconst AppShell = forwardRef((props, ref) => {\n  const t = useI18n();\n  const {\n    appInfo,\n    contextSwitcher,\n    searchInput,\n    appHeader,\n    searchPage,\n    searchLabel = t('sitewide'),\n    caseTypes,\n    links,\n    banners,\n    progress,\n    environment: {\n      name: envName,\n      color: envColor\n    } = {},\n    main,\n    operator,\n    utils,\n    cases,\n    defaultExpanded = false,\n    collapsedHoverMenus = false,\n    ...restProps\n  } = props;\n  const {\n    appName,\n    portalName,\n    href: appInfoHref,\n    onClick: appInfoOnClick,\n    imageSrc: logoSrc,\n    appNameHidden,\n    ...appInfoRestProps\n  } = appInfo;\n  let appInfoAs = 'div';\n  if (appInfoHref) appInfoAs = Link;else if (appInfoOnClick) appInfoAs = Button;\n  const {\n    start,\n    end\n  } = useDirection();\n  const theme = useTheme();\n  const navRef = useConsolidatedRef(ref);\n  const [mobileNavOpen, setMobileNavOpen] = useState(false);\n  const [mobileNavBackdrop, setMobileNavBackdrop] = useState(false);\n  const [drawerOpen, setDrawerOpen] = useState(false);\n  const focusedImperatively = useRef(false);\n  const [headerEl, setHeaderEl] = useElement();\n  const [mobileHeaderEl, setMobileHeaderEl] = useElement();\n  const [appInfoEl, setAppInfoEl] = useElement();\n  const [expandCollapseEl, setExpandCollapseEl] = useElement();\n  const isSmallOrAbove = useBreakpoint('sm');\n  const showAppHeader = !!appHeader && isSmallOrAbove;\n  const showMainContent = showAppHeader ? !!(headerEl || mobileHeaderEl) : true;\n  const openNavTimeoutId = useRef();\n  const closeNavTimeoutId = useRef();\n  const previewTriggerRef = useRef(null);\n  const [searchContainerEl, setSearchContainerEl] = useState(null);\n  const {\n    state: navState,\n    set: setNavState\n  } = useTransitionState({\n    ref: navRef,\n    property: 'width',\n    states: openCloseStates,\n    defaultState: defaultExpanded ? 'open' : 'closed'\n  });\n  const skipLinks = useMemo(() => [{\n    label: t('go_to_main_content'),\n    target: {\n      ariaLabel: t('main_content'),\n      selector: 'main'\n    }\n  }], [t]);\n  const openNav = useCallback(function () {\n    let delay = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    if (closeNavTimeoutId.current) clearTimeout(closeNavTimeoutId.current);\n    openNavTimeoutId.current = setTimeout(() => {\n      setNavState('open');\n    }, delay);\n  }, []);\n  const closeNav = useCallback(function () {\n    let delay = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    if (openNavTimeoutId.current) clearTimeout(openNavTimeoutId.current);\n    closeNavTimeoutId.current = setTimeout(() => {\n      setNavState('closed');\n    }, delay);\n  }, []);\n  const onFocus = useCallback(() => {\n    focusedImperatively.current = false;\n  }, [openNav, isSmallOrAbove]);\n  const onKeydown = useCallback(_ref3 => {\n    let {\n      key\n    } = _ref3;\n    if (key === 'Escape') setMobileNavOpen(false);\n  }, []);\n  useEffect(() => {\n    if (mobileNavOpen) {\n      document.addEventListener('keydown', onKeydown);\n      return () => {\n        document.removeEventListener('keydown', onKeydown);\n      };\n    }\n  }, [mobileNavOpen]);\n  useEffect(() => {\n    if (isSmallOrAbove && mobileNavOpen) {\n      setMobileNavBackdrop(false);\n      setMobileNavOpen(false);\n    }\n  }, [isSmallOrAbove, mobileNavOpen]);\n  const activatedEl = useRef(document.body);\n  useEvent('click', e => {\n    activatedEl.current = document.elementFromPoint(e.clientX, e.clientY) ?? document.body;\n  });\n  useShortcut('NextRegion', () => {\n    const activeElement = document.activeElement && document.activeElement !== document.body ? document.activeElement : activatedEl.current;\n    const regionEls = followingNodes(document.createNodeIterator(document.body, NodeFilter.SHOW_ELEMENT, node =>\n    // safe to treat as HTMLElement, as we requested to give us only elements\n    node.hasAttribute('data-app-region') || node === activeElement ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP), activeElement);\n    // try to focus first visibleregion\n    const focusedNode = regionEls.find(node => focusHeadingOrContainer(node, ''));\n    if (!focusedNode) activeElement.focus();\n  });\n  useShortcut('PrevRegion', () => {\n    const activeElement = document.activeElement && document.activeElement !== document.body ? document.activeElement : activatedEl.current;\n    const regionEls = followingNodes(document.createNodeIterator(document.body, NodeFilter.SHOW_ELEMENT, node =>\n    // safe to treat as HTMLElement, as we requested to give us only elements\n    node.hasAttribute('data-app-region') || node === activeElement ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP), activeElement);\n    regionEls.reverse();\n    if (regionEls[0].contains(activeElement)) regionEls.splice(0, 1);\n    const focusedNode = regionEls.find(node => focusHeadingOrContainer(node, ''));\n    if (!focusedNode) activeElement.focus();\n  });\n  const appShellJSX = _jsxs(Flex, {\n    ...restProps,\n    container: {\n      direction: 'column',\n      justify: 'between'\n    },\n    ref: isSmallOrAbove ? navRef : undefined,\n    as: StyledAppNav,\n    appHeader: showAppHeader,\n    navOpen: mobileNavOpen,\n    showEnv: !!envName,\n    onFocus: onFocus,\n    \"data-app-region\": true,\n    \"aria-label\": t('app_shell_main_navigation_label'),\n    children: [envName && _jsx(StyledAppEnvironment, {\n      item: {\n        shrink: 0\n      },\n      color: envColor ?? theme.base.colors.red['extra-light'],\n      children: envName\n    }), !showAppHeader && _jsxs(_Fragment, {\n      children: [_jsxs(StyledAppInfo, {\n        as: Grid,\n        forwardedAs: appInfoAs,\n        variant: 'link',\n        href: appInfoHref,\n        onClick: appInfoOnClick,\n        \"aria-label\": `${appName}${portalName ? ` - ${portalName}` : ''}`,\n        ...appInfoRestProps,\n        container: {\n          alignItems: 'center',\n          areas: portalName ? '\"logo app\" \"logo portal\"' : '\"logo app\"'\n        },\n        ref: setAppInfoEl,\n        icon: true,\n        children: [_jsx(Grid, {\n          item: {\n            area: 'logo'\n          },\n          as: Image,\n          src: logoSrc,\n          alt: appName\n        }), _jsx(Grid, {\n          item: {\n            area: 'app'\n          },\n          as: appNameHidden ? VisuallyHiddenText : 'span',\n          children: appName\n        }), portalName && _jsx(Grid, {\n          item: {\n            area: 'portal'\n          },\n          as: appNameHidden ? VisuallyHiddenText : 'span',\n          children: portalName\n        })]\n      }), navState === 'closed' && !appNameHidden && _jsx(Tooltip, {\n        target: appInfoEl,\n        placement: 'right',\n        as: StyledAppShellTooltip,\n        showDelay: 'none',\n        hideDelay: 'none',\n        children: appName\n      })]\n    }), searchInput && !showAppHeader && _jsx(AppShellSearch, {\n      searchLabel: searchLabel,\n      collapsed: !mobileNavOpen && ['closed', 'closing'].includes(navState),\n      searchInput: searchInput\n    }), _jsxs(StyledScrollWrap, {\n      onClick: isSmallOrAbove ? () => {\n        if (['closing', 'closed'].includes(navState)) {\n          openNav(0);\n        } else {\n          closeNav(0);\n        }\n      } : undefined,\n      children: [caseTypes && caseTypes.length > 0 && _jsx(CaseTypes, {\n        caseTypes: caseTypes\n      }), links && _jsx(Links, {\n        links: links\n      }), cases && _jsx(Cases, {\n        cases: cases\n      })]\n    }), _jsx(Utils, {\n      appHeader: showAppHeader,\n      operator: operator,\n      contextSwitcher: contextSwitcher,\n      items: utils\n    }), !mobileNavOpen && _jsxs(Flex, {\n      container: {\n        justify: 'center'\n      },\n      children: [_jsx(StyledAppShellToggleButton, {\n        icon: true,\n        ref: setExpandCollapseEl,\n        compact: true,\n        variant: 'simple',\n        onClick: () => {\n          setNavState(navState === 'closed' ? 'open' : 'closed');\n        },\n        open: ['open', 'opening'].includes(navState),\n        \"aria-label\": navState === 'closed' ? t('expand') : t('collapse'),\n        children: ['closed', 'closing'].includes(navState) ? _jsx(Icon, {\n          name: `arrow-micro-${end}`\n        }) : _jsx(Icon, {\n          name: `arrow-micro-${start}`\n        })\n      }), ['open', 'closed'].includes(navState) && _jsx(Tooltip, {\n        target: expandCollapseEl,\n        placement: 'right',\n        as: StyledAppShellTooltip,\n        showDelay: 'none',\n        hideDelay: 'none',\n        children: navState === 'closed' ? t('expand') : t('collapse')\n      })]\n    })]\n  });\n  return _jsxs(AppShellContext.Provider, {\n    value: useMemo(() => ({\n      navOpen: mobileNavOpen || navState === 'open' || navState === 'opening',\n      drawerOpen,\n      setDrawerOpen,\n      collapsedHoverMenus,\n      navState,\n      focusedImperatively,\n      headerEl: headerEl || mobileHeaderEl,\n      previewTriggerRef,\n      searchContainerEl,\n      setSearchContainerEl,\n      mobileNavOpen\n    }), [navState, drawerOpen, mobileNavOpen, headerEl, mobileHeaderEl, searchContainerEl]),\n    children: [_jsx(SkipLinks, {\n      items: skipLinks\n    }), showAppHeader && _jsx(AppHeader, {\n      ...appInfo,\n      contextSwitcher: contextSwitcher,\n      searchInput: searchInput,\n      searchLabel: searchLabel,\n      operator: operator,\n      searchPage: searchPage,\n      ref: setHeaderEl\n    }), isSmallOrAbove ? appShellJSX : _jsxs(_Fragment, {\n      children: [_jsx(Flex, {\n        as: StyledMobileNav,\n        container: {\n          alignItems: 'center'\n        },\n        ref: setMobileHeaderEl,\n        children: _jsx(Button, {\n          variant: 'simple',\n          onClick: () => setMobileNavBackdrop(true),\n          \"aria-label\": t('app_shell_open_nav'),\n          icon: true,\n          children: _jsx(Icon, {\n            name: 'bars'\n          })\n        })\n      }), _jsx(Backdrop, {\n        open: mobileNavBackdrop,\n        transitionSpeed: 'none',\n        onAfterTransitionIn: () => setMobileNavOpen(true),\n        onBeforeTransitionOut: () => setMobileNavOpen(false),\n        onClick: e => {\n          if (e.currentTarget === e.target) setMobileNavOpen(false);\n        },\n        children: _jsx(Drawer, {\n          open: mobileNavOpen,\n          onAfterClose: () => {\n            setMobileNavBackdrop(false);\n          },\n          position: 'fixed',\n          placement: start,\n          size: 'min(18.75rem, calc(100vw - 3.5rem))',\n          nullWhenClosed: true,\n          children: appShellJSX\n        })\n      })]\n    }), showMainContent && _jsxs(StyledAppMain, {\n      appHeader: showAppHeader,\n      mobileNav: !isSmallOrAbove,\n      headerOffset: isSmallOrAbove ? headerEl?.offsetHeight : mobileHeaderEl?.offsetHeight,\n      navOpen: ['open', 'opening'].includes(navState),\n      \"aria-busy\": progress ? 'true' : 'false',\n      \"data-app-region\": true,\n      children: [_jsx(Progress, {\n        visible: !!progress,\n        placement: 'local',\n        message: typeof progress === 'string' ? progress : t('loading')\n      }), banners && _jsx(StyledBannerRegion, {\n        children: banners\n      }), main]\n    })]\n  });\n});\nexport default AppShell;","map":{"version":3,"names":["forwardRef","useState","useCallback","useEffect","useMemo","useContext","useRef","isValidElement","Flex","Link","Count","Icon","registerIcon","timesIcon","plusIcon","caseSolidIcon","barsIcon","caretLeftIcon","caretRightIcon","Image","useI18n","useBreakpoint","useConsolidatedRef","useDirection","useTheme","useElement","useTransitionState","useEvent","openCloseStates","Grid","Button","Drawer","Backdrop","Tooltip","SkipLinks","VisuallyHiddenText","Progress","registerAction","useShortcut","focusHeadingOrContainer","AppShellContext","AppShellDrawerContext","AppShellDrawer","AppHeader","StyledAppNav","StyledAppInfo","StyledCaseTypes","StyledScrollWrap","StyledUtils","StyledAppMain","StyledNavCasesList","StyledAppEnvironment","StyledBannerRegion","StyledCountIcon","StyledUtilIconCount","StyledMobileNav","StyledAppShellTooltip","StyledAppShellToggleButton","NavigationList","AppShellSearch","followingNodes","id","defaultKeyBinding","CaseTypes","_ref","caseTypes","t","transformedCaseTypes","map","caseType","primary","name","_jsx","children","items","visual","Links","props","links","transformedLinks","setTransformedLinks","mergedNavLinks","link","active","icon","onClick","undefined","Cases","cases","setupCases","item","secondary","onDismiss","restProps","Utils","_ref2","contextSwitcher","operator","appHeader","contexts","onContextClick","label","contextSwitcherLabel","navOpen","navState","drawerOpen","setDrawerOpen","setItem","find","utilItem","operatorInfo","avatar","actions","contextSwitcherUtilItem","length","drawerView","context","selected","e","singleSelect","transform","uItem","onDrawerClose","onDrawerOpen","count","_jsxs","as","variant","collapseItems","utilItems","Provider","value","closeDrawer","openDrawer","collapsed","content","header","drawerHeader","AppShell","ref","appInfo","searchInput","searchPage","searchLabel","banners","progress","environment","envName","color","envColor","main","utils","defaultExpanded","collapsedHoverMenus","appName","portalName","href","appInfoHref","appInfoOnClick","imageSrc","logoSrc","appNameHidden","appInfoRestProps","appInfoAs","start","end","theme","navRef","mobileNavOpen","setMobileNavOpen","mobileNavBackdrop","setMobileNavBackdrop","focusedImperatively","headerEl","setHeaderEl","mobileHeaderEl","setMobileHeaderEl","appInfoEl","setAppInfoEl","expandCollapseEl","setExpandCollapseEl","isSmallOrAbove","showAppHeader","showMainContent","openNavTimeoutId","closeNavTimeoutId","previewTriggerRef","searchContainerEl","setSearchContainerEl","state","set","setNavState","property","states","defaultState","skipLinks","target","ariaLabel","selector","openNav","delay","arguments","current","clearTimeout","setTimeout","closeNav","onFocus","onKeydown","_ref3","key","document","addEventListener","removeEventListener","activatedEl","body","elementFromPoint","clientX","clientY","activeElement","regionEls","createNodeIterator","NodeFilter","SHOW_ELEMENT","node","hasAttribute","FILTER_ACCEPT","FILTER_SKIP","focusedNode","focus","reverse","contains","splice","appShellJSX","container","direction","justify","showEnv","shrink","base","colors","red","_Fragment","forwardedAs","alignItems","areas","area","src","alt","placement","showDelay","hideDelay","includes","compact","open","transitionSpeed","onAfterTransitionIn","onBeforeTransitionOut","currentTarget","onAfterClose","position","size","nullWhenClosed","mobileNav","headerOffset","offsetHeight","visible","message"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/components/AppShell/AppShell.tsx"],"sourcesContent":["import {\n  FunctionComponent,\n  forwardRef,\n  PropsWithoutRef,\n  Ref,\n  useState,\n  useCallback,\n  useEffect,\n  useMemo,\n  ElementType,\n  useContext,\n  useRef,\n  FC,\n  isValidElement\n} from 'react';\n\nimport Flex from '../Flex';\nimport Link from '../Link';\nimport Count from '../Badges/Count';\nimport Icon, { registerIcon } from '../Icon';\nimport * as timesIcon from '../Icon/icons/times.icon';\nimport * as plusIcon from '../Icon/icons/plus.icon';\nimport * as caseSolidIcon from '../Icon/icons/case-solid.icon';\nimport * as barsIcon from '../Icon/icons/bars.icon';\nimport * as caretLeftIcon from '../Icon/icons/caret-left.icon';\nimport * as caretRightIcon from '../Icon/icons/caret-right.icon';\nimport Image from '../Image';\nimport type { ForwardProps } from '../../types';\nimport {\n  useI18n,\n  useBreakpoint,\n  useConsolidatedRef,\n  useDirection,\n  useTheme,\n  useElement,\n  useTransitionState,\n  useEvent\n} from '../../hooks';\nimport { openCloseStates } from '../../hooks/useTransitionState';\nimport Grid from '../Grid';\nimport Button from '../Button';\nimport Drawer from '../Drawer';\nimport Backdrop from '../Backdrop';\nimport Tooltip from '../Tooltip/Tooltip';\nimport SkipLinks, { SkipLinksProps } from '../SkipLinks';\nimport VisuallyHiddenText from '../VisuallyHiddenText';\nimport Progress from '../Progress';\nimport { registerAction } from '../ShortcutManager';\nimport useShortcut from '../../hooks/useShortcut';\nimport { focusHeadingOrContainer } from '../../utils';\n\nimport AppShellContext, { AppShellDrawerContext } from './AppShellContext';\nimport AppShellDrawer from './Drawer';\nimport AppHeader from './AppHeader';\nimport {\n  StyledAppNav,\n  StyledAppInfo,\n  StyledCaseTypes,\n  StyledScrollWrap,\n  StyledUtils,\n  StyledAppMain,\n  StyledNavCasesList,\n  StyledAppEnvironment,\n  StyledBannerRegion,\n  StyledCountIcon,\n  StyledUtilIconCount,\n  StyledMobileNav,\n  StyledAppShellTooltip,\n  StyledAppShellToggleButton\n} from './AppShell.styles';\nimport {\n  AppShellProps,\n  CaseProps,\n  CaseTypeProps,\n  LinkProps,\n  NavListItemProps,\n  UtilItemProps,\n  UtilsProps\n} from './AppShell.types';\nimport NavigationList from './NavigationList';\nimport { AppShellSearch } from './AppShellSearch';\nimport { followingNodes } from './utils';\n\nregisterIcon(timesIcon, plusIcon, caseSolidIcon, barsIcon, caretRightIcon, caretLeftIcon);\nregisterAction(\n  { id: 'NextRegion', defaultKeyBinding: 'F9' },\n  { id: 'PrevRegion', defaultKeyBinding: 'Shift+F9' }\n);\n\nconst CaseTypes: FunctionComponent<{ caseTypes: CaseTypeProps[] }> = ({\n  caseTypes\n}: {\n  caseTypes: CaseTypeProps[];\n}) => {\n  const t = useI18n();\n\n  const transformedCaseTypes = caseTypes.map(caseType => {\n    return {\n      ...caseType,\n      primary: caseType.name\n    };\n  });\n\n  return useMemo(\n    () => (\n      <StyledCaseTypes>\n        <NavigationList\n          items={[\n            {\n              primary: t('app_shell_create'),\n              visual: <Icon name='plus' />,\n              items: transformedCaseTypes\n            }\n          ]}\n        />\n      </StyledCaseTypes>\n    ),\n    [caseTypes]\n  );\n};\n\nconst Links: FunctionComponent<{ links: LinkProps[] }> = (props: { links: LinkProps[] }) => {\n  const { links } = props;\n  const [transformedLinks, setTransformedLinks] = useState<NavListItemProps[]>([]);\n\n  // TODO: Can this be a memo instead of a state and an effect?\n  const mergedNavLinks = (items: LinkProps[]): NavListItemProps[] => {\n    return items.map((link: LinkProps) => {\n      return {\n        ...link,\n        primary: link.name,\n        'aria-current': link.active ? 'page' : null,\n        visual: link.icon ? <Icon name={link.icon} /> : null,\n        onClick: link.links ? undefined : link.onClick,\n        items: link.links ? mergedNavLinks(link.links) : undefined\n      };\n    });\n  };\n\n  useEffect(() => {\n    setTransformedLinks(mergedNavLinks(links));\n  }, [links]);\n\n  return (\n    <div>\n      <NavigationList items={transformedLinks} />\n    </div>\n  );\n};\n\nconst Cases: FunctionComponent<{ cases: CaseProps[] }> = (props: { cases: CaseProps[] }) => {\n  const { cases } = props;\n\n  const setupCases = (items: CaseProps[]): NavListItemProps[] => {\n    return items.map((item: CaseProps) => {\n      const {\n        id,\n        primary,\n        secondary,\n        visual = <Icon name='case-solid' />,\n        active,\n        onClick,\n        onDismiss,\n        ...restProps\n      } = item;\n      return {\n        ...restProps,\n        id,\n        'aria-current': active ? 'page' : undefined,\n        primary,\n        secondary,\n        active: !!active,\n        onClick,\n        onDismiss,\n        visual\n      };\n    });\n  };\n\n  return (\n    <StyledNavCasesList>\n      <NavigationList items={setupCases(cases)} />\n    </StyledNavCasesList>\n  );\n};\n\nexport const Utils: FC<UtilsProps> = ({ contextSwitcher = {}, operator, items, appHeader }) => {\n  const t = useI18n();\n  const {\n    contexts,\n    onContextClick,\n    label: contextSwitcherLabel = t('switch_to')\n  } = contextSwitcher;\n  const { navOpen, navState, drawerOpen, setDrawerOpen } = useContext(AppShellContext);\n  const [item, setItem] = useState<UtilItemProps>();\n\n  useEffect(() => {\n    if (drawerOpen && item) {\n      setItem(\n        items?.find<UtilItemProps>(\n          (utilItem): utilItem is UtilItemProps =>\n            !isValidElement<any>(utilItem) && utilItem.name === item.name\n        )\n      );\n    }\n  }, [items]);\n\n  const operatorInfo: NavListItemProps[] = useMemo(\n    () =>\n      appHeader\n        ? []\n        : [\n            {\n              primary: operator.name,\n              visual: operator.avatar,\n              items: operator.actions\n            }\n          ],\n    [appHeader, operator.name, operator.avatar, operator.actions]\n  );\n\n  const contextSwitcherUtilItem: UtilItemProps | undefined = useMemo(() => {\n    if (!appHeader && contexts && contexts?.length > 1 && !!onContextClick) {\n      return {\n        name: contextSwitcherLabel,\n        primary: contextSwitcherLabel,\n        visual: <Icon name='dot-9-solid' />,\n        drawerView: (\n          <NavigationList\n            items={contexts!.map(context => ({\n              ...context,\n              primary: context.primary,\n              'aria-current': !!context.selected,\n              visual: context.visual,\n              onClick: e => {\n                onContextClick(context.id, e);\n              }\n            }))}\n            singleSelect\n          />\n        )\n      };\n    }\n  }, [appHeader, contexts, contextSwitcherLabel, onContextClick]);\n\n  const transform = useCallback(\n    (utilItem: UtilItemProps): NavListItemProps => {\n      const uItem = { ...utilItem };\n      delete uItem.onDrawerClose;\n      delete uItem.onDrawerOpen;\n      return {\n        onClick: () => {\n          if (utilItem.drawerView) {\n            setItem(utilItem);\n          }\n        },\n        ...uItem,\n        primary: utilItem.name,\n        visual: utilItem.count ? (\n          <StyledUtilIconCount>\n            {utilItem.visual}\n            <Count as={StyledCountIcon} variant='urgent' id={`${utilItem.name}-count`}>\n              {utilItem.count}\n            </Count>\n          </StyledUtilIconCount>\n        ) : (\n          utilItem.visual\n        ),\n        collapseItems: !navOpen\n      };\n    },\n    [navOpen]\n  );\n\n  const utilItems = useMemo(() => {\n    return [\n      ...(items ?? []).map(uItem => {\n        return isValidElement<any>(uItem) ? uItem : transform(uItem);\n      }),\n      ...(contextSwitcherUtilItem ? [transform(contextSwitcherUtilItem)] : []),\n      ...operatorInfo\n    ];\n  }, [items, operatorInfo, transform]);\n\n  useEffect(() => {\n    if (item) setDrawerOpen(true);\n  }, [item]);\n\n  useEffect(() => {\n    if (navState === 'closed' || navState === 'closing') setDrawerOpen(false);\n  }, [navState]);\n\n  return (\n    <AppShellDrawerContext.Provider\n      value={useMemo(\n        () => ({\n          drawerOpen,\n          closeDrawer: () => {\n            setDrawerOpen(false);\n          },\n          openDrawer: setItem\n        }),\n        [drawerOpen]\n      )}\n    >\n      <StyledUtils>\n        <NavigationList items={utilItems} collapsed />\n      </StyledUtils>\n\n      {item && (\n        <AppShellDrawer\n          drawerOpen={drawerOpen}\n          setDrawerOpen={setDrawerOpen}\n          content={item.drawerView}\n          header={item.drawerHeader || item.name}\n          onDrawerClose={() => {\n            setItem(undefined);\n            item.onDrawerClose?.();\n          }}\n          onDrawerOpen={item.onDrawerOpen}\n        />\n      )}\n    </AppShellDrawerContext.Provider>\n  );\n};\n\nconst AppShell: FunctionComponent<AppShellProps & ForwardProps> = forwardRef(\n  (props: PropsWithoutRef<AppShellProps>, ref: Ref<HTMLDivElement>) => {\n    const t = useI18n();\n\n    const {\n      appInfo,\n      contextSwitcher,\n      searchInput,\n      appHeader,\n      searchPage,\n      searchLabel = t('sitewide'),\n      caseTypes,\n      links,\n      banners,\n      progress,\n      environment: { name: envName, color: envColor } = {},\n      main,\n      operator,\n      utils,\n      cases,\n      defaultExpanded = false,\n      collapsedHoverMenus = false,\n      ...restProps\n    } = props;\n    const {\n      appName,\n      portalName,\n      href: appInfoHref,\n      onClick: appInfoOnClick,\n      imageSrc: logoSrc,\n      appNameHidden,\n      ...appInfoRestProps\n    } = appInfo;\n    let appInfoAs: ElementType = 'div';\n    if (appInfoHref) appInfoAs = Link;\n    else if (appInfoOnClick) appInfoAs = Button;\n\n    const { start, end } = useDirection();\n    const theme = useTheme();\n    const navRef = useConsolidatedRef(ref);\n\n    const [mobileNavOpen, setMobileNavOpen] = useState(false);\n    const [mobileNavBackdrop, setMobileNavBackdrop] = useState(false);\n    const [drawerOpen, setDrawerOpen] = useState(false);\n\n    const focusedImperatively = useRef(false);\n    const [headerEl, setHeaderEl] = useElement<HTMLDivElement>();\n    const [mobileHeaderEl, setMobileHeaderEl] = useElement<HTMLDivElement>();\n    const [appInfoEl, setAppInfoEl] = useElement<HTMLAnchorElement>();\n    const [expandCollapseEl, setExpandCollapseEl] = useElement<HTMLButtonElement>();\n\n    const isSmallOrAbove = useBreakpoint('sm');\n\n    const showAppHeader = !!appHeader && isSmallOrAbove;\n    const showMainContent = showAppHeader ? !!(headerEl || mobileHeaderEl) : true;\n\n    const openNavTimeoutId = useRef<ReturnType<typeof setTimeout>>();\n    const closeNavTimeoutId = useRef<ReturnType<typeof setTimeout>>();\n    const previewTriggerRef = useRef<HTMLElement>(null);\n\n    const [searchContainerEl, setSearchContainerEl] = useState<HTMLElement | null>(null);\n\n    const { state: navState, set: setNavState } = useTransitionState({\n      ref: navRef,\n      property: 'width',\n      states: openCloseStates,\n      defaultState: defaultExpanded ? 'open' : 'closed'\n    });\n\n    const skipLinks: SkipLinksProps['items'] = useMemo(\n      () => [\n        {\n          label: t('go_to_main_content'),\n          target: { ariaLabel: t('main_content'), selector: 'main' }\n        }\n      ],\n      [t]\n    );\n\n    const openNav = useCallback((delay: number = 0) => {\n      if (closeNavTimeoutId.current) clearTimeout(closeNavTimeoutId.current);\n      openNavTimeoutId.current = setTimeout(() => {\n        setNavState('open');\n      }, delay);\n    }, []);\n\n    const closeNav = useCallback((delay: number = 0) => {\n      if (openNavTimeoutId.current) clearTimeout(openNavTimeoutId.current);\n      closeNavTimeoutId.current = setTimeout(() => {\n        setNavState('closed');\n      }, delay);\n    }, []);\n\n    const onFocus = useCallback(() => {\n      focusedImperatively.current = false;\n    }, [openNav, isSmallOrAbove]);\n\n    const onKeydown = useCallback(({ key }: KeyboardEvent) => {\n      if (key === 'Escape') setMobileNavOpen(false);\n    }, []);\n\n    useEffect(() => {\n      if (mobileNavOpen) {\n        document.addEventListener('keydown', onKeydown);\n        return () => {\n          document.removeEventListener('keydown', onKeydown);\n        };\n      }\n    }, [mobileNavOpen]);\n\n    useEffect(() => {\n      if (isSmallOrAbove && mobileNavOpen) {\n        setMobileNavBackdrop(false);\n        setMobileNavOpen(false);\n      }\n    }, [isSmallOrAbove, mobileNavOpen]);\n\n    const activatedEl = useRef<Element>(document.body);\n    useEvent('click', e => {\n      activatedEl.current = document.elementFromPoint(e.clientX, e.clientY) ?? document.body;\n    });\n\n    useShortcut('NextRegion', () => {\n      const activeElement =\n        document.activeElement && document.activeElement !== document.body\n          ? document.activeElement\n          : activatedEl.current;\n      const regionEls = followingNodes<HTMLElement>(\n        document.createNodeIterator(document.body, NodeFilter.SHOW_ELEMENT, node =>\n          // safe to treat as HTMLElement, as we requested to give us only elements\n          (node as HTMLElement).hasAttribute('data-app-region') || node === activeElement\n            ? NodeFilter.FILTER_ACCEPT\n            : NodeFilter.FILTER_SKIP\n        ),\n        activeElement\n      );\n      // try to focus first visibleregion\n      const focusedNode = regionEls.find(node => focusHeadingOrContainer(node, ''));\n      if (!focusedNode) (activeElement as HTMLElement).focus();\n    });\n\n    useShortcut('PrevRegion', () => {\n      const activeElement =\n        document.activeElement && document.activeElement !== document.body\n          ? document.activeElement\n          : activatedEl.current;\n      const regionEls = followingNodes<HTMLElement>(\n        document.createNodeIterator(document.body, NodeFilter.SHOW_ELEMENT, node =>\n          // safe to treat as HTMLElement, as we requested to give us only elements\n          (node as HTMLElement).hasAttribute('data-app-region') || node === activeElement\n            ? NodeFilter.FILTER_ACCEPT\n            : NodeFilter.FILTER_SKIP\n        ),\n        activeElement\n      );\n      regionEls.reverse();\n      if (regionEls[0].contains(activeElement)) regionEls.splice(0, 1);\n      const focusedNode = regionEls.find(node => focusHeadingOrContainer(node, ''));\n      if (!focusedNode) (activeElement as HTMLElement).focus();\n    });\n\n    const appShellJSX = (\n      <Flex\n        {...restProps}\n        container={{\n          direction: 'column',\n          justify: 'between'\n        }}\n        ref={isSmallOrAbove ? navRef : undefined}\n        as={StyledAppNav}\n        appHeader={showAppHeader}\n        navOpen={mobileNavOpen}\n        showEnv={!!envName}\n        onFocus={onFocus}\n        data-app-region\n        aria-label={t('app_shell_main_navigation_label')}\n      >\n        {envName && (\n          <StyledAppEnvironment\n            item={{ shrink: 0 }}\n            color={envColor ?? theme.base.colors.red['extra-light']}\n          >\n            {envName}\n          </StyledAppEnvironment>\n        )}\n\n        {!showAppHeader && (\n          <>\n            <StyledAppInfo\n              as={Grid}\n              forwardedAs={appInfoAs}\n              variant='link'\n              href={appInfoHref}\n              onClick={appInfoOnClick}\n              aria-label={`${appName}${portalName ? ` - ${portalName}` : ''}`}\n              {...appInfoRestProps}\n              container={{\n                alignItems: 'center',\n                areas: portalName ? '\"logo app\" \"logo portal\"' : '\"logo app\"'\n              }}\n              ref={setAppInfoEl}\n              icon\n            >\n              <Grid item={{ area: 'logo' }} as={Image} src={logoSrc} alt={appName} />\n              <Grid item={{ area: 'app' }} as={appNameHidden ? VisuallyHiddenText : 'span'}>\n                {appName}\n              </Grid>\n              {portalName && (\n                <Grid item={{ area: 'portal' }} as={appNameHidden ? VisuallyHiddenText : 'span'}>\n                  {portalName}\n                </Grid>\n              )}\n            </StyledAppInfo>\n            {navState === 'closed' && !appNameHidden && (\n              <Tooltip\n                target={appInfoEl}\n                placement='right'\n                as={StyledAppShellTooltip}\n                showDelay='none'\n                hideDelay='none'\n              >\n                {appName}\n              </Tooltip>\n            )}\n          </>\n        )}\n\n        {searchInput && !showAppHeader && (\n          <AppShellSearch\n            searchLabel={searchLabel}\n            collapsed={!mobileNavOpen && ['closed', 'closing'].includes(navState)}\n            searchInput={searchInput}\n          />\n        )}\n\n        <StyledScrollWrap\n          onClick={\n            isSmallOrAbove\n              ? () => {\n                  if (['closing', 'closed'].includes(navState)) {\n                    openNav(0);\n                  } else {\n                    closeNav(0);\n                  }\n                }\n              : undefined\n          }\n        >\n          {caseTypes && caseTypes.length > 0 && <CaseTypes caseTypes={caseTypes} />}\n          {links && <Links links={links} />}\n          {cases && <Cases cases={cases} />}\n        </StyledScrollWrap>\n\n        <Utils\n          appHeader={showAppHeader}\n          operator={operator}\n          contextSwitcher={contextSwitcher}\n          items={utils}\n        />\n\n        {!mobileNavOpen && (\n          <Flex container={{ justify: 'center' }}>\n            <StyledAppShellToggleButton\n              icon\n              ref={setExpandCollapseEl}\n              compact\n              variant='simple'\n              onClick={() => {\n                setNavState(navState === 'closed' ? 'open' : 'closed');\n              }}\n              open={['open', 'opening'].includes(navState)}\n              aria-label={navState === 'closed' ? t('expand') : t('collapse')}\n            >\n              {['closed', 'closing'].includes(navState) ? (\n                <Icon name={`arrow-micro-${end}`} />\n              ) : (\n                <Icon name={`arrow-micro-${start}`} />\n              )}\n            </StyledAppShellToggleButton>\n\n            {['open', 'closed'].includes(navState) && (\n              <Tooltip\n                target={expandCollapseEl}\n                placement='right'\n                as={StyledAppShellTooltip}\n                showDelay='none'\n                hideDelay='none'\n              >\n                {navState === 'closed' ? t('expand') : t('collapse')}\n              </Tooltip>\n            )}\n          </Flex>\n        )}\n      </Flex>\n    );\n\n    return (\n      <AppShellContext.Provider\n        value={useMemo(\n          () => ({\n            navOpen: mobileNavOpen || navState === 'open' || navState === 'opening',\n            drawerOpen,\n            setDrawerOpen,\n            collapsedHoverMenus,\n            navState,\n            focusedImperatively,\n            headerEl: headerEl || mobileHeaderEl,\n            previewTriggerRef,\n            searchContainerEl,\n            setSearchContainerEl,\n            mobileNavOpen\n          }),\n          [navState, drawerOpen, mobileNavOpen, headerEl, mobileHeaderEl, searchContainerEl]\n        )}\n      >\n        <SkipLinks items={skipLinks} />\n        {showAppHeader && (\n          <AppHeader\n            {...appInfo}\n            contextSwitcher={contextSwitcher}\n            searchInput={searchInput}\n            searchLabel={searchLabel}\n            operator={operator}\n            searchPage={searchPage}\n            ref={setHeaderEl}\n          />\n        )}\n\n        {isSmallOrAbove ? (\n          appShellJSX\n        ) : (\n          <>\n            <Flex as={StyledMobileNav} container={{ alignItems: 'center' }} ref={setMobileHeaderEl}>\n              <Button\n                variant='simple'\n                onClick={() => setMobileNavBackdrop(true)}\n                aria-label={t('app_shell_open_nav')}\n                icon\n              >\n                <Icon name='bars' />\n              </Button>\n            </Flex>\n\n            <Backdrop\n              open={mobileNavBackdrop}\n              transitionSpeed='none'\n              onAfterTransitionIn={() => setMobileNavOpen(true)}\n              onBeforeTransitionOut={() => setMobileNavOpen(false)}\n              onClick={e => {\n                if (e.currentTarget === e.target) setMobileNavOpen(false);\n              }}\n            >\n              <Drawer\n                open={mobileNavOpen}\n                onAfterClose={() => {\n                  setMobileNavBackdrop(false);\n                }}\n                position='fixed'\n                placement={start}\n                size='min(18.75rem, calc(100vw - 3.5rem))'\n                nullWhenClosed\n              >\n                {appShellJSX}\n              </Drawer>\n            </Backdrop>\n          </>\n        )}\n        {showMainContent && (\n          <StyledAppMain\n            appHeader={showAppHeader}\n            mobileNav={!isSmallOrAbove}\n            headerOffset={isSmallOrAbove ? headerEl?.offsetHeight : mobileHeaderEl?.offsetHeight}\n            navOpen={['open', 'opening'].includes(navState)}\n            aria-busy={progress ? 'true' : 'false'}\n            data-app-region\n          >\n            <Progress\n              visible={!!progress}\n              placement='local'\n              message={typeof progress === 'string' ? progress : t('loading')}\n            />\n\n            {banners && <StyledBannerRegion>{banners}</StyledBannerRegion>}\n            {main}\n          </StyledAppMain>\n        )}\n      </AppShellContext.Provider>\n    );\n  }\n);\n\nexport default AppShell;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}