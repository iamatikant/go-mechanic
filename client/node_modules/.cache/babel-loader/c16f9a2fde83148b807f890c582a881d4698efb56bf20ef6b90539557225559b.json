{"ast":null,"code":"import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { forwardRef, createContext, useMemo, useContext, useCallback, useState, useEffect, useRef } from 'react';\nimport Progress from '../Progress';\nimport { useConsolidatedRef, useDirection, useFocusWithin } from '../../hooks';\nimport Flex from '../Flex';\nimport Actions from '../Actions';\nimport { cap } from '../../utils';\nimport Button from '../Button';\nimport { StyledStandardTreeParent, StyledToggleIcon, StyledToggleIconWrapper, StyledStandardTreeItemSubTree, StyledStandardTreeLeaf, StyledStandardTree, StyledNodeInteraction, StyledStandardTreeNode, StyledNodeActions, StyledLabelContent, StyledNodeIcon, StyledNodeText } from './StandardTree.styles';\nimport helpers from './helpers';\nconst StandardTreeContext = createContext({\n  currentNodeId: undefined,\n  lined: false,\n  onNodeClick: () => {},\n  onNodeToggle: () => {},\n  firstNodeId: undefined,\n  lastNodeId: undefined,\n  focusedNodeId: undefined,\n  changeFocusedNodeId: () => {},\n  selectableParents: true\n});\nconst NodeRenderer = _ref => {\n  let {\n    id,\n    label,\n    icon,\n    depth,\n    hasParentSibling,\n    nodes,\n    expanded = false,\n    loading = false,\n    subTree,\n    actions,\n    onClick,\n    href\n  } = _ref;\n  const {\n    currentNodeId,\n    onNodeClick,\n    onNodeToggle,\n    lined,\n    focusedNodeId,\n    changeFocusedNodeId,\n    firstNodeId,\n    lastNodeId,\n    selectableParents\n  } = useContext(StandardTreeContext);\n  const current = currentNodeId === id;\n  const focusedEl = focusedNodeId === id;\n  const firstNode = firstNodeId === id;\n  const {\n    start,\n    end\n  } = useDirection();\n  const ariaCurrent = useMemo(() => {\n    return href ? 'page' : 'true';\n  }, [href]);\n  const tabIndex = useMemo(() => {\n    let index = -1;\n    if (focusedNodeId) {\n      index = focusedEl ? 0 : -1;\n    } else if (currentNodeId && nodes && helpers.getNode(nodes, currentNodeId)) {\n      index = current ? 0 : -1;\n    } else {\n      index = firstNode ? 0 : -1;\n    }\n    return index;\n  }, [focusedNodeId, currentNodeId, current, focusedEl]);\n  const handleParentClick = useCallback(e => {\n    onNodeClick?.(id, e);\n    changeFocusedNodeId(id);\n  }, [id, onNodeClick, changeFocusedNodeId]);\n  const handleParentToggle = useCallback(e => {\n    e.preventDefault();\n    e.stopPropagation();\n    onNodeToggle?.(id, e);\n    changeFocusedNodeId(id);\n  }, [id, onNodeToggle, changeFocusedNodeId]);\n  const onKeyDown = useCallback(e => {\n    if (['ArrowUp', 'ArrowDown', 'Home', 'End'].includes(e.key)) e.preventDefault();\n    if (e.key === 'Enter' && !href) e.preventDefault();\n    switch (e.key) {\n      case 'ArrowUp':\n        changeFocusedNodeId(id, 'up');\n        break;\n      case 'ArrowDown':\n        changeFocusedNodeId(id, 'down');\n        break;\n      case `Arrow${cap(end)}`:\n        if (nodes) {\n          if (expanded) {\n            changeFocusedNodeId(id, 'right');\n          } else {\n            onNodeToggle?.(id);\n          }\n        }\n        break;\n      case `Arrow${cap(start)}`:\n        if (expanded) {\n          onNodeToggle?.(id);\n        } else {\n          changeFocusedNodeId(id, 'left');\n        }\n        break;\n      case 'Enter':\n        onClick?.(id, e);\n        if (nodes) {\n          if (selectableParents) {\n            handleParentClick(e);\n          } else {\n            handleParentToggle(e);\n          }\n        } else {\n          onNodeClick?.(id, e);\n          changeFocusedNodeId(id);\n        }\n        break;\n      case 'Home':\n        if (firstNodeId) changeFocusedNodeId(firstNodeId);\n        break;\n      case 'End':\n        if (lastNodeId) changeFocusedNodeId(lastNodeId);\n        break;\n      default:\n    }\n  }, [id, end, nodes, expanded, actions, firstNodeId, lastNodeId, changeFocusedNodeId]);\n  const actionsJSX = useMemo(() => {\n    // since Actions may render a frag of buttons and we need a wrapper for flex space-between.\n    return actions ? _jsx(StyledNodeActions, {\n      children: _jsx(Actions, {\n        items: actions.map(action => {\n          return {\n            ...action,\n            onClick: (actionId, e) => {\n              e.stopPropagation();\n              e.preventDefault();\n              action?.onClick?.(actionId, e);\n            },\n            onKeyDown: e => {\n              if (e.key === 'Enter') e.stopPropagation();\n            }\n          };\n        }),\n        menuAt: 3,\n        menuButtonProps: {\n          onClick: e => {\n            e.stopPropagation();\n            e.preventDefault();\n          },\n          onKeyDown: e => {\n            e.stopPropagation();\n            if (['ArrowUp', 'ArrowDown'].includes(e.key)) {\n              e.preventDefault();\n            }\n          }\n        }\n      })\n    }) : null;\n  }, [actions]);\n  const elRef = useRef(null);\n  useEffect(() => {\n    if (focusedEl) {\n      elRef?.current?.focus();\n    }\n  }, [focusedEl]);\n  const labelContent = useMemo(() => {\n    const internal =\n    // Wrapping in a div for handling of flex space-between when there are node actions.\n    _jsxs(Flex, {\n      container: {\n        alignItems: 'center',\n        gap: 0.5\n      },\n      as: StyledLabelContent,\n      children: [icon && _jsx(StyledNodeIcon, {\n        name: icon\n      }), _jsx(StyledNodeText, {\n        children: label\n      })]\n    });\n    return !nodes && (onClick ?? onNodeClick) ? _jsxs(Flex, {\n      container: {\n        alignItems: 'center',\n        justify: 'between',\n        gap: 2\n      },\n      as: StyledNodeInteraction,\n      forwardedAs: href ? 'a' : 'div',\n      role: 'treeitem',\n      \"aria-current\": current ? ariaCurrent : undefined,\n      tabIndex: tabIndex,\n      onClick: e => {\n        onClick?.(id, e);\n        onNodeClick?.(id, e);\n        changeFocusedNodeId(id);\n      },\n      href: href,\n      onKeyDown: onKeyDown,\n      ref: elRef,\n      children: [internal, actionsJSX]\n    }) : internal;\n  }, [id, label, icon, nodes, actions, onClick, onNodeClick, current, focusedEl, tabIndex, changeFocusedNodeId, onKeyDown]);\n  return _jsx(StyledStandardTreeNode, {\n    id: id,\n    style: {\n      '--depth': depth,\n      '--has-parent': depth ? 1 : 0,\n      '--has-parent-sibling': hasParentSibling ? 1 : 0\n    },\n    \"aria-busy\": loading,\n    children: nodes ? _jsxs(_Fragment, {\n      children: [_jsxs(Flex, {\n        container: {\n          alignItems: 'center',\n          justify: 'between',\n          gap: 2\n        },\n        as: StyledStandardTreeParent,\n        forwardedAs: href ? 'a' : 'div',\n        role: 'treeitem',\n        \"aria-current\": current ? ariaCurrent : undefined,\n        tabIndex: tabIndex,\n        variant: 'text',\n        onClick: selectableParents ? handleParentClick : handleParentToggle,\n        href: selectableParents ? href : undefined,\n        \"aria-expanded\": expanded ? 'true' : 'false',\n        \"aria-owns\": `${id}-subtree`,\n        \"aria-label\": label,\n        onKeyDown: onKeyDown,\n        ref: elRef,\n        children: [_jsxs(Flex, {\n          container: {\n            alignItems: 'center'\n          },\n          as: 'span',\n          children: [selectableParents ? _jsx(Button, {\n            variant: 'simple',\n            tabIndex: -1,\n            icon: true,\n            compact: true,\n            onClick: handleParentToggle,\n            children: _jsx(StyledToggleIcon, {\n              name: 'caret-right'\n            })\n          }) : _jsx(Flex, {\n            as: StyledToggleIconWrapper,\n            container: {\n              justify: 'center',\n              alignItems: 'center'\n            },\n            children: _jsx(StyledToggleIcon, {\n              name: 'caret-right'\n            })\n          }), labelContent]\n        }), actionsJSX]\n      }), _jsxs(StyledStandardTreeItemSubTree, {\n        lined: lined,\n        id: `${id}-subtree`,\n        children: [subTree, loading && _jsx(Progress, {\n          variant: 'ring',\n          placement: 'inline'\n        })]\n      })]\n    }) : _jsx(StyledStandardTreeLeaf, {\n      children: labelContent\n    })\n  });\n};\nconst StandardTreeWithNodes = forwardRef((_ref2, ref) => {\n  let {\n    nodes,\n    currentNodeId,\n    onNodeClick,\n    onNodeToggle,\n    lined = false,\n    selectableParents = true,\n    ...restProps\n  } = _ref2;\n  const [focusedNodeId, setFocusedNodedId] = useState();\n  const treeRef = useConsolidatedRef(ref);\n  const lastNodeId = useMemo(() => {\n    return helpers.getDeepestNode(nodes, nodes[nodes.length - 1].id)?.id;\n  }, [nodes]);\n  const changeFocusedNodeId = useCallback((id, type) => {\n    switch (type) {\n      case 'up':\n        {\n          const previousNode = helpers.getPreviousNode(nodes, id);\n          if (previousNode) setFocusedNodedId(previousNode.id);\n          break;\n        }\n      case 'down':\n        {\n          const nextNode = helpers.getNextNode(nodes, id);\n          if (nextNode) setFocusedNodedId(nextNode.id);\n          break;\n        }\n      case 'left':\n        {\n          const parentNode = helpers.getParentNode(nodes, id);\n          if (parentNode) setFocusedNodedId(parentNode.id);\n          break;\n        }\n      case 'right':\n        {\n          const childNode = helpers.getFirstChildNode(nodes, id);\n          if (childNode) setFocusedNodedId(childNode.id);\n          break;\n        }\n      default:\n        {\n          if (id !== focusedNodeId) setFocusedNodedId(id);\n          break;\n        }\n    }\n  }, [nodes]);\n  const onFocusChange = focused => {\n    if (!focused) setFocusedNodedId('');\n  };\n  useFocusWithin([treeRef], onFocusChange);\n  return _jsx(StandardTreeContext.Provider, {\n    value: useMemo(() => ({\n      currentNodeId,\n      focusedNodeId,\n      lastNodeId,\n      firstNodeId: nodes[0].id,\n      changeFocusedNodeId,\n      onNodeClick,\n      onNodeToggle,\n      lined,\n      selectableParents\n    }), [currentNodeId, onNodeClick, lined, focusedNodeId, lastNodeId, onNodeToggle, selectableParents]),\n    children: _jsx(StyledStandardTree, {\n      ...restProps,\n      ref: treeRef,\n      nodes: nodes,\n      nodeRenderer: NodeRenderer\n    })\n  });\n});\nconst StandardTree = forwardRef((props, ref) => {\n  return props.nodes.length > 0 ? _jsx(StandardTreeWithNodes, {\n    ...props,\n    ref: ref\n  }) : null;\n});\nexport default StandardTree;","map":{"version":3,"names":["forwardRef","createContext","useMemo","useContext","useCallback","useState","useEffect","useRef","Progress","useConsolidatedRef","useDirection","useFocusWithin","Flex","Actions","cap","Button","StyledStandardTreeParent","StyledToggleIcon","StyledToggleIconWrapper","StyledStandardTreeItemSubTree","StyledStandardTreeLeaf","StyledStandardTree","StyledNodeInteraction","StyledStandardTreeNode","StyledNodeActions","StyledLabelContent","StyledNodeIcon","StyledNodeText","helpers","StandardTreeContext","currentNodeId","undefined","lined","onNodeClick","onNodeToggle","firstNodeId","lastNodeId","focusedNodeId","changeFocusedNodeId","selectableParents","NodeRenderer","_ref","id","label","icon","depth","hasParentSibling","nodes","expanded","loading","subTree","actions","onClick","href","current","focusedEl","firstNode","start","end","ariaCurrent","tabIndex","index","getNode","handleParentClick","e","handleParentToggle","preventDefault","stopPropagation","onKeyDown","includes","key","actionsJSX","_jsx","children","items","map","action","actionId","menuAt","menuButtonProps","elRef","focus","labelContent","internal","_jsxs","container","alignItems","gap","as","name","justify","forwardedAs","role","ref","style","_Fragment","variant","compact","placement","StandardTreeWithNodes","_ref2","restProps","setFocusedNodedId","treeRef","getDeepestNode","length","type","previousNode","getPreviousNode","nextNode","getNextNode","parentNode","getParentNode","childNode","getFirstChildNode","onFocusChange","focused","Provider","value","nodeRenderer","StandardTree","props"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/components/Tree/StandardTree.tsx"],"sourcesContent":["import {\n  forwardRef,\n  createContext,\n  useMemo,\n  useContext,\n  useCallback,\n  useState,\n  KeyboardEvent,\n  useEffect,\n  useRef\n} from 'react';\nimport type { FunctionComponent, PropsWithoutRef, CSSProperties, MouseEvent } from 'react';\n\nimport Progress from '../Progress';\nimport { useConsolidatedRef, useDirection, useFocusWithin } from '../../hooks';\nimport Flex from '../Flex';\nimport Actions from '../Actions';\nimport type { Action, ForwardProps } from '../../types';\nimport { cap } from '../../utils';\nimport Button from '../Button';\n\nimport {\n  StyledStandardTreeParent,\n  StyledToggleIcon,\n  StyledToggleIconWrapper,\n  StyledStandardTreeItemSubTree,\n  StyledStandardTreeLeaf,\n  StyledStandardTree,\n  StyledNodeInteraction,\n  StyledStandardTreeNode,\n  StyledNodeActions,\n  StyledLabelContent,\n  StyledNodeIcon,\n  StyledNodeText\n} from './StandardTree.styles';\nimport type { TreeProps } from './Tree';\nimport type {\n  StandardTreeContextProps,\n  StandardTreeNode,\n  StandardTreeProps,\n  StandardTreePropsWithDefaults\n} from './StandardTree.types';\nimport helpers from './helpers';\n\nconst StandardTreeContext = createContext<\n  Pick<\n    StandardTreePropsWithDefaults,\n    | 'currentNodeId'\n    | 'lined'\n    | 'onNodeClick'\n    | 'onNodeToggle'\n    | 'firstNodeId'\n    | 'lastNodeId'\n    | 'focusedNodeId'\n    | 'changeFocusedNodeId'\n    | 'selectableParents'\n  >\n>({\n  currentNodeId: undefined,\n  lined: false,\n  onNodeClick: () => {},\n  onNodeToggle: () => {},\n  firstNodeId: undefined,\n  lastNodeId: undefined,\n  focusedNodeId: undefined,\n  changeFocusedNodeId: () => {},\n  selectableParents: true\n});\n\nconst NodeRenderer: TreeProps<StandardTreeNode>['nodeRenderer'] = ({\n  id,\n  label,\n  icon,\n  depth,\n  hasParentSibling,\n  nodes,\n  expanded = false,\n  loading = false,\n  subTree,\n  actions,\n  onClick,\n  href\n}) => {\n  const {\n    currentNodeId,\n    onNodeClick,\n    onNodeToggle,\n    lined,\n    focusedNodeId,\n    changeFocusedNodeId,\n    firstNodeId,\n    lastNodeId,\n    selectableParents\n  } = useContext(StandardTreeContext);\n  const current = currentNodeId === id;\n  const focusedEl = focusedNodeId === id;\n  const firstNode = firstNodeId === id;\n  const { start, end } = useDirection();\n\n  const ariaCurrent = useMemo(() => {\n    return href ? 'page' : 'true';\n  }, [href]);\n\n  const tabIndex = useMemo(() => {\n    let index = -1;\n    if (focusedNodeId) {\n      index = focusedEl ? 0 : -1;\n    } else if (currentNodeId && nodes && helpers.getNode(nodes, currentNodeId)) {\n      index = current ? 0 : -1;\n    } else {\n      index = firstNode ? 0 : -1;\n    }\n    return index;\n  }, [focusedNodeId, currentNodeId, current, focusedEl]);\n\n  const handleParentClick = useCallback(\n    (e: MouseEvent<HTMLElement> | KeyboardEvent<HTMLElement>) => {\n      onNodeClick?.(id, e);\n      changeFocusedNodeId(id);\n    },\n    [id, onNodeClick, changeFocusedNodeId]\n  );\n\n  const handleParentToggle = useCallback(\n    (e: MouseEvent<HTMLElement> | KeyboardEvent<HTMLElement>) => {\n      e.preventDefault();\n      e.stopPropagation();\n      onNodeToggle?.(id, e);\n      changeFocusedNodeId(id);\n    },\n    [id, onNodeToggle, changeFocusedNodeId]\n  );\n\n  const onKeyDown = useCallback(\n    (e: KeyboardEvent<HTMLElement>) => {\n      if (['ArrowUp', 'ArrowDown', 'Home', 'End'].includes(e.key)) e.preventDefault();\n      if (e.key === 'Enter' && !href) e.preventDefault();\n      switch (e.key) {\n        case 'ArrowUp':\n          changeFocusedNodeId(id, 'up');\n          break;\n        case 'ArrowDown':\n          changeFocusedNodeId(id, 'down');\n          break;\n        case `Arrow${cap(end)}`:\n          if (nodes) {\n            if (expanded) {\n              changeFocusedNodeId(id, 'right');\n            } else {\n              onNodeToggle?.(id);\n            }\n          }\n          break;\n        case `Arrow${cap(start)}`:\n          if (expanded) {\n            onNodeToggle?.(id);\n          } else {\n            changeFocusedNodeId(id, 'left');\n          }\n          break;\n        case 'Enter':\n          onClick?.(id, e);\n          if (nodes) {\n            if (selectableParents) {\n              handleParentClick(e);\n            } else {\n              handleParentToggle(e);\n            }\n          } else {\n            onNodeClick?.(id, e);\n            changeFocusedNodeId(id);\n          }\n          break;\n        case 'Home':\n          if (firstNodeId) changeFocusedNodeId(firstNodeId);\n          break;\n        case 'End':\n          if (lastNodeId) changeFocusedNodeId(lastNodeId);\n          break;\n        default:\n      }\n    },\n    [id, end, nodes, expanded, actions, firstNodeId, lastNodeId, changeFocusedNodeId]\n  );\n\n  const actionsJSX = useMemo(() => {\n    // since Actions may render a frag of buttons and we need a wrapper for flex space-between.\n    return actions ? (\n      <StyledNodeActions>\n        <Actions\n          items={actions.map(action => {\n            return {\n              ...action,\n              onClick: (\n                actionId: Action['id'],\n                e: MouseEvent<HTMLButtonElement | HTMLAnchorElement | HTMLInputElement>\n              ) => {\n                e.stopPropagation();\n                e.preventDefault();\n                action?.onClick?.(actionId, e);\n              },\n              onKeyDown: (e: KeyboardEvent) => {\n                if (e.key === 'Enter') e.stopPropagation();\n              }\n            };\n          })}\n          menuAt={3}\n          menuButtonProps={{\n            onClick: (e: MouseEvent) => {\n              e.stopPropagation();\n              e.preventDefault();\n            },\n            onKeyDown: (e: KeyboardEvent) => {\n              e.stopPropagation();\n              if (['ArrowUp', 'ArrowDown'].includes(e.key)) {\n                e.preventDefault();\n              }\n            }\n          }}\n        />\n      </StyledNodeActions>\n    ) : null;\n  }, [actions]);\n\n  const elRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (focusedEl) {\n      elRef?.current?.focus();\n    }\n  }, [focusedEl]);\n\n  const labelContent = useMemo(() => {\n    const internal = (\n      // Wrapping in a div for handling of flex space-between when there are node actions.\n      <Flex container={{ alignItems: 'center', gap: 0.5 }} as={StyledLabelContent}>\n        {icon && <StyledNodeIcon name={icon} />}\n        <StyledNodeText>{label}</StyledNodeText>\n      </Flex>\n    );\n\n    return !nodes && (onClick ?? onNodeClick) ? (\n      <Flex\n        container={{ alignItems: 'center', justify: 'between', gap: 2 }}\n        as={StyledNodeInteraction}\n        forwardedAs={href ? 'a' : 'div'}\n        role='treeitem'\n        aria-current={current ? ariaCurrent : undefined}\n        tabIndex={tabIndex}\n        onClick={(e: MouseEvent<HTMLElement>) => {\n          onClick?.(id, e);\n          onNodeClick?.(id, e);\n          changeFocusedNodeId(id);\n        }}\n        href={href}\n        onKeyDown={onKeyDown}\n        ref={elRef}\n      >\n        {internal}\n        {actionsJSX}\n      </Flex>\n    ) : (\n      internal\n    );\n  }, [\n    id,\n    label,\n    icon,\n    nodes,\n    actions,\n    onClick,\n    onNodeClick,\n    current,\n    focusedEl,\n    tabIndex,\n    changeFocusedNodeId,\n    onKeyDown\n  ]);\n\n  return (\n    <StyledStandardTreeNode\n      id={id}\n      style={\n        {\n          '--depth': depth,\n          '--has-parent': depth ? 1 : 0,\n          '--has-parent-sibling': hasParentSibling ? 1 : 0\n        } as CSSProperties\n      }\n      aria-busy={loading}\n    >\n      {nodes ? (\n        <>\n          <Flex\n            container={{ alignItems: 'center', justify: 'between', gap: 2 }}\n            as={StyledStandardTreeParent}\n            forwardedAs={href ? 'a' : 'div'}\n            role='treeitem'\n            aria-current={current ? ariaCurrent : undefined}\n            tabIndex={tabIndex}\n            variant='text'\n            onClick={selectableParents ? handleParentClick : handleParentToggle}\n            href={selectableParents ? href : undefined}\n            aria-expanded={expanded ? 'true' : 'false'}\n            aria-owns={`${id}-subtree`}\n            aria-label={label}\n            onKeyDown={onKeyDown}\n            ref={elRef}\n          >\n            <Flex container={{ alignItems: 'center' }} as='span'>\n              {selectableParents ? (\n                <Button variant='simple' tabIndex={-1} icon compact onClick={handleParentToggle}>\n                  <StyledToggleIcon name='caret-right' />\n                </Button>\n              ) : (\n                <Flex\n                  as={StyledToggleIconWrapper}\n                  container={{ justify: 'center', alignItems: 'center' }}\n                >\n                  <StyledToggleIcon name='caret-right' />\n                </Flex>\n              )}\n              {labelContent}\n            </Flex>\n            {actionsJSX}\n          </Flex>\n          <StyledStandardTreeItemSubTree lined={lined} id={`${id}-subtree`}>\n            {subTree}\n            {loading && <Progress variant='ring' placement='inline' />}\n          </StyledStandardTreeItemSubTree>\n        </>\n      ) : (\n        <StyledStandardTreeLeaf>{labelContent}</StyledStandardTreeLeaf>\n      )}\n    </StyledStandardTreeNode>\n  );\n};\n\nconst StandardTreeWithNodes: FunctionComponent<StandardTreeProps & ForwardProps> = forwardRef(\n  (\n    {\n      nodes,\n      currentNodeId,\n      onNodeClick,\n      onNodeToggle,\n      lined = false,\n      selectableParents = true,\n      ...restProps\n    }: PropsWithoutRef<StandardTreeProps>,\n    ref: StandardTreeProps['ref']\n  ) => {\n    const [focusedNodeId, setFocusedNodedId] = useState<string | undefined>();\n    const treeRef = useConsolidatedRef(ref);\n\n    const lastNodeId = useMemo(() => {\n      return helpers.getDeepestNode(nodes, nodes[nodes.length - 1].id)?.id;\n    }, [nodes]);\n\n    const changeFocusedNodeId: StandardTreeContextProps['changeFocusedNodeId'] = useCallback(\n      (id, type) => {\n        switch (type) {\n          case 'up': {\n            const previousNode = helpers.getPreviousNode(nodes, id);\n            if (previousNode) setFocusedNodedId(previousNode.id);\n            break;\n          }\n          case 'down': {\n            const nextNode = helpers.getNextNode(nodes, id);\n            if (nextNode) setFocusedNodedId(nextNode.id);\n            break;\n          }\n          case 'left': {\n            const parentNode = helpers.getParentNode(nodes, id);\n            if (parentNode) setFocusedNodedId(parentNode.id);\n            break;\n          }\n          case 'right': {\n            const childNode = helpers.getFirstChildNode(nodes, id);\n            if (childNode) setFocusedNodedId(childNode.id);\n            break;\n          }\n          default: {\n            if (id !== focusedNodeId) setFocusedNodedId(id);\n            break;\n          }\n        }\n      },\n      [nodes]\n    );\n\n    const onFocusChange = (focused: boolean) => {\n      if (!focused) setFocusedNodedId('');\n    };\n\n    useFocusWithin([treeRef], onFocusChange);\n\n    return (\n      <StandardTreeContext.Provider\n        value={useMemo(\n          () => ({\n            currentNodeId,\n            focusedNodeId,\n            lastNodeId,\n            firstNodeId: nodes[0].id,\n            changeFocusedNodeId,\n            onNodeClick,\n            onNodeToggle,\n            lined,\n            selectableParents\n          }),\n          [\n            currentNodeId,\n            onNodeClick,\n            lined,\n            focusedNodeId,\n            lastNodeId,\n            onNodeToggle,\n            selectableParents\n          ]\n        )}\n      >\n        {/* FIXME: Types are having issues when styled(Tree) is typeof Tree. */}\n        <StyledStandardTree\n          {...restProps}\n          ref={treeRef}\n          nodes={nodes}\n          nodeRenderer={NodeRenderer}\n        />\n      </StandardTreeContext.Provider>\n    );\n  }\n);\n\nconst StandardTree: FunctionComponent<StandardTreeProps & ForwardProps> = forwardRef(\n  (props: PropsWithoutRef<StandardTreeProps>, ref: StandardTreeProps['ref']) => {\n    return props.nodes.length > 0 ? <StandardTreeWithNodes {...props} ref={ref} /> : null;\n  }\n);\n\nexport default StandardTree;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}