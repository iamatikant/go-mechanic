{"ast":null,"code":"import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { remToPx, stripUnit } from 'polished';\nimport { useEffect, useState } from 'react';\nimport styled, { css } from 'styled-components';\nimport { useElement, useTheme } from '../../hooks';\nimport { calculateFontSize } from '../../styles';\nimport { defaultThemeProp } from '../../theme';\nimport { tryCatch } from '../../utils';\nimport Flex from '../Flex';\nimport Text from '../Text';\nimport Tooltip from '../Tooltip';\nimport { CurrentStepPopover, StepMarker, StyledBar, StyledFill } from './FormProgress.styles';\nexport const StyledFormProgress = styled(Flex)(_ref => {\n  let {\n    theme\n  } = _ref;\n  const {\n    base: {\n      spacing,\n      'font-size': fontSize,\n      'font-scale': fontScale\n    },\n    components: {\n      text: {\n        h4: {\n          'font-size': h4fontSize\n        }\n      }\n    }\n  } = theme;\n  const fontSizes = calculateFontSize(fontSize, fontScale);\n  return css`\n    position: relative;\n    margin-block-start: calc(-1.5 * ${spacing});\n    padding-block-start: calc(${spacing} + ${fontSizes[h4fontSize]} * 1.35);\n  `;\n});\nStyledFormProgress.defaultProps = defaultThemeProp;\nconst HorizontalFormProgress = _ref2 => {\n  let {\n    steps,\n    currentStepId,\n    ...restProps\n  } = _ref2;\n  const curIdx = steps.findIndex(step => step.id === currentStepId);\n  const curStep = steps[curIdx];\n  const fillScale = curIdx / (steps.length - 1);\n  const [currentStepEl, setCurrentStepEl] = useElement();\n  const [stepEls, setStepEls] = useState({});\n  const theme = useTheme();\n  let popoverPlacement = 'top';\n  if (curIdx === 0) popoverPlacement = 'top-start';else if (curIdx === steps.length - 1) popoverPlacement = 'top-end';\n  useEffect(() => {\n    setCurrentStepEl(stepEls[curStep.id]);\n  }, [Object.keys(stepEls), curStep]);\n  return _jsxs(StyledFormProgress, {\n    ...restProps,\n    container: {\n      alignItems: 'center'\n    },\n    role: 'progressbar',\n    \"aria-valuenow\": curIdx,\n    \"aria-valuemin\": 0,\n    \"aria-valuetext\": curStep.name,\n    \"aria-valuemax\": steps.length,\n    children: [_jsx(CurrentStepPopover, {\n      show: true,\n      target: currentStepEl,\n      placement: popoverPlacement,\n      strategy: 'absolute',\n      hideOnTargetHidden: true,\n      modifiers: [{\n        name: 'offset',\n        options: {\n          offset: [0, tryCatch(() => stripUnit(remToPx(theme.base.spacing)), () => 8)]\n        }\n      }, {\n        name: 'placeAndContain',\n        enabled: false\n      }, {\n        name: 'flip',\n        enabled: false\n      }, {\n        name: 'preventOverflow',\n        options: {\n          padding: 0\n        }\n      }],\n      children: _jsx(Text, {\n        variant: 'h4',\n        children: curStep.name\n      })\n    }), _jsx(Flex, {\n      container: {\n        justify: 'between',\n        alignItems: 'center'\n      },\n      item: {\n        grow: 1\n      },\n      children: steps.map((step, index) => {\n        return _jsx(StepMarker, {\n          ref: el => {\n            setStepEls(curr => {\n              const newEls = {\n                ...curr\n              };\n              if (!el && newEls[step.id]) {\n                delete newEls[step.id];\n                return newEls;\n              }\n              if (el) return {\n                ...newEls,\n                [step.id]: el\n              };\n              return newEls;\n            });\n          },\n          \"aria-label\": step.name,\n          \"aria-describedby\": step.id,\n          current: index === curIdx,\n          depth: step.depth,\n          prior: index < curIdx,\n          onClick: step.onMarkerClick,\n          children: index !== curIdx && _jsx(Tooltip, {\n            target: stepEls[step.id],\n            showDelay: 'none',\n            hideDelay: 'short',\n            portal: false,\n            children: step.name\n          })\n        }, step.id);\n      })\n    }), _jsx(StyledBar, {\n      children: _jsx(StyledFill, {\n        style: {\n          '--fillScale': fillScale\n        }\n      })\n    })]\n  });\n};\nexport default HorizontalFormProgress;","map":{"version":3,"names":["remToPx","stripUnit","useEffect","useState","styled","css","useElement","useTheme","calculateFontSize","defaultThemeProp","tryCatch","Flex","Text","Tooltip","CurrentStepPopover","StepMarker","StyledBar","StyledFill","StyledFormProgress","_ref","theme","base","spacing","fontSize","fontScale","components","text","h4","h4fontSize","fontSizes","defaultProps","HorizontalFormProgress","_ref2","steps","currentStepId","restProps","curIdx","findIndex","step","id","curStep","fillScale","length","currentStepEl","setCurrentStepEl","stepEls","setStepEls","popoverPlacement","Object","keys","_jsxs","container","alignItems","role","name","children","_jsx","show","target","placement","strategy","hideOnTargetHidden","modifiers","options","offset","enabled","padding","variant","justify","item","grow","map","index","ref","el","curr","newEls","current","depth","prior","onClick","onMarkerClick","showDelay","hideDelay","portal","style"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/components/MultiStepForm/HorizontalFormProgress.tsx"],"sourcesContent":["import { remToPx, stripUnit } from 'polished';\nimport { FunctionComponent, CSSProperties, useEffect, useState } from 'react';\nimport styled, { css } from 'styled-components';\n\nimport { useElement, useTheme } from '../../hooks';\nimport { calculateFontSize, FontSize } from '../../styles';\nimport { defaultThemeProp } from '../../theme';\nimport { ForwardProps } from '../../types';\nimport { tryCatch } from '../../utils';\nimport Flex from '../Flex';\nimport Text from '../Text';\nimport Tooltip from '../Tooltip';\n\nimport { CurrentStepPopover, StepMarker, StyledBar, StyledFill } from './FormProgress.styles';\nimport type MultiStepFormProps from './MultiStepForm.types';\n\ninterface FormProgressProps {\n  steps: MultiStepFormProps['steps'];\n  currentStepId: MultiStepFormProps['currentStepId'];\n}\n\nexport const StyledFormProgress = styled(Flex)(({ theme }) => {\n  const {\n    base: { spacing, 'font-size': fontSize, 'font-scale': fontScale },\n    components: {\n      text: {\n        h4: { 'font-size': h4fontSize }\n      }\n    }\n  } = theme;\n  const fontSizes = calculateFontSize(fontSize, fontScale);\n\n  return css`\n    position: relative;\n    margin-block-start: calc(-1.5 * ${spacing});\n    padding-block-start: calc(${spacing} + ${fontSizes[h4fontSize as FontSize]} * 1.35);\n  `;\n});\n\nStyledFormProgress.defaultProps = defaultThemeProp;\n\nconst HorizontalFormProgress: FunctionComponent<FormProgressProps & ForwardProps> = ({\n  steps,\n  currentStepId,\n  ...restProps\n}) => {\n  const curIdx = steps.findIndex(step => step.id === currentStepId);\n  const curStep = steps[curIdx];\n  const fillScale = curIdx / (steps.length - 1);\n\n  const [currentStepEl, setCurrentStepEl] = useElement();\n  const [stepEls, setStepEls] = useState<Record<string, HTMLElement>>({});\n  const theme = useTheme();\n\n  let popoverPlacement: 'top' | 'top-start' | 'top-end' = 'top';\n  if (curIdx === 0) popoverPlacement = 'top-start';\n  else if (curIdx === steps.length - 1) popoverPlacement = 'top-end';\n\n  useEffect(() => {\n    setCurrentStepEl(stepEls[curStep.id]);\n  }, [Object.keys(stepEls), curStep]);\n\n  return (\n    <StyledFormProgress\n      {...restProps}\n      container={{ alignItems: 'center' }}\n      role='progressbar'\n      aria-valuenow={curIdx}\n      aria-valuemin={0}\n      aria-valuetext={curStep.name}\n      aria-valuemax={steps.length}\n    >\n      <CurrentStepPopover\n        show\n        target={currentStepEl}\n        placement={popoverPlacement}\n        strategy='absolute'\n        hideOnTargetHidden\n        modifiers={[\n          {\n            name: 'offset',\n            options: {\n              offset: [\n                0,\n                tryCatch(\n                  () => stripUnit(remToPx(theme.base.spacing)),\n                  () => 8\n                )\n              ]\n            }\n          },\n          {\n            name: 'placeAndContain',\n            enabled: false\n          },\n          {\n            name: 'flip',\n            enabled: false\n          },\n          {\n            name: 'preventOverflow',\n            options: {\n              padding: 0\n            }\n          }\n        ]}\n      >\n        <Text variant='h4'>{curStep.name}</Text>\n      </CurrentStepPopover>\n      <Flex container={{ justify: 'between', alignItems: 'center' }} item={{ grow: 1 }}>\n        {steps.map((step, index) => {\n          return (\n            <StepMarker\n              key={step.id}\n              ref={(el: HTMLElement | null) => {\n                setStepEls(curr => {\n                  const newEls = { ...curr };\n                  if (!el && newEls[step.id]) {\n                    delete newEls[step.id];\n                    return newEls;\n                  }\n                  if (el) return { ...newEls, [step.id]: el };\n                  return newEls;\n                });\n              }}\n              aria-label={step.name}\n              aria-describedby={step.id}\n              current={index === curIdx}\n              depth={step.depth}\n              prior={index < curIdx}\n              onClick={step.onMarkerClick}\n            >\n              {index !== curIdx && (\n                <Tooltip\n                  target={stepEls[step.id]}\n                  showDelay='none'\n                  hideDelay='short'\n                  portal={false}\n                >\n                  {step.name}\n                </Tooltip>\n              )}\n            </StepMarker>\n          );\n        })}\n      </Flex>\n\n      <StyledBar>\n        <StyledFill style={{ '--fillScale': fillScale } as CSSProperties} />\n      </StyledBar>\n    </StyledFormProgress>\n  );\n};\n\nexport default HorizontalFormProgress;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}