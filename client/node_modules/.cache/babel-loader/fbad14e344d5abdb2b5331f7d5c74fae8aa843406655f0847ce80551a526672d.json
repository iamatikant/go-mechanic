{"ast":null,"code":"import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useCallback, useEffect, useMemo, useRef } from 'react';\nimport styled, { css } from 'styled-components';\nimport { mix } from 'polished';\nimport { defaultThemeProp } from '../../../theme';\nimport Button from '../../Button';\nimport { useArrows, useConfiguration, useElement } from '../../../hooks';\nimport { is12HClockFormat } from '../Input/utils';\nimport { tryCatch } from '../../../utils';\nimport { getIntervalGenerator } from './utils';\nconst StyledTimePicker = styled.ul`\n  list-style: none;\n  max-height: 10rem;\n  overflow: auto;\n  width: 100%;\n`;\nStyledTimePicker.defaultProps = defaultThemeProp;\nconst StyledTimeButton = styled.button(_ref => {\n  let {\n    theme: {\n      base,\n      components\n    },\n    selected\n  } = _ref;\n  const activeColor = tryCatch(() => mix(0.85, base.palette['primary-background'], base.palette.interactive));\n  return css`\n      color: ${base.palette['foreground-color']};\n      width: 100%;\n      border-radius: inherit;\n      overflow: hidden;\n      text-align: start;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      border-width: 0;\n      justify-content: start;\n      padding: 0;\n      background-color: ${selected ? activeColor : 'transparent'};\n\n      > span {\n        margin-inline-end: 0.125rem;\n        &:first-child {\n          margin-inline-start: ${components['form-control']['border-width']};\n        }\n        &:nth-child(2) {\n          margin-inline-start: 0.125rem;\n        }\n        &:first-child,\n        &:nth-child(3) {\n          padding-inline-start: 0.5rem;\n        }\n      }\n\n      &:enabled:focus,\n      &:not([disabled]):focus {\n        box-shadow: ${base.shadow['focus-inset']};\n      }\n    `;\n});\nStyledTimeButton.defaultProps = defaultThemeProp;\nconst StyledTimeItem = styled.li`\n  border-radius: 0;\n`;\nStyledTimeItem.defaultProps = defaultThemeProp;\nconst TimePicker = props => {\n  const {\n    locale\n  } = useConfiguration();\n  const {\n    selected = new Date(0),\n    interval = 30,\n    clockFormat,\n    onSelect,\n    ...restProps\n  } = props;\n  const intervalInMS = interval * 60000;\n  const {\n    hourCycle: defaultHourCycle\n  } = useMemo(() => new Intl.DateTimeFormat(locale, {\n    hour: '2-digit',\n    hour12: clockFormat ? clockFormat === 12 : is12HClockFormat(locale)\n  }).resolvedOptions(), [clockFormat, locale]);\n  const actionsList = Array.from(getIntervalGenerator(intervalInMS), time => {\n    const date = new Date(selected);\n    date.setUTCHours(time.getUTCHours(), time.getUTCMinutes());\n    return {\n      id: date.getTime().toString(),\n      text: Intl.DateTimeFormat(locale, {\n        hour: '2-digit',\n        minute: '2-digit',\n        timeZone: 'UTC',\n        /** Use this to fix Chrome https://bugs.chromium.org/p/chromium/issues/detail?id=1045791 */\n        hourCycle: defaultHourCycle === 'h24' ? 'h23' : defaultHourCycle\n      }).format(date)\n    };\n  });\n  const isSelected = date => {\n    return selected?.getUTCHours() === date.getUTCHours() && selected?.getUTCMinutes() === date.getUTCMinutes();\n  };\n  const [buttonEl, setButtonEl] = useElement();\n  const menuRef = useRef(null);\n  useArrows(menuRef, {\n    selector: 'button',\n    cycle: true,\n    dir: 'up-down',\n    allowTabFocus: false\n  });\n  const renderTime = text => {\n    const [hour, minute, meridiem] = text.split(/:| /);\n    return _jsxs(_Fragment, {\n      children: [_jsx(\"span\", {\n        children: hour\n      }), \":\", _jsx(\"span\", {\n        children: minute\n      }), meridiem && _jsx(\"span\", {\n        children: meridiem\n      })]\n    });\n  };\n  const setTabIndexes = useCallback(() => {\n    const focusEl = menuRef.current;\n    if (!focusEl) return;\n    const focusableElements = Array.from(focusEl.querySelectorAll('button'));\n    if (focusableElements.length > 0) {\n      let isChecked = false;\n      focusableElements.slice(1).forEach(item => {\n        const checked = item.checked;\n        if (checked) {\n          isChecked = true;\n          item.tabIndex = 0;\n        } else item.tabIndex = -1;\n      });\n      if (!isChecked) {\n        focusableElements[0].tabIndex = 0;\n        focusableElements[0].focus();\n      }\n    }\n  }, [selected]);\n  useEffect(() => {\n    buttonEl?.focus();\n    setTabIndexes();\n  }, [buttonEl]);\n  return _jsx(StyledTimePicker, {\n    role: 'menu',\n    tabIndex: -1,\n    ref: menuRef,\n    ...restProps,\n    children: actionsList.map(_ref2 => {\n      let {\n        text,\n        id\n      } = _ref2;\n      const item = new Date(Number(id));\n      return _jsx(StyledTimeItem, {\n        role: 'presentation',\n        children: _jsx(StyledTimeButton, {\n          role: 'menuitem',\n          as: Button,\n          variant: 'simple',\n          ref: isSelected(item) ? setButtonEl : null,\n          \"aria-label\": text,\n          selected: isSelected(item),\n          \"aria-current\": isSelected(item) ? 'time' : undefined,\n          checked: isSelected(item),\n          onClick: () => {\n            onSelect?.(item);\n          },\n          tabIndex: '-1',\n          children: renderTime(text)\n        })\n      }, id);\n    })\n  });\n};\nexport default TimePicker;","map":{"version":3,"names":["useCallback","useEffect","useMemo","useRef","styled","css","mix","defaultThemeProp","Button","useArrows","useConfiguration","useElement","is12HClockFormat","tryCatch","getIntervalGenerator","StyledTimePicker","ul","defaultProps","StyledTimeButton","button","_ref","theme","base","components","selected","activeColor","palette","interactive","shadow","StyledTimeItem","li","TimePicker","props","locale","Date","interval","clockFormat","onSelect","restProps","intervalInMS","hourCycle","defaultHourCycle","Intl","DateTimeFormat","hour","hour12","resolvedOptions","actionsList","Array","from","time","date","setUTCHours","getUTCHours","getUTCMinutes","id","getTime","toString","text","minute","timeZone","format","isSelected","buttonEl","setButtonEl","menuRef","selector","cycle","dir","allowTabFocus","renderTime","meridiem","split","_jsxs","_Fragment","children","_jsx","setTabIndexes","focusEl","current","focusableElements","querySelectorAll","length","isChecked","slice","forEach","item","checked","tabIndex","focus","role","ref","map","_ref2","Number","as","variant","undefined","onClick"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/components/DateTime/Picker/TimePicker.tsx"],"sourcesContent":["import { FunctionComponent, useCallback, useEffect, useMemo, useRef } from 'react';\nimport styled, { css } from 'styled-components';\nimport { mix } from 'polished';\n\nimport { defaultThemeProp } from '../../../theme';\nimport { BaseProps, Action, ForwardProps } from '../../../types';\nimport Button from '../../Button';\nimport { useArrows, useConfiguration, useElement } from '../../../hooks';\nimport { ClockFormat, is12HClockFormat } from '../Input/utils';\nimport { tryCatch } from '../../../utils';\n\nimport { getIntervalGenerator } from './utils';\nimport type { MinuteInterval } from './DatePicker.types';\n\nexport interface TimePickerProps extends BaseProps {\n  /**\n   * Defines default time that will be selected when the Time Picker is opened.\n   * @default new Date()\n   */\n  selected?: Date;\n  /** Callback fired when selected value changes. */\n  onSelect: (date: Date) => void;\n  /**\n   * Defines interval for time picker options (in minutes).\n   * @default 30\n   */\n  interval?: MinuteInterval;\n  /** Defines clock format that overrides locale based format */\n  clockFormat?: ClockFormat;\n}\n\nconst StyledTimePicker = styled.ul`\n  list-style: none;\n  max-height: 10rem;\n  overflow: auto;\n  width: 100%;\n`;\n\nStyledTimePicker.defaultProps = defaultThemeProp;\n\nconst StyledTimeButton = styled.button<TimePickerProps>(\n  ({ theme: { base, components }, selected }) => {\n    const activeColor = tryCatch(() =>\n      mix(0.85, base.palette['primary-background'], base.palette.interactive)\n    );\n\n    return css`\n      color: ${base.palette['foreground-color']};\n      width: 100%;\n      border-radius: inherit;\n      overflow: hidden;\n      text-align: start;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      border-width: 0;\n      justify-content: start;\n      padding: 0;\n      background-color: ${selected ? activeColor : 'transparent'};\n\n      > span {\n        margin-inline-end: 0.125rem;\n        &:first-child {\n          margin-inline-start: ${components['form-control']['border-width']};\n        }\n        &:nth-child(2) {\n          margin-inline-start: 0.125rem;\n        }\n        &:first-child,\n        &:nth-child(3) {\n          padding-inline-start: 0.5rem;\n        }\n      }\n\n      &:enabled:focus,\n      &:not([disabled]):focus {\n        box-shadow: ${base.shadow['focus-inset']};\n      }\n    `;\n  }\n);\n\nStyledTimeButton.defaultProps = defaultThemeProp;\n\nconst StyledTimeItem = styled.li`\n  border-radius: 0;\n`;\n\nStyledTimeItem.defaultProps = defaultThemeProp;\n\nconst TimePicker: FunctionComponent<TimePickerProps & ForwardProps> = (props: TimePickerProps) => {\n  const { locale } = useConfiguration();\n  const { selected = new Date(0), interval = 30, clockFormat, onSelect, ...restProps } = props;\n\n  const intervalInMS = interval * 60000;\n\n  const { hourCycle: defaultHourCycle } = useMemo(\n    () =>\n      new Intl.DateTimeFormat(locale, {\n        hour: '2-digit',\n        hour12: clockFormat ? clockFormat === 12 : is12HClockFormat(locale)\n      }).resolvedOptions(),\n    [clockFormat, locale]\n  );\n\n  const actionsList = Array.from(getIntervalGenerator(intervalInMS), time => {\n    const date = new Date(selected);\n    date.setUTCHours(time.getUTCHours(), time.getUTCMinutes());\n    return {\n      id: date.getTime().toString(),\n      text: Intl.DateTimeFormat(locale, {\n        hour: '2-digit',\n        minute: '2-digit',\n        timeZone: 'UTC',\n        /** Use this to fix Chrome https://bugs.chromium.org/p/chromium/issues/detail?id=1045791 */\n        hourCycle: defaultHourCycle === 'h24' ? 'h23' : defaultHourCycle\n      }).format(date)\n    };\n  });\n\n  const isSelected = (date: Date) => {\n    return (\n      selected?.getUTCHours() === date.getUTCHours() &&\n      selected?.getUTCMinutes() === date.getUTCMinutes()\n    );\n  };\n\n  const [buttonEl, setButtonEl] = useElement<HTMLElement>();\n  const menuRef = useRef<HTMLUListElement>(null);\n\n  useArrows(menuRef, {\n    selector: 'button',\n    cycle: true,\n    dir: 'up-down',\n    allowTabFocus: false\n  });\n\n  const renderTime = (text: string) => {\n    const [hour, minute, meridiem] = text.split(/:| /);\n    return (\n      <>\n        <span>{hour}</span>:<span>{minute}</span>\n        {meridiem && <span>{meridiem}</span>}\n      </>\n    );\n  };\n\n  const setTabIndexes = useCallback(() => {\n    const focusEl = menuRef.current;\n    if (!focusEl) return;\n    const focusableElements = Array.from(focusEl.querySelectorAll('button'));\n\n    if (focusableElements.length > 0) {\n      let isChecked = false;\n      focusableElements.slice(1).forEach(item => {\n        const checked = (item as HTMLInputElement).checked;\n        if (checked) {\n          isChecked = true;\n          item.tabIndex = 0;\n        } else item.tabIndex = -1;\n      });\n\n      if (!isChecked) {\n        (focusableElements[0] as HTMLElement).tabIndex = 0;\n        focusableElements[0].focus();\n      }\n    }\n  }, [selected]);\n\n  useEffect(() => {\n    buttonEl?.focus();\n    setTabIndexes();\n  }, [buttonEl]);\n\n  return (\n    <StyledTimePicker role='menu' tabIndex={-1} ref={menuRef} {...restProps}>\n      {actionsList.map(({ text, id }: Action) => {\n        const item = new Date(Number(id));\n        return (\n          <StyledTimeItem role='presentation' key={id}>\n            <StyledTimeButton\n              role='menuitem'\n              as={Button}\n              variant='simple'\n              ref={isSelected(item) ? setButtonEl : null}\n              aria-label={text}\n              selected={isSelected(item)}\n              aria-current={isSelected(item) ? 'time' : undefined}\n              checked={isSelected(item)}\n              onClick={() => {\n                onSelect?.(item);\n              }}\n              tabIndex='-1'\n            >\n              {renderTime(text)}\n            </StyledTimeButton>\n          </StyledTimeItem>\n        );\n      })}\n    </StyledTimePicker>\n  );\n};\n\nexport default TimePicker;\n"],"mappings":";AAAA,SAA4BA,WAAW,EAAEC,SAAS,EAAEC,OAAO,EAAEC,MAAM,QAAQ,OAAO;AAClF,OAAOC,MAAM,IAAIC,GAAG,QAAQ,mBAAmB;AAC/C,SAASC,GAAG,QAAQ,UAAU;AAE9B,SAASC,gBAAgB,QAAQ,gBAAgB;AAEjD,OAAOC,MAAM,MAAM,cAAc;AACjC,SAASC,SAAS,EAAEC,gBAAgB,EAAEC,UAAU,QAAQ,gBAAgB;AACxE,SAAsBC,gBAAgB,QAAQ,gBAAgB;AAC9D,SAASC,QAAQ,QAAQ,gBAAgB;AAEzC,SAASC,oBAAoB,QAAQ,SAAS;AAoB9C,MAAMC,gBAAgB,GAAGX,MAAM,CAACY,EAAE;;;;;CAKjC;AAEDD,gBAAgB,CAACE,YAAY,GAAGV,gBAAgB;AAEhD,MAAMW,gBAAgB,GAAGd,MAAM,CAACe,MAAM,CACpCC,IAAA,IAA8C;EAAA,IAA7C;IAAEC,KAAK,EAAE;MAAEC,IAAI;MAAEC;IAAU,CAAE;IAAEC;EAAQ,CAAE,GAAAJ,IAAA;EACxC,MAAMK,WAAW,GAAGZ,QAAQ,CAAC,MAC3BP,GAAG,CAAC,IAAI,EAAEgB,IAAI,CAACI,OAAO,CAAC,oBAAoB,CAAC,EAAEJ,IAAI,CAACI,OAAO,CAACC,WAAW,CAAC,CACxE;EAED,OAAOtB,GAAG;eACCiB,IAAI,CAACI,OAAO,CAAC,kBAAkB,CAAC;;;;;;;;;;0BAUrBF,QAAQ,GAAGC,WAAW,GAAG,aAAa;;;;;iCAK/BF,UAAU,CAAC,cAAc,CAAC,CAAC,cAAc,CAAC;;;;;;;;;;;;;sBAarDD,IAAI,CAACM,MAAM,CAAC,aAAa,CAAC;;KAE3C;AACH,CAAC,CACF;AAEDV,gBAAgB,CAACD,YAAY,GAAGV,gBAAgB;AAEhD,MAAMsB,cAAc,GAAGzB,MAAM,CAAC0B,EAAE;;CAE/B;AAEDD,cAAc,CAACZ,YAAY,GAAGV,gBAAgB;AAE9C,MAAMwB,UAAU,GAAuDC,KAAsB,IAAI;EAC/F,MAAM;IAAEC;EAAM,CAAE,GAAGvB,gBAAgB,EAAE;EACrC,MAAM;IAAEc,QAAQ,GAAG,IAAIU,IAAI,CAAC,CAAC,CAAC;IAAEC,QAAQ,GAAG,EAAE;IAAEC,WAAW;IAAEC,QAAQ;IAAE,GAAGC;EAAS,CAAE,GAAGN,KAAK;EAE5F,MAAMO,YAAY,GAAGJ,QAAQ,GAAG,KAAK;EAErC,MAAM;IAAEK,SAAS,EAAEC;EAAgB,CAAE,GAAGvC,OAAO,CAC7C,MACE,IAAIwC,IAAI,CAACC,cAAc,CAACV,MAAM,EAAE;IAC9BW,IAAI,EAAE,SAAS;IACfC,MAAM,EAAET,WAAW,GAAGA,WAAW,KAAK,EAAE,GAAGxB,gBAAgB,CAACqB,MAAM;GACnE,CAAC,CAACa,eAAe,EAAE,EACtB,CAACV,WAAW,EAAEH,MAAM,CAAC,CACtB;EAED,MAAMc,WAAW,GAAGC,KAAK,CAACC,IAAI,CAACnC,oBAAoB,CAACyB,YAAY,CAAC,EAAEW,IAAI,IAAG;IACxE,MAAMC,IAAI,GAAG,IAAIjB,IAAI,CAACV,QAAQ,CAAC;IAC/B2B,IAAI,CAACC,WAAW,CAACF,IAAI,CAACG,WAAW,EAAE,EAAEH,IAAI,CAACI,aAAa,EAAE,CAAC;IAC1D,OAAO;MACLC,EAAE,EAAEJ,IAAI,CAACK,OAAO,EAAE,CAACC,QAAQ,EAAE;MAC7BC,IAAI,EAAEhB,IAAI,CAACC,cAAc,CAACV,MAAM,EAAE;QAChCW,IAAI,EAAE,SAAS;QACfe,MAAM,EAAE,SAAS;QACjBC,QAAQ,EAAE,KAAK;QACf;QACApB,SAAS,EAAEC,gBAAgB,KAAK,KAAK,GAAG,KAAK,GAAGA;OACjD,CAAC,CAACoB,MAAM,CAACV,IAAI;KACf;EACH,CAAC,CAAC;EAEF,MAAMW,UAAU,GAAIX,IAAU,IAAI;IAChC,OACE3B,QAAQ,EAAE6B,WAAW,EAAE,KAAKF,IAAI,CAACE,WAAW,EAAE,IAC9C7B,QAAQ,EAAE8B,aAAa,EAAE,KAAKH,IAAI,CAACG,aAAa,EAAE;EAEtD,CAAC;EAED,MAAM,CAACS,QAAQ,EAAEC,WAAW,CAAC,GAAGrD,UAAU,EAAe;EACzD,MAAMsD,OAAO,GAAG9D,MAAM,CAAmB,IAAI,CAAC;EAE9CM,SAAS,CAACwD,OAAO,EAAE;IACjBC,QAAQ,EAAE,QAAQ;IAClBC,KAAK,EAAE,IAAI;IACXC,GAAG,EAAE,SAAS;IACdC,aAAa,EAAE;GAChB,CAAC;EAEF,MAAMC,UAAU,GAAIZ,IAAY,IAAI;IAClC,MAAM,CAACd,IAAI,EAAEe,MAAM,EAAEY,QAAQ,CAAC,GAAGb,IAAI,CAACc,KAAK,CAAC,KAAK,CAAC;IAClD,OACEC,KAAA,CAAAC,SAAA;MAAAC,QAAA,GACEC,IAAA;QAAAD,QAAA,EAAO/B;MAAI,EAAQ,OAACgC,IAAA;QAAAD,QAAA,EAAOhB;MAAM,EAAQ,EACxCY,QAAQ,IAAIK,IAAA;QAAAD,QAAA,EAAOJ;MAAQ,EAAQ;IAAA,EACnC;EAEP,CAAC;EAED,MAAMM,aAAa,GAAG7E,WAAW,CAAC,MAAK;IACrC,MAAM8E,OAAO,GAAGb,OAAO,CAACc,OAAO;IAC/B,IAAI,CAACD,OAAO,EAAE;IACd,MAAME,iBAAiB,GAAGhC,KAAK,CAACC,IAAI,CAAC6B,OAAO,CAACG,gBAAgB,CAAC,QAAQ,CAAC,CAAC;IAExE,IAAID,iBAAiB,CAACE,MAAM,GAAG,CAAC,EAAE;MAChC,IAAIC,SAAS,GAAG,KAAK;MACrBH,iBAAiB,CAACI,KAAK,CAAC,CAAC,CAAC,CAACC,OAAO,CAACC,IAAI,IAAG;QACxC,MAAMC,OAAO,GAAID,IAAyB,CAACC,OAAO;QAClD,IAAIA,OAAO,EAAE;UACXJ,SAAS,GAAG,IAAI;UAChBG,IAAI,CAACE,QAAQ,GAAG,CAAC;SAClB,MAAMF,IAAI,CAACE,QAAQ,GAAG,CAAC,CAAC;MAC3B,CAAC,CAAC;MAEF,IAAI,CAACL,SAAS,EAAE;QACbH,iBAAiB,CAAC,CAAC,CAAiB,CAACQ,QAAQ,GAAG,CAAC;QAClDR,iBAAiB,CAAC,CAAC,CAAC,CAACS,KAAK,EAAE;;;EAGlC,CAAC,EAAE,CAACjE,QAAQ,CAAC,CAAC;EAEdvB,SAAS,CAAC,MAAK;IACb8D,QAAQ,EAAE0B,KAAK,EAAE;IACjBZ,aAAa,EAAE;EACjB,CAAC,EAAE,CAACd,QAAQ,CAAC,CAAC;EAEd,OACEa,IAAA,CAAC7D,gBAAgB;IAAC2E,IAAI,EAAC,MAAM;IAACF,QAAQ,EAAE,CAAC,CAAC;IAAEG,GAAG,EAAE1B,OAAO;IAAA,GAAM3B,SAAS;IAAAqC,QAAA,EACpE5B,WAAW,CAAC6C,GAAG,CAACC,KAAA,IAAyB;MAAA,IAAxB;QAAEnC,IAAI;QAAEH;MAAE,CAAU,GAAAsC,KAAA;MACpC,MAAMP,IAAI,GAAG,IAAIpD,IAAI,CAAC4D,MAAM,CAACvC,EAAE,CAAC,CAAC;MACjC,OACEqB,IAAA,CAAC/C,cAAc;QAAC6D,IAAI,EAAC,cAAc;QAAAf,QAAA,EACjCC,IAAA,CAAC1D,gBAAgB;UACfwE,IAAI,EAAC,UAAU;UACfK,EAAE,EAAEvF,MAAM;UACVwF,OAAO,EAAC,QAAQ;UAChBL,GAAG,EAAE7B,UAAU,CAACwB,IAAI,CAAC,GAAGtB,WAAW,GAAG,IAAI;UAAA,cAC9BN,IAAI;UAChBlC,QAAQ,EAAEsC,UAAU,CAACwB,IAAI,CAAC;UAAA,gBACZxB,UAAU,CAACwB,IAAI,CAAC,GAAG,MAAM,GAAGW,SAAS;UACnDV,OAAO,EAAEzB,UAAU,CAACwB,IAAI,CAAC;UACzBY,OAAO,EAAEA,CAAA,KAAK;YACZ7D,QAAQ,GAAGiD,IAAI,CAAC;UAClB,CAAC;UACDE,QAAQ,EAAC,IAAI;UAAAb,QAAA,EAEZL,UAAU,CAACZ,IAAI;QAAC;MACA,GAhBoBH,EAAE,CAiB1B;IAErB,CAAC;EAAC,EACe;AAEvB,CAAC;AAED,eAAexB,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}