{"ast":null,"code":"import { useEffect, useCallback } from 'react';\n/**\n * @example useOuterEvent(eventName, [nodes], handler = () => { doSomething; });\n * @param eventName The type of event to trigger the handler function on. Reference [DocumentEventMap](https://microsoft.github.io/PowerBI-JavaScript/interfaces/_node_modules_typedoc_node_modules_typescript_lib_lib_dom_d_.documenteventmap.html) for a list of valid events.\n * @param nodes An array of Nodes or Refs to Nodes to attach the eventName to.\n * @param handler The function that is called when the given event occurs.\n */\nconst useOuterEvent = (eventName, nodes, handler) => {\n  const onEvent = useCallback(event => {\n    const path = event.composedPath();\n    const target = path[0];\n    if (!(target instanceof Node)) return;\n    let childIdx = 0;\n    let parentIdx = 1;\n    while (path[childIdx] !== document) {\n      const child = path[childIdx];\n      const parent = path[parentIdx];\n      if (!child || !parent) return;\n      if (parent instanceof DocumentFragment || parent instanceof Document) {\n        if (!(child instanceof Node) || !parent.contains(child)) return;\n        childIdx = parentIdx;\n      } else if (child instanceof DocumentFragment) {\n        if (!(parent instanceof Element) || parent.shadowRoot !== child) return;\n        childIdx = parentIdx;\n      }\n      parentIdx += 1;\n    }\n    if (nodes.every(n => {\n      const node = n instanceof Node ? n : n?.current;\n      if (!node) return true;\n      return node !== target && !node.contains(target);\n    })) {\n      handler(event);\n    }\n  }, [...nodes, handler]);\n  useEffect(() => {\n    const eventNames = Array.isArray(eventName) ? eventName : [eventName];\n    eventNames.forEach(event => document.addEventListener(event, onEvent));\n    return () => eventNames.forEach(event => document.removeEventListener(event, onEvent));\n  }, [eventName, onEvent]);\n};\nexport default useOuterEvent;","map":{"version":3,"names":["useEffect","useCallback","useOuterEvent","eventName","nodes","handler","onEvent","event","path","composedPath","target","Node","childIdx","parentIdx","document","child","parent","DocumentFragment","Document","contains","Element","shadowRoot","every","n","node","current","eventNames","Array","isArray","forEach","addEventListener","removeEventListener"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/hooks/useOuterEvent.ts"],"sourcesContent":["import { useEffect, useCallback, RefObject } from 'react';\n\n/**\n * @example useOuterEvent(eventName, [nodes], handler = () => { doSomething; });\n * @param eventName The type of event to trigger the handler function on. Reference [DocumentEventMap](https://microsoft.github.io/PowerBI-JavaScript/interfaces/_node_modules_typedoc_node_modules_typescript_lib_lib_dom_d_.documenteventmap.html) for a list of valid events.\n * @param nodes An array of Nodes or Refs to Nodes to attach the eventName to.\n * @param handler The function that is called when the given event occurs.\n */\nconst useOuterEvent = <EventName extends keyof DocumentEventMap>(\n  eventName: EventName | EventName[],\n  nodes: (Node | null | RefObject<Node | null>)[],\n  handler: (event: DocumentEventMap[EventName]) => void\n): void => {\n  const onEvent: typeof handler = useCallback(\n    event => {\n      const path = event.composedPath();\n      const target = path[0];\n\n      if (!(target instanceof Node)) return;\n\n      let childIdx = 0;\n      let parentIdx = 1;\n      while (path[childIdx] !== document) {\n        const child = path[childIdx];\n        const parent = path[parentIdx];\n\n        if (!child || !parent) return;\n\n        if (parent instanceof DocumentFragment || parent instanceof Document) {\n          if (!(child instanceof Node) || !parent.contains(child)) return;\n\n          childIdx = parentIdx;\n        } else if (child instanceof DocumentFragment) {\n          if (!(parent instanceof Element) || parent.shadowRoot !== child) return;\n\n          childIdx = parentIdx;\n        }\n\n        parentIdx += 1;\n      }\n\n      if (\n        nodes.every(n => {\n          const node = n instanceof Node ? n : n?.current;\n\n          if (!node) return true;\n          return node !== target && !node.contains(target);\n        })\n      ) {\n        handler(event);\n      }\n    },\n    [...nodes, handler]\n  );\n\n  useEffect(() => {\n    const eventNames = Array.isArray(eventName) ? eventName : [eventName];\n\n    eventNames.forEach(event => document.addEventListener(event, onEvent));\n    return () => eventNames.forEach(event => document.removeEventListener(event, onEvent));\n  }, [eventName, onEvent]);\n};\n\nexport default useOuterEvent;\n"],"mappings":"AAAA,SAASA,SAAS,EAAEC,WAAW,QAAmB,OAAO;AAEzD;;;;;;AAMA,MAAMC,aAAa,GAAGA,CACpBC,SAAkC,EAClCC,KAA+C,EAC/CC,OAAqD,KAC7C;EACR,MAAMC,OAAO,GAAmBL,WAAW,CACzCM,KAAK,IAAG;IACN,MAAMC,IAAI,GAAGD,KAAK,CAACE,YAAY,EAAE;IACjC,MAAMC,MAAM,GAAGF,IAAI,CAAC,CAAC,CAAC;IAEtB,IAAI,EAAEE,MAAM,YAAYC,IAAI,CAAC,EAAE;IAE/B,IAAIC,QAAQ,GAAG,CAAC;IAChB,IAAIC,SAAS,GAAG,CAAC;IACjB,OAAOL,IAAI,CAACI,QAAQ,CAAC,KAAKE,QAAQ,EAAE;MAClC,MAAMC,KAAK,GAAGP,IAAI,CAACI,QAAQ,CAAC;MAC5B,MAAMI,MAAM,GAAGR,IAAI,CAACK,SAAS,CAAC;MAE9B,IAAI,CAACE,KAAK,IAAI,CAACC,MAAM,EAAE;MAEvB,IAAIA,MAAM,YAAYC,gBAAgB,IAAID,MAAM,YAAYE,QAAQ,EAAE;QACpE,IAAI,EAAEH,KAAK,YAAYJ,IAAI,CAAC,IAAI,CAACK,MAAM,CAACG,QAAQ,CAACJ,KAAK,CAAC,EAAE;QAEzDH,QAAQ,GAAGC,SAAS;OACrB,MAAM,IAAIE,KAAK,YAAYE,gBAAgB,EAAE;QAC5C,IAAI,EAAED,MAAM,YAAYI,OAAO,CAAC,IAAIJ,MAAM,CAACK,UAAU,KAAKN,KAAK,EAAE;QAEjEH,QAAQ,GAAGC,SAAS;;MAGtBA,SAAS,IAAI,CAAC;;IAGhB,IACET,KAAK,CAACkB,KAAK,CAACC,CAAC,IAAG;MACd,MAAMC,IAAI,GAAGD,CAAC,YAAYZ,IAAI,GAAGY,CAAC,GAAGA,CAAC,EAAEE,OAAO;MAE/C,IAAI,CAACD,IAAI,EAAE,OAAO,IAAI;MACtB,OAAOA,IAAI,KAAKd,MAAM,IAAI,CAACc,IAAI,CAACL,QAAQ,CAACT,MAAM,CAAC;IAClD,CAAC,CAAC,EACF;MACAL,OAAO,CAACE,KAAK,CAAC;;EAElB,CAAC,EACD,CAAC,GAAGH,KAAK,EAAEC,OAAO,CAAC,CACpB;EAEDL,SAAS,CAAC,MAAK;IACb,MAAM0B,UAAU,GAAGC,KAAK,CAACC,OAAO,CAACzB,SAAS,CAAC,GAAGA,SAAS,GAAG,CAACA,SAAS,CAAC;IAErEuB,UAAU,CAACG,OAAO,CAACtB,KAAK,IAAIO,QAAQ,CAACgB,gBAAgB,CAACvB,KAAK,EAAED,OAAO,CAAC,CAAC;IACtE,OAAO,MAAMoB,UAAU,CAACG,OAAO,CAACtB,KAAK,IAAIO,QAAQ,CAACiB,mBAAmB,CAACxB,KAAK,EAAED,OAAO,CAAC,CAAC;EACxF,CAAC,EAAE,CAACH,SAAS,EAAEG,OAAO,CAAC,CAAC;AAC1B,CAAC;AAED,eAAeJ,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}