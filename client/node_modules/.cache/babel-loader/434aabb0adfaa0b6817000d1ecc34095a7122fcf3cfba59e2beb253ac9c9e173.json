{"ast":null,"code":"import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { forwardRef, useRef, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { useConsolidatedRef, useEscape, useFocusTrap, useI18n, useOuterEvent, useUID } from '../../hooks';\nimport { getFocusables } from '../../utils';\nimport Button from '../Button';\nimport Text from '../Text';\nimport Progress from '../Progress';\nimport Flex from '../Flex';\nimport { StyledChildrenWrap, StyledDialogContent, StyledDialogFooter, StyledDialogHeader } from './Dialog.styles';\nimport Dialog from './Dialog';\nexport const StyledFormDialog = styled(Dialog)``;\nconst FormDialog = forwardRef((_ref, ref) => {\n  let {\n    arrow = true,\n    target,\n    heading,\n    ariaLabel,\n    children,\n    progress,\n    onDismiss,\n    onCancel,\n    onSubmit,\n    ...restProps\n  } = _ref;\n  const t = useI18n();\n  const headingId = useUID();\n  const dialogRef = useConsolidatedRef(ref);\n  const cancelButtonRef = useRef(null);\n  const onCancelHandler = typeof onCancel === 'function' ? onCancel : onCancel.handler;\n  useEscape(() => {\n    if (onDismiss) {\n      onDismiss();\n    } else {\n      onCancelHandler();\n    }\n  });\n  useOuterEvent('mousedown', [target, dialogRef], () => {\n    if (onDismiss) {\n      onDismiss();\n    } else {\n      onCancelHandler();\n    }\n  });\n  useFocusTrap(dialogRef);\n  useEffect(() => {\n    if (!progress) {\n      const focusables = getFocusables(dialogRef);\n      if (focusables[0]) focusables[0].focus();\n    }\n  }, [progress]);\n  useEffect(() => {\n    return () => {\n      if (document.contains(target)) {\n        target.focus();\n      }\n    };\n  }, []);\n  return _jsxs(StyledFormDialog, {\n    ...restProps,\n    ...(heading === undefined ? {\n      ariaLabel\n    } : {\n      labelledbyId: headingId\n    }),\n    arrow: arrow,\n    target: target,\n    progress: progress,\n    ref: dialogRef,\n    children: [heading !== undefined && _jsx(Flex, {\n      container: {\n        alignItems: 'center',\n        justify: 'between',\n        pad: 2\n      },\n      item: {\n        shrink: 0\n      },\n      as: StyledDialogHeader,\n      children: _jsx(Text, {\n        id: headingId,\n        variant: 'h2',\n        children: heading\n      })\n    }), _jsxs(Flex, {\n      item: {\n        grow: 1\n      },\n      as: StyledDialogContent,\n      children: [children && _jsx(StyledChildrenWrap, {\n        children: children\n      }), _jsx(Progress, {\n        visible: !!progress,\n        focusOnVisible: true,\n        placement: children ? 'local' : 'block',\n        message: typeof progress === 'string' ? progress : undefined\n      })]\n    }), _jsxs(Flex, {\n      container: {\n        alignItems: 'center',\n        justify: 'between',\n        pad: 2\n      },\n      item: {\n        shrink: 0\n      },\n      as: StyledDialogFooter,\n      children: [_jsx(Button, {\n        onClick: () => {\n          onCancelHandler();\n        },\n        disabled: typeof onCancel !== 'function' ? onCancel.disabled : undefined,\n        ref: cancelButtonRef,\n        children: typeof onCancel !== 'function' && onCancel.text ? onCancel.text : t('cancel')\n      }), _jsx(Button, {\n        variant: 'primary',\n        onClick: () => {\n          (typeof onSubmit !== 'function' ? onSubmit.handler : onSubmit)();\n        },\n        disabled: typeof onSubmit !== 'function' ? onSubmit.disabled : undefined,\n        children: typeof onSubmit !== 'function' && onSubmit.text ? onSubmit.text : t('submit')\n      })]\n    })]\n  });\n});\nexport default FormDialog;","map":{"version":3,"names":["forwardRef","useRef","useEffect","styled","useConsolidatedRef","useEscape","useFocusTrap","useI18n","useOuterEvent","useUID","getFocusables","Button","Text","Progress","Flex","StyledChildrenWrap","StyledDialogContent","StyledDialogFooter","StyledDialogHeader","Dialog","StyledFormDialog","FormDialog","_ref","ref","arrow","target","heading","ariaLabel","children","progress","onDismiss","onCancel","onSubmit","restProps","t","headingId","dialogRef","cancelButtonRef","onCancelHandler","handler","focusables","focus","document","contains","_jsxs","undefined","labelledbyId","_jsx","container","alignItems","justify","pad","item","shrink","as","id","variant","grow","visible","focusOnVisible","placement","message","onClick","disabled","text"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/components/Dialog/FormDialog.tsx"],"sourcesContent":["import { forwardRef, PropsWithoutRef, useRef, FC, useEffect, HTMLAttributes } from 'react';\nimport styled from 'styled-components';\n\nimport {\n  useConsolidatedRef,\n  useEscape,\n  useFocusTrap,\n  useI18n,\n  useOuterEvent,\n  useUID\n} from '../../hooks';\nimport { getFocusables } from '../../utils';\nimport Button from '../Button';\nimport Text from '../Text';\nimport Progress from '../Progress';\nimport { OmitStrict } from '../../types';\nimport Flex from '../Flex';\n\nimport {\n  StyledChildrenWrap,\n  StyledDialogContent,\n  StyledDialogFooter,\n  StyledDialogHeader\n} from './Dialog.styles';\nimport { FormDialogProps } from './Dialog.types';\nimport Dialog from './Dialog';\n\nexport const StyledFormDialog = styled(Dialog)``;\n\nconst FormDialog: FC<FormDialogProps & OmitStrict<HTMLAttributes<HTMLDivElement>, 'onSubmit'>> =\n  forwardRef(\n    (\n      {\n        arrow = true,\n        target,\n        heading,\n        ariaLabel,\n        children,\n        progress,\n        onDismiss,\n        onCancel,\n        onSubmit,\n        ...restProps\n      }: PropsWithoutRef<FormDialogProps>,\n      ref: FormDialogProps['ref']\n    ) => {\n      const t = useI18n();\n      const headingId = useUID();\n      const dialogRef = useConsolidatedRef(ref);\n      const cancelButtonRef = useRef<HTMLButtonElement>(null);\n      const onCancelHandler = typeof onCancel === 'function' ? onCancel : onCancel.handler;\n\n      useEscape(() => {\n        if (onDismiss) {\n          onDismiss();\n        } else {\n          onCancelHandler();\n        }\n      });\n\n      useOuterEvent('mousedown', [target, dialogRef], () => {\n        if (onDismiss) {\n          onDismiss();\n        } else {\n          onCancelHandler();\n        }\n      });\n\n      useFocusTrap(dialogRef);\n\n      useEffect(() => {\n        if (!progress) {\n          const focusables = getFocusables(dialogRef);\n          if (focusables[0]) focusables[0].focus();\n        }\n      }, [progress]);\n\n      useEffect(() => {\n        return () => {\n          if (document.contains(target)) {\n            target.focus();\n          }\n        };\n      }, []);\n\n      return (\n        <StyledFormDialog\n          {...restProps}\n          {...(heading === undefined ? { ariaLabel } : { labelledbyId: headingId })}\n          arrow={arrow}\n          target={target}\n          progress={progress}\n          ref={dialogRef}\n        >\n          {heading !== undefined && (\n            <Flex\n              container={{ alignItems: 'center', justify: 'between', pad: 2 }}\n              item={{ shrink: 0 }}\n              as={StyledDialogHeader}\n            >\n              <Text id={headingId} variant='h2'>\n                {heading}\n              </Text>\n            </Flex>\n          )}\n\n          <Flex item={{ grow: 1 }} as={StyledDialogContent}>\n            {children && <StyledChildrenWrap>{children}</StyledChildrenWrap>}\n            <Progress\n              visible={!!progress}\n              focusOnVisible\n              placement={children ? 'local' : 'block'}\n              message={typeof progress === 'string' ? progress : undefined}\n            />\n          </Flex>\n\n          <Flex\n            container={{ alignItems: 'center', justify: 'between', pad: 2 }}\n            item={{ shrink: 0 }}\n            as={StyledDialogFooter}\n          >\n            <Button\n              onClick={() => {\n                onCancelHandler();\n              }}\n              disabled={typeof onCancel !== 'function' ? onCancel.disabled : undefined}\n              ref={cancelButtonRef}\n            >\n              {typeof onCancel !== 'function' && onCancel.text ? onCancel.text : t('cancel')}\n            </Button>\n\n            <Button\n              variant='primary'\n              onClick={() => {\n                (typeof onSubmit !== 'function' ? onSubmit.handler : onSubmit)();\n              }}\n              disabled={typeof onSubmit !== 'function' ? onSubmit.disabled : undefined}\n            >\n              {typeof onSubmit !== 'function' && onSubmit.text ? onSubmit.text : t('submit')}\n            </Button>\n          </Flex>\n        </StyledFormDialog>\n      );\n    }\n  );\n\nexport default FormDialog;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}