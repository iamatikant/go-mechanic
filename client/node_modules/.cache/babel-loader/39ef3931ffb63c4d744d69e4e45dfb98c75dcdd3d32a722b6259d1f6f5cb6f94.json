{"ast":null,"code":"import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { forwardRef, useRef, useEffect } from 'react';\nimport styled, { css } from 'styled-components';\nimport { useUID, useI18n, usePrevious, useBreakpoint, useTheme } from '../../hooks';\nimport { getFocusables } from '../../utils';\nimport { calculateFontSize } from '../../styles';\nimport Flex from '../Flex';\nimport Text from '../Text';\nimport HTML from '../HTML';\nimport VisuallyHiddenText from '../VisuallyHiddenText';\nimport Grid from '../Grid';\nimport { defaultThemeProp } from '../../theme';\nimport VerticalFormProgress from './VerticalFormProgress';\nimport HorizontalFormProgress from './HorizontalFormProgress';\nexport const StyledForm = styled.form(_ref => {\n  let {\n    theme\n  } = _ref;\n  const {\n    base: {\n      spacing\n    }\n  } = theme;\n  return css`\n    height: 100%;\n    width: 100%;\n    flex-grow: 1;\n    overflow-y: auto;\n    padding: ${spacing};\n  `;\n});\nexport const StyledFormContent = styled.div``;\nexport const StyledRequiredFieldLegend = styled(Text)(_ref2 => {\n  let {\n    theme\n  } = _ref2;\n  const {\n    base: {\n      'font-size': fontSize,\n      'font-scale': fontScale,\n      palette: {\n        urgent\n      }\n    }\n  } = theme;\n  const {\n    xxs: infoFontSize\n  } = calculateFontSize(fontSize, fontScale);\n  return css`\n    font-size: ${infoFontSize};\n    font-style: italic;\n\n    &::before {\n      display: 'inline';\n      content: '\\\\00a0*';\n      vertical-align: top;\n      color: ${urgent};\n    }\n  `;\n});\nStyledRequiredFieldLegend.defaultProps = defaultThemeProp;\nexport const MultiStepForm = forwardRef((_ref3, ref) => {\n  let {\n    currentStepId,\n    steps,\n    heading,\n    stepIndicator: stepIndicatorProp = steps.length < 2 ? 'none' : 'horizontal',\n    ...restProps\n  } = _ref3;\n  const multiStepContentRef = useRef(null);\n  const previousId = usePrevious(currentStepId);\n  const currentStep = steps.find(step => step.id === currentStepId);\n  const headingId = useUID();\n  const descriptionId = useUID();\n  const t = useI18n();\n  const {\n    base: {\n      'content-width': contentWidth\n    }\n  } = useTheme();\n  useEffect(() => {\n    if (previousId === undefined) return;\n    if (previousId !== currentStepId) {\n      const focusableElements = getFocusables(multiStepContentRef);\n      if (focusableElements.length) focusableElements[0].focus();\n    }\n  }, [currentStepId, previousId]);\n  const isSmallOrAbove = useBreakpoint('sm');\n  const stepIndicator = stepIndicatorProp === 'vertical' && !isSmallOrAbove ? 'horizontal' : stepIndicatorProp;\n  let areaDef = '';\n  switch (stepIndicator) {\n    case 'horizontal':\n      if (heading) areaDef += '\"heading\" ';\n      areaDef += '\"stepIndicator\" \"content\"';\n      if (currentStep.actions) areaDef += ' \"actions\"';\n      break;\n    case 'vertical':\n      if (heading) areaDef += '\"heading stepIndicator\" ';\n      areaDef += '\"content stepIndicator\"';\n      if (currentStep.actions) areaDef += ' \"actions actions\"';\n      break;\n    default:\n      if (heading) areaDef += '\"heading\" ';\n      areaDef += '\"content\"';\n      if (currentStep.actions) areaDef += ' \"actions\"';\n  }\n  return _jsxs(Grid, {\n    ref: ref,\n    as: StyledForm,\n    ...restProps,\n    container: {\n      cols: stepIndicator === 'vertical' ? `2fr minmax(${contentWidth.xs}, 1fr)` : 'minmax(0, 1fr)',\n      areas: areaDef,\n      gap: 3\n    },\n    \"aria-labelledby\": heading ? headingId : undefined,\n    \"aria-describedby\": currentStep.description ? descriptionId : undefined,\n    children: [(heading || steps.length > 1) && _jsxs(_Fragment, {\n      children: [heading && _jsx(Grid, {\n        item: {\n          area: 'heading'\n        },\n        children: _jsx(Text, {\n          id: headingId,\n          variant: 'h3',\n          children: heading\n        })\n      }), steps.length > 1 && _jsxs(_Fragment, {\n        children: [stepIndicator === 'horizontal' && _jsx(Grid, {\n          item: {\n            area: 'stepIndicator'\n          },\n          as: HorizontalFormProgress,\n          steps: steps,\n          currentStepId: currentStepId\n        }), stepIndicator === 'vertical' && _jsx(Grid, {\n          item: {\n            area: 'stepIndicator'\n          },\n          as: VerticalFormProgress,\n          steps: steps,\n          currentStepId: currentStepId\n        }), _jsx(VisuallyHiddenText, {\n          \"aria-live\": 'polite',\n          children: previousId !== undefined && previousId !== currentStepId ? t('step_changed_to_name', [currentStep.name]) : ''\n        })]\n      })]\n    }), _jsxs(Grid, {\n      item: {\n        area: 'content'\n      },\n      container: {\n        gap: 3\n      },\n      children: [currentStep.banners, currentStep.description && _jsx(HTML, {\n        id: descriptionId,\n        as: 'p',\n        content: currentStep.description\n      }), _jsx(StyledFormContent, {\n        ref: multiStepContentRef,\n        children: currentStep.content\n      })]\n    }), currentStep.actions && _jsx(Grid, {\n      item: {\n        area: 'actions'\n      },\n      children: _jsx(Flex, {\n        container: {\n          justify: 'between',\n          alignItems: 'center'\n        },\n        children: currentStep.actions\n      })\n    })]\n  });\n});\nexport default MultiStepForm;","map":{"version":3,"names":["forwardRef","useRef","useEffect","styled","css","useUID","useI18n","usePrevious","useBreakpoint","useTheme","getFocusables","calculateFontSize","Flex","Text","HTML","VisuallyHiddenText","Grid","defaultThemeProp","VerticalFormProgress","HorizontalFormProgress","StyledForm","form","_ref","theme","base","spacing","StyledFormContent","div","StyledRequiredFieldLegend","_ref2","fontSize","fontScale","palette","urgent","xxs","infoFontSize","defaultProps","MultiStepForm","_ref3","ref","currentStepId","steps","heading","stepIndicator","stepIndicatorProp","length","restProps","multiStepContentRef","previousId","currentStep","find","step","id","headingId","descriptionId","t","contentWidth","undefined","focusableElements","focus","isSmallOrAbove","areaDef","actions","_jsxs","as","container","cols","xs","areas","gap","description","children","_Fragment","_jsx","item","area","variant","name","banners","content","justify","alignItems"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/components/MultiStepForm/MultiStepForm.tsx"],"sourcesContent":["import { forwardRef, FunctionComponent, PropsWithoutRef, useRef, useEffect } from 'react';\nimport styled, { css } from 'styled-components';\n\nimport { useUID, useI18n, usePrevious, useBreakpoint, useTheme } from '../../hooks';\nimport { ForwardProps } from '../../types';\nimport { getFocusables } from '../../utils';\nimport { calculateFontSize } from '../../styles';\nimport Flex from '../Flex';\nimport Text from '../Text';\nimport HTML from '../HTML';\nimport VisuallyHiddenText from '../VisuallyHiddenText';\nimport Grid from '../Grid';\nimport { defaultThemeProp } from '../../theme';\n\nimport MultiStepFormProps from './MultiStepForm.types';\nimport VerticalFormProgress from './VerticalFormProgress';\nimport HorizontalFormProgress from './HorizontalFormProgress';\n\nexport const StyledForm = styled.form(({ theme }) => {\n  const {\n    base: { spacing }\n  } = theme;\n  return css`\n    height: 100%;\n    width: 100%;\n    flex-grow: 1;\n    overflow-y: auto;\n    padding: ${spacing};\n  `;\n});\n\nexport const StyledFormContent = styled.div``;\n\nexport const StyledRequiredFieldLegend = styled(Text)(({ theme }) => {\n  const {\n    base: {\n      'font-size': fontSize,\n      'font-scale': fontScale,\n      palette: { urgent }\n    }\n  } = theme;\n  const { xxs: infoFontSize } = calculateFontSize(fontSize, fontScale);\n\n  return css`\n    font-size: ${infoFontSize};\n    font-style: italic;\n\n    &::before {\n      display: 'inline';\n      content: '\\\\00a0*';\n      vertical-align: top;\n      color: ${urgent};\n    }\n  `;\n});\n\nStyledRequiredFieldLegend.defaultProps = defaultThemeProp;\n\nexport const MultiStepForm: FunctionComponent<MultiStepFormProps & ForwardProps> = forwardRef(\n  (\n    {\n      currentStepId,\n      steps,\n      heading,\n      stepIndicator: stepIndicatorProp = steps.length < 2 ? 'none' : 'horizontal',\n      ...restProps\n    }: PropsWithoutRef<MultiStepFormProps>,\n    ref: MultiStepFormProps['ref']\n  ) => {\n    const multiStepContentRef = useRef(null);\n    const previousId = usePrevious(currentStepId);\n    const currentStep = steps.find(step => step.id === currentStepId)!;\n    const headingId = useUID();\n    const descriptionId = useUID();\n    const t = useI18n();\n    const {\n      base: { 'content-width': contentWidth }\n    } = useTheme();\n\n    useEffect(() => {\n      if (previousId === undefined) return;\n\n      if (previousId !== currentStepId) {\n        const focusableElements = getFocusables(multiStepContentRef);\n\n        if (focusableElements.length) focusableElements[0].focus();\n      }\n    }, [currentStepId, previousId]);\n\n    const isSmallOrAbove = useBreakpoint('sm');\n\n    const stepIndicator =\n      stepIndicatorProp === 'vertical' && !isSmallOrAbove ? 'horizontal' : stepIndicatorProp;\n\n    let areaDef = '';\n    switch (stepIndicator) {\n      case 'horizontal':\n        if (heading) areaDef += '\"heading\" ';\n        areaDef += '\"stepIndicator\" \"content\"';\n        if (currentStep.actions) areaDef += ' \"actions\"';\n        break;\n      case 'vertical':\n        if (heading) areaDef += '\"heading stepIndicator\" ';\n        areaDef += '\"content stepIndicator\"';\n        if (currentStep.actions) areaDef += ' \"actions actions\"';\n        break;\n      default:\n        if (heading) areaDef += '\"heading\" ';\n        areaDef += '\"content\"';\n        if (currentStep.actions) areaDef += ' \"actions\"';\n    }\n\n    return (\n      <Grid\n        ref={ref}\n        as={StyledForm}\n        {...restProps}\n        container={{\n          cols:\n            stepIndicator === 'vertical' ? `2fr minmax(${contentWidth.xs}, 1fr)` : 'minmax(0, 1fr)',\n          areas: areaDef,\n          gap: 3\n        }}\n        aria-labelledby={heading ? headingId : undefined}\n        aria-describedby={currentStep.description ? descriptionId : undefined}\n      >\n        {(heading || steps.length > 1) && (\n          <>\n            {heading && (\n              <Grid item={{ area: 'heading' }}>\n                <Text id={headingId} variant='h3'>\n                  {heading}\n                </Text>\n              </Grid>\n            )}\n            {steps.length > 1 && (\n              <>\n                {stepIndicator === 'horizontal' && (\n                  <Grid\n                    item={{ area: 'stepIndicator' }}\n                    as={HorizontalFormProgress}\n                    steps={steps}\n                    currentStepId={currentStepId}\n                  />\n                )}\n                {stepIndicator === 'vertical' && (\n                  <Grid\n                    item={{ area: 'stepIndicator' }}\n                    as={VerticalFormProgress}\n                    steps={steps}\n                    currentStepId={currentStepId}\n                  />\n                )}\n                <VisuallyHiddenText aria-live='polite'>\n                  {previousId !== undefined && previousId !== currentStepId\n                    ? t('step_changed_to_name', [currentStep.name])\n                    : ''}\n                </VisuallyHiddenText>\n              </>\n            )}\n          </>\n        )}\n\n        <Grid item={{ area: 'content' }} container={{ gap: 3 }}>\n          {currentStep.banners}\n\n          {currentStep.description && (\n            <HTML id={descriptionId} as='p' content={currentStep.description} />\n          )}\n\n          <StyledFormContent ref={multiStepContentRef}>{currentStep.content}</StyledFormContent>\n        </Grid>\n        {currentStep.actions && (\n          <Grid item={{ area: 'actions' }}>\n            <Flex container={{ justify: 'between', alignItems: 'center' }}>\n              {currentStep.actions}\n            </Flex>\n          </Grid>\n        )}\n      </Grid>\n    );\n  }\n);\n\nexport default MultiStepForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}