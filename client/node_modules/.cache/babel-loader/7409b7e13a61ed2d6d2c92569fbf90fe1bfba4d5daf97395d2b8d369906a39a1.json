{"ast":null,"code":"import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { forwardRef, useState, useEffect, useMemo } from 'react';\nimport styled, { css } from 'styled-components';\nimport { readableColor, rgba } from 'polished';\nimport Image from '../Image';\nimport { defaultThemeProp } from '../../theme';\nimport Icon, { StyledIcon } from '../Icon';\nimport { Alert } from '../Badges';\nimport { useI18n } from '../../hooks';\nimport { tryCatch } from '../../utils';\nconst sizeToRem = {\n  s: 1,\n  m: 2,\n  l: 2.5,\n  xl: 4\n};\nconst fontSizeToRem = {\n  s: 0.5625,\n  m: 0.8125,\n  l: 1,\n  xl: 1.5\n};\nconst sizeToBorderRadius = {\n  s: 0.25,\n  m: 0.5,\n  l: 1,\n  xl: 1\n};\nexport const StyledAvatarImage = styled(Image)`\n  min-height: 100%;\n  min-width: 100%;\n  aspect-ratio: 1 / 1;\n  object-fit: cover;\n  border-radius: inherit;\n  height: fit-content;\n  width: fit-content;\n`;\nexport const StyledAvatar = styled.div(_ref => {\n  let {\n    hasBrokenImage,\n    hasSrc,\n    size,\n    shape,\n    color,\n    backgroundColor,\n    theme: {\n      base: {\n        palette: {\n          'foreground-color': foregroundColor,\n          'primary-background': primaryBackground\n        }\n      },\n      components: {\n        avatar\n      }\n    }\n  } = _ref;\n  const sizeRem = sizeToRem[size];\n  const fontSize = fontSizeToRem[size];\n  let bgColor = hasSrc && !hasBrokenImage ? primaryBackground : backgroundColor || avatar['background-color'];\n  if (color && !backgroundColor && !(hasSrc && !hasBrokenImage)) bgColor = tryCatch(() => readableColor(color), () => avatar['background-color']);\n  const shadowColor = tryCatch(() => rgba(foregroundColor, 0.1));\n  const iconColor = color || tryCatch(() => readableColor(bgColor));\n  return css`\n      position: relative;\n      background-color: ${bgColor};\n      color: ${iconColor};\n      width: ${sizeRem}rem;\n      height: ${sizeRem}rem;\n      min-width: ${sizeRem}rem;\n      min-height: ${sizeRem}rem;\n      font-size: ${fontSize}rem;\n      text-transform: uppercase;\n      line-height: ${sizeRem}rem;\n      text-align: center;\n      vertical-align: top;\n      display: inline-block;\n      border-radius: 100%;\n      user-select: none;\n      -webkit-user-select: none;\n\n      ${shape === 'squircle' && css`\n        border-radius: calc(${sizeToBorderRadius[size]} * ${avatar['border-radius']});\n      `}\n\n      ${StyledIcon} {\n        width: 50%;\n        height: 100%;\n        vertical-align: initial;\n      }\n\n      ::after {\n        content: '';\n        position: absolute;\n        inset: 0;\n        border-radius: inherit;\n        pointer-events: none;\n        box-shadow: inset 0 0 0 0.0625rem ${shadowColor};\n      }\n    `;\n});\nStyledAvatar.defaultProps = defaultThemeProp;\nexport const StyledStatus = styled.div(_ref2 => {\n  let {\n    size,\n    theme\n  } = _ref2;\n  /** Scales alert badge dimensions based on size of avatar */\n  const sizeDimensions = 0.625 * sizeToRem[size] / sizeToRem.m;\n  return css`\n    position: absolute;\n    height: ${sizeDimensions}rem;\n    width: ${sizeDimensions}rem;\n    inset-block-end: 0;\n    inset-inline-end: 0;\n    z-index: 1;\n    animation: pop calc(${theme.base.animation.speed} * 2) cubic-bezier(1, 1.65, 0.3, 1.24);\n\n    @keyframes pop {\n      0% {\n        opacity: 0;\n        transform: scale(0);\n      }\n      50% {\n        opacity: 1;\n      }\n      100% {\n        transform: scale(1);\n      }\n    }\n  `;\n});\nStyledStatus.defaultProps = defaultThemeProp;\n/**\n * Helper function to construct a two or one letter initial from the title prop.\n * This text will be displayed if no valid image source is provided.\n * @param name\n * @param size\n */\nconst getInitials = (name, size) => {\n  const words = name.split(' ');\n  const firstInitial = words[0][0];\n  return words.length === 1 || size === 's' ? firstInitial : `${firstInitial}${words[1][0]}`;\n};\n/**\n * Generally, avatars are used to distinguish between different operators and\n * objects when they are shown in a list or in a small space. Users of applications\n * can upload a custom avatar of their choice.\n */\nconst Avatar = forwardRef((props, ref) => {\n  const {\n    shape = 'circle',\n    size = 'm',\n    imageSrc,\n    icon,\n    name,\n    status,\n    onImageError,\n    ...restProps\n  } = props;\n  const [hasBrokenImage, setHasBrokenImage] = useState();\n  const t = useI18n();\n  useEffect(() => {\n    setHasBrokenImage(undefined);\n  }, [imageSrc]);\n  const content = useMemo(() => {\n    if (icon) {\n      return _jsx(Icon, {\n        name: icon\n      });\n    }\n    if (imageSrc && !hasBrokenImage) {\n      return _jsx(StyledAvatarImage, {\n        src: imageSrc,\n        alt: name,\n        onError: e => {\n          setHasBrokenImage(true);\n          onImageError?.(e);\n        },\n        onLoad: () => {\n          setHasBrokenImage(false);\n        }\n      });\n    }\n    return getInitials(name, size);\n  }, [imageSrc, name, size, icon, hasBrokenImage, onImageError]);\n  return _jsxs(StyledAvatar, {\n    role: 'img',\n    hasSrc: !!imageSrc,\n    hasBrokenImage: hasBrokenImage,\n    shape: shape,\n    size: size,\n    ref: ref,\n    \"aria-label\": `${name}${status ? ` ${t('status')} ${status}` : ''}`,\n    ...restProps,\n    children: [content, status === 'active' && _jsx(Alert, {\n      as: StyledStatus,\n      size: size,\n      variant: 'success'\n    })]\n  });\n});\nexport default Avatar;","map":{"version":3,"names":["forwardRef","useState","useEffect","useMemo","styled","css","readableColor","rgba","Image","defaultThemeProp","Icon","StyledIcon","Alert","useI18n","tryCatch","sizeToRem","s","m","l","xl","fontSizeToRem","sizeToBorderRadius","StyledAvatarImage","StyledAvatar","div","_ref","hasBrokenImage","hasSrc","size","shape","color","backgroundColor","theme","base","palette","foregroundColor","primaryBackground","components","avatar","sizeRem","fontSize","bgColor","shadowColor","iconColor","defaultProps","StyledStatus","_ref2","sizeDimensions","animation","speed","getInitials","name","words","split","firstInitial","length","Avatar","props","ref","imageSrc","icon","status","onImageError","restProps","setHasBrokenImage","t","undefined","content","_jsx","src","alt","onError","e","onLoad","_jsxs","role","children","as","variant"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/components/Avatar/Avatar.tsx"],"sourcesContent":["import {\n  FunctionComponent,\n  forwardRef,\n  Ref,\n  PropsWithoutRef,\n  SyntheticEvent,\n  useState,\n  useEffect,\n  useMemo\n} from 'react';\nimport styled, { css } from 'styled-components';\nimport { readableColor, rgba } from 'polished';\n\nimport Image from '../Image';\nimport {\n  BaseProps,\n  ForwardProps,\n  PropsWithDefaults,\n  NoChildrenProp,\n  OmitStrict\n} from '../../types';\nimport { defaultThemeProp } from '../../theme';\nimport Icon, { StyledIcon } from '../Icon';\nimport { Alert } from '../Badges';\nimport { useI18n } from '../../hooks';\nimport { tryCatch } from '../../utils';\n\nexport interface AvatarProps extends BaseProps, NoChildrenProp {\n  /** The name of the identity the Avatar represents. */\n  name: string;\n  /** Content of the Avatar as an image source url. */\n  imageSrc?: string;\n  /** An icon to render as the content of the avatar. imageSrc will take precedence if passed. */\n  icon?: string;\n  /** Optional color for the icon to be rendered */\n  color?: string;\n  /** Optional background color for the avatar. Will be auto computed if not passed */\n  backgroundColor?: string;\n  /**\n   * Shape of the Avatar.\n   * @default 'circle'\n   */\n  shape?: 'circle' | 'squircle';\n  /**\n   * Avatar size.\n   * @default 'm'\n   */\n  size?: 's' | 'm' | 'l' | 'xl';\n  /** If defined, will render status icon on the avatar. */\n  status?: 'active';\n  /** Optional error handler in the event an image fails to load. */\n  onImageError?: (err: SyntheticEvent<HTMLImageElement>) => void;\n  /** Ref for the wrapping element. */\n  ref?: Ref<HTMLDivElement | HTMLImageElement>;\n}\n\ntype AvatarPropsWithDefaults = PropsWithDefaults<AvatarProps, 'shape' | 'size'>;\n\nconst sizeToRem = {\n  s: 1,\n  m: 2,\n  l: 2.5,\n  xl: 4\n};\n\nconst fontSizeToRem = {\n  s: 0.5625,\n  m: 0.8125,\n  l: 1,\n  xl: 1.5\n};\n\nconst sizeToBorderRadius = {\n  s: 0.25,\n  m: 0.5,\n  l: 1,\n  xl: 1\n};\n\nexport const StyledAvatarImage = styled(Image)`\n  min-height: 100%;\n  min-width: 100%;\n  aspect-ratio: 1 / 1;\n  object-fit: cover;\n  border-radius: inherit;\n  height: fit-content;\n  width: fit-content;\n`;\n\nexport const StyledAvatar = styled.div<\n  OmitStrict<AvatarPropsWithDefaults, 'name' | 'children'> & {\n    hasSrc?: boolean;\n    hasBrokenImage?: boolean;\n  }\n>(\n  ({\n    hasBrokenImage,\n    hasSrc,\n    size,\n    shape,\n    color,\n    backgroundColor,\n    theme: {\n      base: {\n        palette: { 'foreground-color': foregroundColor, 'primary-background': primaryBackground }\n      },\n      components: { avatar }\n    }\n  }) => {\n    const sizeRem = sizeToRem[size];\n    const fontSize = fontSizeToRem[size];\n    let bgColor =\n      hasSrc && !hasBrokenImage ? primaryBackground : backgroundColor || avatar['background-color'];\n    if (color && !backgroundColor && !(hasSrc && !hasBrokenImage))\n      bgColor = tryCatch(\n        () => readableColor(color),\n        () => avatar['background-color']\n      );\n    const shadowColor = tryCatch(() => rgba(foregroundColor, 0.1));\n    const iconColor = color || tryCatch(() => readableColor(bgColor));\n\n    return css`\n      position: relative;\n      background-color: ${bgColor};\n      color: ${iconColor};\n      width: ${sizeRem}rem;\n      height: ${sizeRem}rem;\n      min-width: ${sizeRem}rem;\n      min-height: ${sizeRem}rem;\n      font-size: ${fontSize}rem;\n      text-transform: uppercase;\n      line-height: ${sizeRem}rem;\n      text-align: center;\n      vertical-align: top;\n      display: inline-block;\n      border-radius: 100%;\n      user-select: none;\n      -webkit-user-select: none;\n\n      ${shape === 'squircle' &&\n      css`\n        border-radius: calc(${sizeToBorderRadius[size]} * ${avatar['border-radius']});\n      `}\n\n      ${StyledIcon} {\n        width: 50%;\n        height: 100%;\n        vertical-align: initial;\n      }\n\n      ::after {\n        content: '';\n        position: absolute;\n        inset: 0;\n        border-radius: inherit;\n        pointer-events: none;\n        box-shadow: inset 0 0 0 0.0625rem ${shadowColor};\n      }\n    `;\n  }\n);\n\nStyledAvatar.defaultProps = defaultThemeProp;\n\nexport const StyledStatus = styled.div<Pick<AvatarPropsWithDefaults, 'size'>>(({ size, theme }) => {\n  /** Scales alert badge dimensions based on size of avatar */\n  const sizeDimensions = (0.625 * sizeToRem[size]) / sizeToRem.m;\n\n  return css`\n    position: absolute;\n    height: ${sizeDimensions}rem;\n    width: ${sizeDimensions}rem;\n    inset-block-end: 0;\n    inset-inline-end: 0;\n    z-index: 1;\n    animation: pop calc(${theme.base.animation.speed} * 2) cubic-bezier(1, 1.65, 0.3, 1.24);\n\n    @keyframes pop {\n      0% {\n        opacity: 0;\n        transform: scale(0);\n      }\n      50% {\n        opacity: 1;\n      }\n      100% {\n        transform: scale(1);\n      }\n    }\n  `;\n});\n\nStyledStatus.defaultProps = defaultThemeProp;\n\n/**\n * Helper function to construct a two or one letter initial from the title prop.\n * This text will be displayed if no valid image source is provided.\n * @param name\n * @param size\n */\nconst getInitials = (name: AvatarProps['name'], size: AvatarProps['size']) => {\n  const words = name.split(' ');\n  const firstInitial = words[0][0];\n\n  return words.length === 1 || size === 's' ? firstInitial : `${firstInitial}${words[1][0]}`;\n};\n\n/**\n * Generally, avatars are used to distinguish between different operators and\n * objects when they are shown in a list or in a small space. Users of applications\n * can upload a custom avatar of their choice.\n */\nconst Avatar: FunctionComponent<AvatarProps & ForwardProps> = forwardRef(\n  (props: PropsWithoutRef<AvatarProps>, ref: Ref<HTMLDivElement | HTMLImageElement>) => {\n    const {\n      shape = 'circle',\n      size = 'm',\n      imageSrc,\n      icon,\n      name,\n      status,\n      onImageError,\n      ...restProps\n    } = props;\n    const [hasBrokenImage, setHasBrokenImage] = useState<undefined | boolean>();\n    const t = useI18n();\n\n    useEffect(() => {\n      setHasBrokenImage(undefined);\n    }, [imageSrc]);\n\n    const content = useMemo(() => {\n      if (icon) {\n        return <Icon name={icon} />;\n      }\n      if (imageSrc && !hasBrokenImage) {\n        return (\n          <StyledAvatarImage\n            src={imageSrc}\n            alt={name}\n            onError={(e: SyntheticEvent<HTMLImageElement>) => {\n              setHasBrokenImage(true);\n              onImageError?.(e);\n            }}\n            onLoad={() => {\n              setHasBrokenImage(false);\n            }}\n          />\n        );\n      }\n      return getInitials(name, size);\n    }, [imageSrc, name, size, icon, hasBrokenImage, onImageError]);\n\n    return (\n      <StyledAvatar\n        role='img'\n        hasSrc={!!imageSrc}\n        hasBrokenImage={hasBrokenImage}\n        shape={shape}\n        size={size}\n        ref={ref}\n        aria-label={`${name}${status ? ` ${t('status')} ${status}` : ''}`}\n        {...restProps}\n      >\n        {content}\n        {status === 'active' && <Alert as={StyledStatus} size={size} variant='success' />}\n      </StyledAvatar>\n    );\n  }\n);\n\nexport default Avatar;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}