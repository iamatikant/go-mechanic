{"ast":null,"code":"import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useEffect, useContext, useReducer, useMemo } from 'react';\nimport { createUID, windowIsAvailable } from '../../utils';\nimport { useI18n } from '../../hooks';\nimport { StyledLog } from './LiveLog.styles';\nimport { LiveLogContext } from './Context';\nconst reducer = (state, action) => {\n  const type = action.type;\n  switch (type) {\n    case 'announce':\n      {\n        const message = action.payload.message;\n        const messageType = action.payload.type;\n        const announceMessage = ['alert', 'error', 'exception'].includes(messageType) || !state.suppressedTypes.includes(messageType);\n        if (announceMessage) {\n          const id = createUID();\n          if (action.payload.level === 'assertive') {\n            return {\n              ...state,\n              assertiveMessages: [...state.assertiveMessages, {\n                message,\n                id\n              }]\n            };\n          }\n          return {\n            ...state,\n            politeMessages: [...state.politeMessages, {\n              message,\n              id\n            }]\n          };\n        }\n        return state;\n      }\n    case 'setMaxLength':\n      {\n        return {\n          ...state,\n          maxLength: action.payload > 0 ? action.payload : 50\n        };\n      }\n    case 'trimLength':\n      {\n        const trimPolite = state.politeMessages.length > state.maxLength;\n        const trimAssertive = state.assertiveMessages.length > state.maxLength;\n        return {\n          ...state,\n          politeMessages: trimPolite ? [...state.politeMessages.slice(-state.maxLength)] : state.politeMessages,\n          assertiveMessages: trimAssertive ? [...state.assertiveMessages.slice(-state.maxLength)] : state.assertiveMessages\n        };\n      }\n    default:\n      return state;\n  }\n};\nconst LiveLog = _ref => {\n  let {\n    children,\n    maxLength = 50\n  } = _ref;\n  const t = useI18n();\n  const [state, dispatch] = useReducer(reducer, {\n    maxLength,\n    politeMessages: [],\n    assertiveMessages: [],\n    suppressedTypes: [] // initialize via a11y settings once available.\n  });\n  // Manage log length.\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      dispatch({\n        type: 'trimLength'\n      });\n    }, 1000);\n    return () => {\n      clearTimeout(timeout);\n    };\n  }, [state.assertiveMessages, state.politeMessages, state.maxLength]);\n  // Update max length\n  useEffect(() => {\n    dispatch({\n      type: 'setMaxLength',\n      payload: maxLength\n    });\n  }, [maxLength]);\n  const providerValue = useMemo(() => ({\n    announce: _ref2 => {\n      let {\n        message,\n        type = 'info',\n        assertive = false\n      } = _ref2;\n      dispatch({\n        type: 'announce',\n        payload: {\n          message,\n          type,\n          level: assertive ? 'assertive' : 'polite'\n        }\n      });\n    },\n    announcePolite: _ref3 => {\n      let {\n        message,\n        type = 'info'\n      } = _ref3;\n      dispatch({\n        type: 'announce',\n        payload: {\n          message,\n          type,\n          level: 'polite'\n        }\n      });\n    },\n    announceAssertive: _ref4 => {\n      let {\n        message,\n        type = 'info'\n      } = _ref4;\n      dispatch({\n        type: 'announce',\n        payload: {\n          message,\n          type,\n          level: 'assertive'\n        }\n      });\n    },\n    initialized: true\n  }), []);\n  // Don't create additional LiveLogContext.Providers.\n  const context = windowIsAvailable ? window.cosmos.liveLogContext ?? LiveLogContext : LiveLogContext;\n  const priorCtx = useContext(context);\n  if (priorCtx.initialized) {\n    return _jsx(context.Provider, {\n      value: priorCtx,\n      children: children\n    });\n  }\n  return _jsxs(context.Provider, {\n    value: providerValue,\n    children: [children, _jsxs(StyledLog, {\n      role: 'log',\n      \"aria-relevant\": 'additions',\n      children: [_jsx(\"h6\", {\n        children: t('polite_announcements')\n      }), state.politeMessages.map(_ref5 => {\n        let {\n          message,\n          id\n        } = _ref5;\n        return _jsx(\"p\", {\n          children: message\n        }, id);\n      })]\n    }), _jsxs(StyledLog, {\n      role: 'log',\n      \"aria-live\": 'assertive',\n      \"aria-relevant\": 'additions',\n      children: [_jsx(\"h6\", {\n        children: t('assertive_announcements')\n      }), state.assertiveMessages.map(_ref6 => {\n        let {\n          message,\n          id\n        } = _ref6;\n        return _jsx(\"p\", {\n          children: message\n        }, id);\n      })]\n    })]\n  });\n};\nexport default LiveLog;","map":{"version":3,"names":["useEffect","useContext","useReducer","useMemo","createUID","windowIsAvailable","useI18n","StyledLog","LiveLogContext","reducer","state","action","type","message","payload","messageType","announceMessage","includes","suppressedTypes","id","level","assertiveMessages","politeMessages","maxLength","trimPolite","length","trimAssertive","slice","LiveLog","_ref","children","t","dispatch","timeout","setTimeout","clearTimeout","providerValue","announce","_ref2","assertive","announcePolite","_ref3","announceAssertive","_ref4","initialized","context","window","cosmos","liveLogContext","priorCtx","_jsx","Provider","value","_jsxs","role","map","_ref5","_ref6"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/components/LiveLog/LiveLog.tsx"],"sourcesContent":["import {\n  type FunctionComponent,\n  type Reducer,\n  type Context,\n  useEffect,\n  useContext,\n  useReducer,\n  useMemo\n} from 'react';\n\nimport { createUID, windowIsAvailable } from '../../utils';\nimport { useI18n } from '../../hooks';\n\nimport { StyledLog } from './LiveLog.styles';\nimport type {\n  LiveLogContextValue,\n  LiveLogProps,\n  LiveLogState,\n  ReducerAction\n} from './LiveLog.types';\nimport { LiveLogContext } from './Context';\n\ndeclare module '../../init' {\n  export interface CosmosGlobals {\n    liveLogContext?: Context<LiveLogContextValue>;\n  }\n}\n\nconst reducer = (state: LiveLogState, action: ReducerAction) => {\n  const type = action.type;\n\n  switch (type) {\n    case 'announce': {\n      const message = action.payload.message;\n      const messageType = action.payload.type;\n      const announceMessage =\n        ['alert', 'error', 'exception'].includes(messageType) ||\n        !state.suppressedTypes.includes(messageType);\n\n      if (announceMessage) {\n        const id = createUID();\n\n        if (action.payload.level === 'assertive') {\n          return {\n            ...state,\n            assertiveMessages: [...state.assertiveMessages, { message, id }]\n          };\n        }\n\n        return {\n          ...state,\n          politeMessages: [...state.politeMessages, { message, id }]\n        };\n      }\n\n      return state;\n    }\n    case 'setMaxLength': {\n      return {\n        ...state,\n        maxLength: action.payload > 0 ? action.payload : 50\n      };\n    }\n    case 'trimLength': {\n      const trimPolite = state.politeMessages.length > state.maxLength;\n      const trimAssertive = state.assertiveMessages.length > state.maxLength;\n\n      return {\n        ...state,\n        politeMessages: trimPolite\n          ? [...state.politeMessages.slice(-state.maxLength)]\n          : state.politeMessages,\n        assertiveMessages: trimAssertive\n          ? [...state.assertiveMessages.slice(-state.maxLength)]\n          : state.assertiveMessages\n      };\n    }\n    default:\n      return state;\n  }\n};\n\nconst LiveLog: FunctionComponent<LiveLogProps> = ({ children, maxLength = 50 }: LiveLogProps) => {\n  const t = useI18n();\n\n  const [state, dispatch] = useReducer<Reducer<LiveLogState, ReducerAction>>(reducer, {\n    maxLength,\n    politeMessages: [],\n    assertiveMessages: [],\n    suppressedTypes: [] // initialize via a11y settings once available.\n  });\n\n  // Manage log length.\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      dispatch({ type: 'trimLength' });\n    }, 1000);\n\n    return () => {\n      clearTimeout(timeout);\n    };\n  }, [state.assertiveMessages, state.politeMessages, state.maxLength]);\n\n  // Update max length\n  useEffect(() => {\n    dispatch({ type: 'setMaxLength', payload: maxLength });\n  }, [maxLength]);\n\n  const providerValue = useMemo<LiveLogContextValue>(\n    () => ({\n      announce: ({ message, type = 'info', assertive = false }) => {\n        dispatch({\n          type: 'announce',\n          payload: { message, type, level: assertive ? 'assertive' : 'polite' }\n        });\n      },\n      announcePolite: ({ message, type = 'info' }) => {\n        dispatch({ type: 'announce', payload: { message, type, level: 'polite' } });\n      },\n      announceAssertive: ({ message, type = 'info' }) => {\n        dispatch({ type: 'announce', payload: { message, type, level: 'assertive' } });\n      },\n      initialized: true\n    }),\n    []\n  );\n\n  // Don't create additional LiveLogContext.Providers.\n  const context = windowIsAvailable\n    ? window.cosmos.liveLogContext ?? LiveLogContext\n    : LiveLogContext;\n  const priorCtx = useContext(context);\n  if (priorCtx.initialized) {\n    return <context.Provider value={priorCtx}>{children}</context.Provider>;\n  }\n\n  return (\n    <context.Provider value={providerValue}>\n      {children}\n\n      <StyledLog role='log' aria-relevant='additions'>\n        <h6>{t('polite_announcements')}</h6>\n        {state.politeMessages.map(({ message, id }) => (\n          <p key={id}>{message}</p>\n        ))}\n      </StyledLog>\n\n      <StyledLog role='log' aria-live='assertive' aria-relevant='additions'>\n        <h6>{t('assertive_announcements')}</h6>\n        {state.assertiveMessages.map(({ message, id }) => (\n          <p key={id}>{message}</p>\n        ))}\n      </StyledLog>\n    </context.Provider>\n  );\n};\n\nexport default LiveLog;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}