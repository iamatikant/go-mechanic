{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useEffect, useState, useCallback, forwardRef } from 'react';\nimport styled, { css } from 'styled-components';\nimport { defaultThemeProp } from '../../theme';\nimport { reflow } from '../../utils';\nimport Flex from '../Flex';\nimport { useConsolidatedRef } from '../../hooks';\nconst transitionSpeedToTheme = {\n  slow: 2,\n  medium: 1,\n  fast: 0.5,\n  none: 0\n};\nexport const StyledBackdrop = styled.div(props => {\n  const {\n    theme: {\n      base\n    }\n  } = props;\n  const {\n    opacity,\n    alpha,\n    variant,\n    position\n  } = props;\n  const transitionDuration = `max(calc(${transitionSpeedToTheme[props.transitionSpeed]} * ${base.animation.speed}), 1ms)`;\n  return css`\n    position: ${position};\n    z-index: ${position === 'fixed' ? base['z-index'].backdrop : base['z-index'].popover + 1};\n    top: 0;\n    left: 0;\n    height: 100%;\n    width: 100%;\n    border-radius: inherit;\n    opacity: ${opacity};\n    transition-property: opacity;\n    transition-timing-function: ${props.theme.base.animation.timing.ease};\n    /* stylelint-disable declaration-block-no-duplicate-properties */\n    transition-duration: 1ms;\n    transition-duration: ${transitionDuration};\n    /* stylelint-enable declaration-block-no-duplicate-properties */\n\n    ${variant === 'dark' && css`\n      background: rgba(0, 0, 0, ${alpha});\n    `}\n\n    ${variant === 'light' && css`\n      background: rgba(255, 255, 255, ${alpha});\n    `}\n  `;\n});\nStyledBackdrop.defaultProps = defaultThemeProp;\nconst Backdrop = forwardRef((props, ref) => {\n  const {\n    children,\n    container,\n    open = false,\n    variant = 'dark',\n    transitionSpeed = 'medium',\n    alpha = 0.6,\n    position = 'fixed',\n    onBeforeTransitionIn,\n    onAfterTransitionIn,\n    onBeforeTransitionOut,\n    onAfterTransitionOut,\n    ...restProps\n  } = props;\n  const cRef = useConsolidatedRef(ref);\n  const [state, setState] = useState('closed');\n  const onTransitionEnd = useCallback(e => {\n    if (e.propertyName !== 'opacity' || e.target !== e.currentTarget) return;\n    let nextState;\n    if (state === 'closing') {\n      nextState = 'closed';\n      onAfterTransitionOut?.();\n    } else {\n      nextState = 'open';\n      onAfterTransitionIn?.();\n    }\n    setState(nextState);\n  }, [state, onAfterTransitionOut, onAfterTransitionIn]);\n  useEffect(() => {\n    if (open) {\n      if (state === 'closed' || state === 'closing') {\n        onBeforeTransitionIn?.();\n        reflow();\n        setState('opening');\n      }\n    } else if (state === 'open' || state === 'opening') {\n      onBeforeTransitionOut?.();\n      setState('closing');\n    }\n  }, [open]);\n  // Using a separate effect instead of combined logic above as it seems more intuitive to mentally manage.\n  useEffect(() => {\n    if (!cRef.current) return;\n    const opacity = window.getComputedStyle(cRef.current).opacity;\n    // If the opacity is already at the destination value, sync the state value.\n    if (state === 'closing' && opacity === '0') {\n      // Since the transition never ran, we have to pretend it did and call the callback.\n      // TODO: This maybe can be fixed with the animation api\n      onAfterTransitionOut?.();\n      setState('closed');\n    }\n    if (state === 'opening' && opacity === '1') {\n      // ditto, see above...\n      onAfterTransitionIn?.();\n      setState('open');\n    }\n  }, [state]);\n  return !open && state === 'closed' ? null : _jsx(Flex, {\n    container: {\n      justify: 'center',\n      alignItems: 'center',\n      ...container\n    },\n    as: StyledBackdrop,\n    transitionSpeed: transitionSpeed,\n    opacity: state === 'opening' || state === 'open' ? 1 : 0,\n    alpha: alpha,\n    variant: variant,\n    position: position,\n    onTransitionEnd: onTransitionEnd,\n    ref: cRef,\n    ...restProps,\n    children: children\n  });\n});\nexport default Backdrop;","map":{"version":3,"names":["useEffect","useState","useCallback","forwardRef","styled","css","defaultThemeProp","reflow","Flex","useConsolidatedRef","transitionSpeedToTheme","slow","medium","fast","none","StyledBackdrop","div","props","theme","base","opacity","alpha","variant","position","transitionDuration","transitionSpeed","animation","speed","backdrop","popover","timing","ease","defaultProps","Backdrop","ref","children","container","open","onBeforeTransitionIn","onAfterTransitionIn","onBeforeTransitionOut","onAfterTransitionOut","restProps","cRef","state","setState","onTransitionEnd","e","propertyName","target","currentTarget","nextState","current","window","getComputedStyle","_jsx","justify","alignItems","as"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/components/Backdrop/Backdrop.tsx"],"sourcesContent":["import {\n  FunctionComponent,\n  ReactNode,\n  useEffect,\n  useState,\n  useCallback,\n  forwardRef,\n  Ref,\n  MouseEvent,\n  PropsWithoutRef\n} from 'react';\nimport styled, { css } from 'styled-components';\n\nimport { defaultThemeProp } from '../../theme';\nimport { reflow } from '../../utils';\nimport { BaseProps, PropsWithDefaults, ForwardProps } from '../../types';\nimport Flex, { FlexProps } from '../Flex';\nimport { useConsolidatedRef } from '../../hooks';\n\nexport interface BackdropProps extends BaseProps {\n  /**\n   * Opacity of the Backdrop.\n   * @default 0.4\n   */\n  alpha?: number;\n  /** Any React Node to be rendered on top of the Backdrop component. */\n  children?: ReactNode;\n  /** Props passed to Flex container. */\n  container?: Exclude<FlexProps['container'], boolean>;\n  /**\n   * Toggles visibility of Backdrop.\n   * @default false\n   */\n  open?: boolean;\n  /**\n   * Determines the color of the Backdrop.\n   * @default 'dark'\n   */\n  variant?: 'dark' | 'light';\n  /**\n   * Transition speed of Backdrop animation.\n   * @default 'medium'\n   */\n  transitionSpeed?: 'slow' | 'medium' | 'fast' | 'none';\n  /**\n   * The position of the Backdrop.\n   * @default 'fixed'\n   */\n  position?: 'absolute' | 'fixed';\n  /** Accepts a callback function for click event on Backdrop. */\n  onClick?: (e: MouseEvent<HTMLDivElement>) => void;\n  /** Accepts a callback that gets invoked before opening Backdrop. */\n  onBeforeTransitionIn?: () => void;\n  /** Accepts a callback that gets invoked after opening Backdrop. */\n  onAfterTransitionIn?: () => void;\n  /** Accepts a callback that gets invoked before closing Backdrop. */\n  onBeforeTransitionOut?: () => void;\n  /** Accepts a callback that gets invoked after closing Backdrop */\n  onAfterTransitionOut?: () => void;\n  /** Ref for a Backdrop's root div element. */\n  ref?: Ref<HTMLDivElement>;\n}\n\ntype BackdropPropsWithDefaults = PropsWithDefaults<\n  BackdropProps,\n  'open' | 'transitionSpeed' | 'alpha' | 'position'\n>;\n\nconst transitionSpeedToTheme = {\n  slow: 2,\n  medium: 1,\n  fast: 0.5,\n  none: 0\n} as const;\n\nexport const StyledBackdrop = styled.div<BackdropPropsWithDefaults & { opacity: 0 | 1 }>(props => {\n  const {\n    theme: { base }\n  } = props;\n  const { opacity, alpha, variant, position } = props;\n  const transitionDuration = `max(calc(${transitionSpeedToTheme[props.transitionSpeed]} * ${\n    base.animation.speed\n  }), 1ms)`;\n\n  return css`\n    position: ${position};\n    z-index: ${position === 'fixed' ? base['z-index'].backdrop : base['z-index'].popover + 1};\n    top: 0;\n    left: 0;\n    height: 100%;\n    width: 100%;\n    border-radius: inherit;\n    opacity: ${opacity};\n    transition-property: opacity;\n    transition-timing-function: ${props.theme.base.animation.timing.ease};\n    /* stylelint-disable declaration-block-no-duplicate-properties */\n    transition-duration: 1ms;\n    transition-duration: ${transitionDuration};\n    /* stylelint-enable declaration-block-no-duplicate-properties */\n\n    ${variant === 'dark' &&\n    css`\n      background: rgba(0, 0, 0, ${alpha});\n    `}\n\n    ${variant === 'light' &&\n    css`\n      background: rgba(255, 255, 255, ${alpha});\n    `}\n  `;\n});\n\nStyledBackdrop.defaultProps = defaultThemeProp;\n\ntype State = 'closed' | 'opening' | 'open' | 'closing';\n\nconst Backdrop: FunctionComponent<BackdropProps & ForwardProps> = forwardRef(\n  (props: PropsWithoutRef<BackdropProps>, ref: BackdropProps['ref']) => {\n    const {\n      children,\n      container,\n      open = false,\n      variant = 'dark',\n      transitionSpeed = 'medium',\n      alpha = 0.6,\n      position = 'fixed',\n      onBeforeTransitionIn,\n      onAfterTransitionIn,\n      onBeforeTransitionOut,\n      onAfterTransitionOut,\n      ...restProps\n    } = props;\n\n    const cRef = useConsolidatedRef(ref);\n\n    const [state, setState] = useState<State>('closed');\n\n    const onTransitionEnd = useCallback(\n      (e: TransitionEvent) => {\n        if (e.propertyName !== 'opacity' || e.target !== e.currentTarget) return;\n        let nextState: State;\n\n        if (state === 'closing') {\n          nextState = 'closed';\n          onAfterTransitionOut?.();\n        } else {\n          nextState = 'open';\n          onAfterTransitionIn?.();\n        }\n\n        setState(nextState);\n      },\n      [state, onAfterTransitionOut, onAfterTransitionIn]\n    );\n\n    useEffect(() => {\n      if (open) {\n        if (state === 'closed' || state === 'closing') {\n          onBeforeTransitionIn?.();\n          reflow();\n          setState('opening');\n        }\n      } else if (state === 'open' || state === 'opening') {\n        onBeforeTransitionOut?.();\n        setState('closing');\n      }\n    }, [open]);\n\n    // Using a separate effect instead of combined logic above as it seems more intuitive to mentally manage.\n    useEffect(() => {\n      if (!cRef.current) return;\n      const opacity = window.getComputedStyle(cRef.current).opacity;\n      // If the opacity is already at the destination value, sync the state value.\n      if (state === 'closing' && opacity === '0') {\n        // Since the transition never ran, we have to pretend it did and call the callback.\n        // TODO: This maybe can be fixed with the animation api\n        onAfterTransitionOut?.();\n        setState('closed');\n      }\n      if (state === 'opening' && opacity === '1') {\n        // ditto, see above...\n        onAfterTransitionIn?.();\n        setState('open');\n      }\n    }, [state]);\n\n    return !open && state === 'closed' ? null : (\n      <Flex\n        container={{ justify: 'center', alignItems: 'center', ...container }}\n        as={StyledBackdrop}\n        transitionSpeed={transitionSpeed}\n        opacity={state === 'opening' || state === 'open' ? 1 : 0}\n        alpha={alpha}\n        variant={variant}\n        position={position}\n        onTransitionEnd={onTransitionEnd}\n        ref={cRef}\n        {...restProps}\n      >\n        {children}\n      </Flex>\n    );\n  }\n);\n\nexport default Backdrop;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}