{"ast":null,"code":"import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useCallback, useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { useI18n, useUID } from '../../../../hooks';\nimport StyledInput from '../../../Input/Input.styles';\nimport { StyledSelect } from '../../../Select/Select';\nimport { msToTimeUnit, timeUnitToMs } from '../utils';\nimport StyledDateTime from '../DateTime.styles';\nimport { StyledFormControl } from '../../../FormControl';\nimport Flex from '../../../Flex';\nimport Input from '../../../Input';\nimport Select, { Option } from '../../../Select';\nimport { defaultThemeProp } from '../../../../theme';\nimport { Format } from './DurationInput.types';\nexport const StyledNumberUnit = styled(StyledDateTime)`\n  padding: 0;\n  border: 0;\n  height: auto;\n  &:focus-within:not([readonly]):not([disabled]) {\n    box-shadow: none;\n  }\n  > ${StyledInput} {\n    background-color: transparent;\n    border-start-end-radius: 0;\n    border-end-end-radius: 0;\n  }\n  > ${StyledSelect} {\n    max-width: max-content;\n    margin-inline-start: -0.0625rem;\n    background-color: transparent;\n    border-start-start-radius: 0;\n    border-end-start-radius: 0;\n  }\n  &[readonly] > ${StyledSelect} {\n    color: currentcolor;\n    opacity: 1;\n    cursor: default;\n  }\n  > ${StyledInput}:hover:not([readonly]):not([disabled]) + ${StyledSelect} {\n    border-inline-start: transparent;\n  }\n`;\nStyledNumberUnit.defaultProps = defaultThemeProp;\nconst OPTIONS = [Format.Seconds, Format.Minutes, Format.Hours, Format.Days];\nconst NumberUnit = props => {\n  const {\n    defaultValue = 0,\n    value,\n    onChange,\n    format = Format.Seconds,\n    onSelect,\n    disabled,\n    readOnly,\n    required,\n    status,\n    autoFocus,\n    ...restProps\n  } = props;\n  const t = useI18n();\n  const [valueInMs, setValueInMs] = useState(value ?? defaultValue);\n  const [unit, setUnit] = useState(format);\n  useEffect(() => {\n    setUnit(format);\n  }, [format]);\n  useEffect(() => {\n    if (value !== undefined) {\n      setValueInMs(value);\n    }\n  }, [value]);\n  const onNumberInputChange = useCallback(ev => {\n    const inputValue = Number(ev.target.value);\n    if (Number.isNaN(inputValue) || inputValue < 0) return;\n    setValueInMs(timeUnitToMs(inputValue, unit));\n  }, [unit]);\n  const onInputBlur = useCallback(() => {\n    if (!disabled && !readOnly && onChange) {\n      onChange(valueInMs);\n    }\n  }, [valueInMs, onChange]);\n  const onInputKeyDown = useCallback(ev => {\n    if (['e', 'E', '+', '-', ',', '.'].includes(ev.key)) ev.preventDefault();\n  }, []);\n  const onSelectChange = useCallback(ev => {\n    const selectedValue = ev.target.value;\n    setUnit(selectedValue);\n    onSelect?.(selectedValue);\n  }, [onSelect]);\n  const unitOptions = OPTIONS.map(option => _jsx(Option, {\n    value: option,\n    children: t(`${option}_text`)\n  }, option));\n  const id = useUID();\n  return _jsxs(Flex, {\n    as: StyledNumberUnit,\n    forwardedAs: StyledFormControl,\n    container: {\n      alignItems: 'center',\n      wrap: 'nowrap'\n    },\n    status: status,\n    readOnly: readOnly,\n    disabled: disabled,\n    ...restProps,\n    children: [_jsx(Input, {\n      type: 'number',\n      placeholder: '0',\n      \"aria-labelledby\": id,\n      value: msToTimeUnit(valueInMs, unit),\n      onChange: onNumberInputChange,\n      onBlur: onInputBlur,\n      onKeyDown: onInputKeyDown,\n      required: required,\n      status: status,\n      readOnly: readOnly,\n      disabled: disabled,\n      autoFocus: autoFocus\n    }, 'number'), _jsx(Select, {\n      id: id,\n      \"aria-label\": t('time_unit'),\n      value: unit,\n      required: required,\n      status: status,\n      readOnly: readOnly,\n      disabled: disabled || readOnly,\n      onChange: onSelectChange,\n      children: unitOptions\n    }, 'unit')]\n  });\n};\nexport default NumberUnit;","map":{"version":3,"names":["useCallback","useEffect","useState","styled","useI18n","useUID","StyledInput","StyledSelect","msToTimeUnit","timeUnitToMs","StyledDateTime","StyledFormControl","Flex","Input","Select","Option","defaultThemeProp","Format","StyledNumberUnit","defaultProps","OPTIONS","Seconds","Minutes","Hours","Days","NumberUnit","props","defaultValue","value","onChange","format","onSelect","disabled","readOnly","required","status","autoFocus","restProps","t","valueInMs","setValueInMs","unit","setUnit","undefined","onNumberInputChange","ev","inputValue","Number","target","isNaN","onInputBlur","onInputKeyDown","includes","key","preventDefault","onSelectChange","selectedValue","unitOptions","map","option","_jsx","children","id","_jsxs","as","forwardedAs","container","alignItems","wrap","type","placeholder","onBlur","onKeyDown"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/components/DateTime/Input/Duration/NumberUnit.tsx"],"sourcesContent":["import { ChangeEvent, FC, KeyboardEvent, useCallback, useEffect, useState } from 'react';\nimport styled from 'styled-components';\n\nimport { TranslationPack } from '../../../../i18n';\nimport { useI18n, useUID } from '../../../../hooks';\nimport StyledInput from '../../../Input/Input.styles';\nimport { StyledSelect } from '../../../Select/Select';\nimport { ForwardProps } from '../../../../types';\nimport { msToTimeUnit, timeUnitToMs } from '../utils';\nimport StyledDateTime from '../DateTime.styles';\nimport { StyledFormControl } from '../../../FormControl';\nimport Flex from '../../../Flex';\nimport Input from '../../../Input';\nimport Select, { Option } from '../../../Select';\nimport { defaultThemeProp } from '../../../../theme';\n\nimport DurationInputProps, { Format } from './DurationInput.types';\n\nexport const StyledNumberUnit = styled(StyledDateTime)<DurationInputProps>`\n  padding: 0;\n  border: 0;\n  height: auto;\n  &:focus-within:not([readonly]):not([disabled]) {\n    box-shadow: none;\n  }\n  > ${StyledInput} {\n    background-color: transparent;\n    border-start-end-radius: 0;\n    border-end-end-radius: 0;\n  }\n  > ${StyledSelect} {\n    max-width: max-content;\n    margin-inline-start: -0.0625rem;\n    background-color: transparent;\n    border-start-start-radius: 0;\n    border-end-start-radius: 0;\n  }\n  &[readonly] > ${StyledSelect} {\n    color: currentcolor;\n    opacity: 1;\n    cursor: default;\n  }\n  > ${StyledInput}:hover:not([readonly]):not([disabled]) + ${StyledSelect} {\n    border-inline-start: transparent;\n  }\n`;\n\nStyledNumberUnit.defaultProps = defaultThemeProp;\n\ntype NumberUnitProps = DurationInputProps & ForwardProps;\n\nconst OPTIONS = [Format.Seconds, Format.Minutes, Format.Hours, Format.Days];\n\nconst NumberUnit: FC<NumberUnitProps> = (props: DurationInputProps) => {\n  const {\n    defaultValue = 0,\n    value,\n    onChange,\n    format = Format.Seconds,\n    onSelect,\n    disabled,\n    readOnly,\n    required,\n    status,\n    autoFocus,\n    ...restProps\n  } = props;\n  const t = useI18n();\n  const [valueInMs, setValueInMs] = useState<number>(value ?? defaultValue);\n  const [unit, setUnit] = useState<Format>(format);\n\n  useEffect(() => {\n    setUnit(format);\n  }, [format]);\n\n  useEffect(() => {\n    if (value !== undefined) {\n      setValueInMs(value);\n    }\n  }, [value]);\n\n  const onNumberInputChange = useCallback(\n    (ev: ChangeEvent<HTMLInputElement>) => {\n      const inputValue = Number(ev.target.value);\n      if (Number.isNaN(inputValue) || inputValue < 0) return;\n      setValueInMs(timeUnitToMs(inputValue, unit));\n    },\n    [unit]\n  );\n\n  const onInputBlur = useCallback(() => {\n    if (!disabled && !readOnly && onChange) {\n      onChange(valueInMs);\n    }\n  }, [valueInMs, onChange]);\n\n  const onInputKeyDown = useCallback((ev: KeyboardEvent<HTMLInputElement>) => {\n    if (['e', 'E', '+', '-', ',', '.'].includes(ev.key)) ev.preventDefault();\n  }, []);\n\n  const onSelectChange = useCallback(\n    (ev: ChangeEvent<HTMLSelectElement>) => {\n      const selectedValue = ev.target.value as Format;\n      setUnit(selectedValue);\n      onSelect?.(selectedValue);\n    },\n    [onSelect]\n  );\n\n  const unitOptions = OPTIONS.map(option => (\n    <Option key={option} value={option}>\n      {t(`${option}_text` as keyof TranslationPack)}\n    </Option>\n  ));\n\n  const id = useUID();\n\n  return (\n    <Flex\n      as={StyledNumberUnit}\n      forwardedAs={StyledFormControl}\n      container={{ alignItems: 'center', wrap: 'nowrap' }}\n      status={status}\n      readOnly={readOnly}\n      disabled={disabled}\n      {...restProps}\n    >\n      <Input\n        type='number'\n        key='number'\n        placeholder='0'\n        aria-labelledby={id}\n        value={msToTimeUnit(valueInMs, unit) as any}\n        onChange={onNumberInputChange}\n        onBlur={onInputBlur}\n        onKeyDown={onInputKeyDown}\n        required={required}\n        status={status}\n        readOnly={readOnly}\n        disabled={disabled}\n        autoFocus={autoFocus}\n      />\n      <Select\n        id={id}\n        aria-label={t('time_unit')}\n        key='unit'\n        value={unit}\n        required={required}\n        status={status}\n        readOnly={readOnly}\n        disabled={disabled || readOnly}\n        onChange={onSelectChange}\n      >\n        {unitOptions}\n      </Select>\n    </Flex>\n  );\n};\n\nexport default NumberUnit;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}