{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { forwardRef, useState, useEffect, useMemo } from 'react';\nimport styled, { css } from 'styled-components';\nimport dompurify from 'dompurify';\nimport { StyledPopover } from '../Popover';\nimport { defaultThemeProp } from '../../theme';\nimport { calculateFontSize } from '../../styles';\nimport { sameOrigin } from '../../utils';\nexport const listStyles = css`\n  ul,\n  ol {\n    padding-inline-start: 2.5rem;\n  }\n\n  li {\n    margin: 0.5rem 0;\n  }\n\n  ul li {\n    ul {\n      margin-inline-start: 1rem;\n      list-style-type: circle;\n    }\n\n    ul ul {\n      margin-inline-start: 2rem;\n      list-style-type: square;\n    }\n\n    ul ul ul {\n      margin-inline-start: 3rem;\n      list-style-type: disc;\n    }\n  }\n\n  ol li {\n    ol {\n      margin-inline-start: 1rem;\n      list-style-type: lower-alpha;\n    }\n\n    ol ol {\n      margin-inline-start: 2rem;\n      list-style-type: lower-roman;\n    }\n\n    ol ol ol {\n      margin-inline-start: 3rem;\n      list-style-type: decimal;\n    }\n  }\n`;\nexport const getTableStyles = theme => css`\n  border-collapse: collapse;\n\n  td {\n    border: 0.0625rem solid ${theme.base.palette['border-line']};\n    min-width: 6.25rem;\n  }\n\n  tr:first-child {\n    td:first-child {\n      border-top-left-radius: 0.125rem;\n    }\n\n    td:last-child {\n      border-top-right-radius: 0.125rem;\n    }\n  }\n\n  tr:last-child {\n    td:first-child {\n      border-bottom-left-radius: 0.125rem;\n    }\n\n    td:last-child {\n      border-bottom-right-radius: 0.125rem;\n    }\n  }\n`;\nexport const getHtmlStyles = theme => {\n  const {\n    base: {\n      'font-size': baseFontSize,\n      'font-scale': baseFontScale,\n      palette\n    },\n    components: {\n      text\n    }\n  } = theme;\n  const fontSize = calculateFontSize(baseFontSize, baseFontScale);\n  return `\n    ${listStyles}\n    table {\n      ${getTableStyles(theme)}\n    }\n    img {\n      max-width: 100%;\n      height: auto;\n      border-radius: 0.25rem;\n    }\n    a {\n      color: ${palette.interactive};\n    }\n    pre {\n      white-space: break-spaces;\n    }\n    p {\n      min-height: ${fontSize[text.primary['font-size']]};\n    }\n    h1 {\n      font-size: ${fontSize[text.h1['font-size']]};\n      font-weight: ${text.h1['font-weight']};\n      min-height: ${fontSize[text.h1['font-size']]};\n    }\n    h2 {\n      font-size: ${fontSize[text.h2['font-size']]};\n      font-weight: ${text.h2['font-weight']};\n      min-height: ${fontSize[text.h2['font-size']]};\n    }\n    h3 {\n      font-size: ${fontSize[text.h3['font-size']]};\n      font-weight: ${text.h3['font-weight']};\n      min-height: ${fontSize[text.h3['font-size']]};\n    }\n    h4 {\n      font-size: ${fontSize[text.h4['font-size']]};\n      font-weight: ${text.h4['font-weight']};\n      min-height: ${fontSize[text.h4['font-size']]};\n    }\n    h5 {\n      font-size: ${fontSize[text.h5['font-size']]};\n      font-weight: ${text.h5['font-weight']};\n      min-height: ${fontSize[text.h5['font-size']]};\n    }\n    h6 {\n      font-size: ${fontSize[text.h6['font-size']]};\n      font-weight: ${text.h6['font-weight']};\n      min-height: ${fontSize[text.h6['font-size']]};\n    }\n  `;\n};\nexport const StyledHTML = styled.div(_ref => {\n  let {\n    theme\n  } = _ref;\n  return css`\n    width: 100%;\n    overflow-x: auto;\n    overflow-wrap: break-word;\n    ${getHtmlStyles(theme)}\n\n    ${StyledPopover} ul {\n      ul {\n        padding-inline-start: 0;\n      }\n      ol {\n        padding-inline-start: 0;\n      }\n    }\n\n    ${StyledPopover} li {\n      margin: 0;\n    }\n  `;\n});\nStyledHTML.defaultProps = defaultThemeProp;\nconst targetBlankSet = new WeakSet();\ndompurify.addHook('beforeSanitizeAttributes', node => {\n  // Can be passed text nodes\n  if (!(node instanceof HTMLElement || node instanceof SVGElement)) return;\n  node.removeAttribute('class');\n  if (node.tagName === 'A' && node.hasAttribute('href') && node.getAttribute('target') === '_blank') {\n    targetBlankSet.add(node);\n  }\n});\ndompurify.addHook('afterSanitizeAttributes', node => {\n  if (node.tagName === 'A' && node.hasAttribute('href')) {\n    const href = node.getAttribute('href');\n    let fullURL;\n    try {\n      fullURL = new URL(href, window.location.href);\n    } catch (e) {\n      return;\n    }\n    if (!sameOrigin(window.location, fullURL)) {\n      node.setAttribute('target', '_blank');\n      node.setAttribute('rel', 'noopener');\n    } else if (targetBlankSet.has(node)) {\n      node.setAttribute('target', '_blank');\n      targetBlankSet.delete(node);\n    }\n  }\n});\nconst HTML = forwardRef((_ref2, ref) => {\n  let {\n    content,\n    customTags,\n    ...restProps\n  } = _ref2;\n  const [mounted, setMounted] = useState(false);\n  const sanitizedHtml = useMemo(() => {\n    // Don't render content on the server at all.\n    return mounted ? dompurify.sanitize(content, {\n      CUSTOM_ELEMENT_HANDLING: {\n        tagNameCheck: customTags ? tagName => customTags.includes(tagName) : null\n      }\n    }) : '';\n  }, [content, customTags, mounted]);\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n  return _jsx(StyledHTML, {\n    ...restProps,\n    dangerouslySetInnerHTML: {\n      __html: sanitizedHtml\n    },\n    ref: ref\n  });\n});\nexport default HTML;","map":{"version":3,"names":["forwardRef","useState","useEffect","useMemo","styled","css","dompurify","StyledPopover","defaultThemeProp","calculateFontSize","sameOrigin","listStyles","getTableStyles","theme","base","palette","getHtmlStyles","baseFontSize","baseFontScale","components","text","fontSize","interactive","primary","h1","h2","h3","h4","h5","h6","StyledHTML","div","_ref","defaultProps","targetBlankSet","WeakSet","addHook","node","HTMLElement","SVGElement","removeAttribute","tagName","hasAttribute","getAttribute","add","href","fullURL","URL","window","location","e","setAttribute","has","delete","HTML","_ref2","ref","content","customTags","restProps","mounted","setMounted","sanitizedHtml","sanitize","CUSTOM_ELEMENT_HANDLING","tagNameCheck","includes","_jsx","dangerouslySetInnerHTML","__html"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/components/HTML/HTML.tsx"],"sourcesContent":["import {\n  forwardRef,\n  FunctionComponent,\n  PropsWithoutRef,\n  Ref,\n  useState,\n  useEffect,\n  useMemo\n} from 'react';\nimport styled, { css, DefaultTheme } from 'styled-components';\nimport dompurify from 'dompurify';\n\nimport { StyledPopover } from '../Popover';\nimport { defaultThemeProp } from '../../theme';\nimport { calculateFontSize, FontSize } from '../../styles';\nimport { BaseProps, ForwardProps, NoChildrenProp } from '../../types';\nimport { sameOrigin } from '../../utils';\n\nexport interface HTMLProps extends BaseProps, NoChildrenProp {\n  content: string;\n  customTags?: string[];\n  ref?: Ref<HTMLDivElement>;\n}\n\nexport const listStyles = css`\n  ul,\n  ol {\n    padding-inline-start: 2.5rem;\n  }\n\n  li {\n    margin: 0.5rem 0;\n  }\n\n  ul li {\n    ul {\n      margin-inline-start: 1rem;\n      list-style-type: circle;\n    }\n\n    ul ul {\n      margin-inline-start: 2rem;\n      list-style-type: square;\n    }\n\n    ul ul ul {\n      margin-inline-start: 3rem;\n      list-style-type: disc;\n    }\n  }\n\n  ol li {\n    ol {\n      margin-inline-start: 1rem;\n      list-style-type: lower-alpha;\n    }\n\n    ol ol {\n      margin-inline-start: 2rem;\n      list-style-type: lower-roman;\n    }\n\n    ol ol ol {\n      margin-inline-start: 3rem;\n      list-style-type: decimal;\n    }\n  }\n`;\n\nexport const getTableStyles = (theme: DefaultTheme) => css`\n  border-collapse: collapse;\n\n  td {\n    border: 0.0625rem solid ${theme.base.palette['border-line']};\n    min-width: 6.25rem;\n  }\n\n  tr:first-child {\n    td:first-child {\n      border-top-left-radius: 0.125rem;\n    }\n\n    td:last-child {\n      border-top-right-radius: 0.125rem;\n    }\n  }\n\n  tr:last-child {\n    td:first-child {\n      border-bottom-left-radius: 0.125rem;\n    }\n\n    td:last-child {\n      border-bottom-right-radius: 0.125rem;\n    }\n  }\n`;\n\nexport const getHtmlStyles = (theme: DefaultTheme) => {\n  const {\n    base: { 'font-size': baseFontSize, 'font-scale': baseFontScale, palette },\n    components: { text }\n  } = theme;\n  const fontSize = calculateFontSize(baseFontSize, baseFontScale);\n  return `\n    ${listStyles}\n    table {\n      ${getTableStyles(theme)}\n    }\n    img {\n      max-width: 100%;\n      height: auto;\n      border-radius: 0.25rem;\n    }\n    a {\n      color: ${palette.interactive};\n    }\n    pre {\n      white-space: break-spaces;\n    }\n    p {\n      min-height: ${fontSize[text.primary['font-size'] as FontSize]};\n    }\n    h1 {\n      font-size: ${fontSize[text.h1['font-size'] as FontSize]};\n      font-weight: ${text.h1['font-weight']};\n      min-height: ${fontSize[text.h1['font-size'] as FontSize]};\n    }\n    h2 {\n      font-size: ${fontSize[text.h2['font-size'] as FontSize]};\n      font-weight: ${text.h2['font-weight']};\n      min-height: ${fontSize[text.h2['font-size'] as FontSize]};\n    }\n    h3 {\n      font-size: ${fontSize[text.h3['font-size'] as FontSize]};\n      font-weight: ${text.h3['font-weight']};\n      min-height: ${fontSize[text.h3['font-size'] as FontSize]};\n    }\n    h4 {\n      font-size: ${fontSize[text.h4['font-size'] as FontSize]};\n      font-weight: ${text.h4['font-weight']};\n      min-height: ${fontSize[text.h4['font-size'] as FontSize]};\n    }\n    h5 {\n      font-size: ${fontSize[text.h5['font-size'] as FontSize]};\n      font-weight: ${text.h5['font-weight']};\n      min-height: ${fontSize[text.h5['font-size'] as FontSize]};\n    }\n    h6 {\n      font-size: ${fontSize[text.h6['font-size'] as FontSize]};\n      font-weight: ${text.h6['font-weight']};\n      min-height: ${fontSize[text.h6['font-size'] as FontSize]};\n    }\n  `;\n};\n\nexport const StyledHTML = styled.div(({ theme }) => {\n  return css`\n    width: 100%;\n    overflow-x: auto;\n    overflow-wrap: break-word;\n    ${getHtmlStyles(theme)}\n\n    ${StyledPopover} ul {\n      ul {\n        padding-inline-start: 0;\n      }\n      ol {\n        padding-inline-start: 0;\n      }\n    }\n\n    ${StyledPopover} li {\n      margin: 0;\n    }\n  `;\n});\n\nStyledHTML.defaultProps = defaultThemeProp;\n\nconst targetBlankSet = new WeakSet<HTMLAnchorElement>();\n\ndompurify.addHook('beforeSanitizeAttributes', node => {\n  // Can be passed text nodes\n  if (!(node instanceof HTMLElement || node instanceof SVGElement)) return;\n\n  node.removeAttribute('class');\n\n  if (\n    node.tagName === 'A' &&\n    node.hasAttribute('href') &&\n    node.getAttribute('target') === '_blank'\n  ) {\n    targetBlankSet.add(node as HTMLAnchorElement);\n  }\n});\n\ndompurify.addHook('afterSanitizeAttributes', node => {\n  if (node.tagName === 'A' && node.hasAttribute('href')) {\n    const href = node.getAttribute('href')!;\n\n    let fullURL: URL;\n    try {\n      fullURL = new URL(href, window.location.href);\n    } catch (e) {\n      return;\n    }\n\n    if (!sameOrigin(window.location, fullURL)) {\n      node.setAttribute('target', '_blank');\n      node.setAttribute('rel', 'noopener');\n    } else if (targetBlankSet.has(node as HTMLAnchorElement)) {\n      node.setAttribute('target', '_blank');\n      targetBlankSet.delete(node as HTMLAnchorElement);\n    }\n  }\n});\n\nconst HTML: FunctionComponent<HTMLProps & ForwardProps> = forwardRef(\n  ({ content, customTags, ...restProps }: PropsWithoutRef<HTMLProps>, ref: HTMLProps['ref']) => {\n    const [mounted, setMounted] = useState(false);\n    const sanitizedHtml = useMemo(() => {\n      // Don't render content on the server at all.\n      return mounted\n        ? dompurify.sanitize(content, {\n            CUSTOM_ELEMENT_HANDLING: {\n              tagNameCheck: customTags ? tagName => customTags.includes(tagName) : null\n            }\n          })\n        : '';\n    }, [content, customTags, mounted]);\n\n    useEffect(() => {\n      setMounted(true);\n    }, []);\n\n    return (\n      <StyledHTML {...restProps} dangerouslySetInnerHTML={{ __html: sanitizedHtml }} ref={ref} />\n    );\n  }\n);\n\nexport default HTML;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}