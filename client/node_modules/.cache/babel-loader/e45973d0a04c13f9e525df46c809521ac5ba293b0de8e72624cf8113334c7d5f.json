{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { forwardRef, useState, useLayoutEffect, useCallback } from 'react';\nimport { useConsolidatedRef, usePrevious, useTheme } from '../../hooks';\nconst getScrollSize = (el, dimension) => {\n  if (!el) return '';\n  return dimension === 'height' ? `${el.scrollHeight}px` : `${el.scrollWidth}px`;\n};\nconst getStyle = props => {\n  const {\n    status,\n    dimension,\n    transitionSpeed,\n    transitionTimingFunction,\n    min,\n    max,\n    nullWhenCollapsed,\n    el\n  } = props;\n  const style = {};\n  let maxSize = max;\n  if (el && !max) {\n    maxSize = getScrollSize(el, dimension);\n  }\n  if (status === 'expanded' || status === 'collapsed') {\n    if (max || min) {\n      style[dimension] = status === 'expanded' ? maxSize : min || 0;\n      style[`overflow${dimension === 'width' ? 'X' : 'Y'}`] = 'hidden';\n    }\n    if (status === 'collapsed' && !nullWhenCollapsed && !min) {\n      style.display = 'none';\n    }\n  }\n  if (status === 'expanding' || status === 'collapsing') {\n    style[dimension] = status === 'expanding' ? maxSize : min || 0;\n    style.overflow = 'hidden';\n    style.transitionProperty = dimension;\n    style.transitionDuration = `max(${transitionSpeed}, 0.01ms)`;\n    style.transitionTimingFunction = transitionTimingFunction;\n  }\n  return style;\n};\nconst ExpandCollapse = forwardRef((props, refArg) => {\n  const {\n    base: {\n      animation: themeAnimation\n    }\n  } = useTheme();\n  const {\n    children,\n    dimension = 'height',\n    collapsed = false,\n    onBeforeExpand,\n    onAfterExpand,\n    onBeforeCollapse,\n    onAfterCollapse,\n    transitionSpeed = themeAnimation.speed,\n    min,\n    max,\n    nullWhenCollapsed = false,\n    as: Tag = 'div',\n    ...restProps\n  } = props;\n  const [status, setStatus] = useState(collapsed ? 'collapsed' : 'expanded');\n  const styleStateHook = useState();\n  const setStyle = styleStateHook[1];\n  let style = styleStateHook[0];\n  const previousStatus = usePrevious(status);\n  const ref = useConsolidatedRef(refArg);\n  const onTransitionEnd = useCallback(e => {\n    if (e.target !== ref.current || e.propertyName !== dimension) return;\n    setStatus(status === 'expanding' ? 'expanded' : 'collapsed');\n  }, [ref.current, status]);\n  useLayoutEffect(() => {\n    const wantsToCollapse = collapsed;\n    const wantsToExpand = !collapsed;\n    const canCollapse = ['expanded', 'expanding'].includes(status);\n    const canExpand = ['collapsed', 'collapsing'].includes(status);\n    if (wantsToExpand && canExpand) {\n      onBeforeExpand?.();\n      setStatus('expanding');\n    } else if (wantsToCollapse && canCollapse) {\n      onBeforeCollapse?.();\n      setStatus('collapsing');\n    }\n    if (status === 'expanded' && previousStatus !== 'expanded') {\n      onAfterExpand?.();\n    } else if (status === 'collapsed' && previousStatus !== 'collapsed') {\n      onAfterCollapse?.();\n    }\n    setStyle(getStyle({\n      dimension,\n      min,\n      max,\n      transitionSpeed,\n      nullWhenCollapsed,\n      status,\n      el: ref.current,\n      transitionTimingFunction: themeAnimation.timing.ease\n    }));\n  }, [collapsed, status, min, max]);\n  if (status !== previousStatus && ['expanded', 'collapsed'].includes(previousStatus)) {\n    style = getStyle({\n      dimension,\n      min,\n      max,\n      transitionSpeed,\n      nullWhenCollapsed,\n      status: status === 'expanding' ? 'collapsing' : 'expanding',\n      el: ref.current,\n      transitionTimingFunction: themeAnimation.timing.ease\n    });\n  }\n  return status === 'collapsed' && nullWhenCollapsed && !min ? null : _jsx(Tag, {\n    ref: ref,\n    onTransitionEnd: onTransitionEnd,\n    ...restProps,\n    style: style,\n    children: children\n  });\n});\nexport default ExpandCollapse;","map":{"version":3,"names":["forwardRef","useState","useLayoutEffect","useCallback","useConsolidatedRef","usePrevious","useTheme","getScrollSize","el","dimension","scrollHeight","scrollWidth","getStyle","props","status","transitionSpeed","transitionTimingFunction","min","max","nullWhenCollapsed","style","maxSize","display","overflow","transitionProperty","transitionDuration","ExpandCollapse","refArg","base","animation","themeAnimation","children","collapsed","onBeforeExpand","onAfterExpand","onBeforeCollapse","onAfterCollapse","speed","as","Tag","restProps","setStatus","styleStateHook","setStyle","previousStatus","ref","onTransitionEnd","e","target","current","propertyName","wantsToCollapse","wantsToExpand","canCollapse","includes","canExpand","timing","ease","_jsx"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/components/ExpandCollapse/ExpandCollapse.tsx"],"sourcesContent":["import {\n  FunctionComponent,\n  Ref,\n  forwardRef,\n  ReactNode,\n  PropsWithoutRef,\n  useState,\n  useLayoutEffect,\n  useCallback,\n  CSSProperties\n} from 'react';\n\nimport { ForwardProps, BaseProps, AsProp, PropsWithDefaults } from '../../types';\nimport { useConsolidatedRef, usePrevious, useTheme } from '../../hooks';\n\nexport interface ExpandCollapseProps extends AsProp, BaseProps {\n  /** Content to expand/collapse. */\n  children?: ReactNode;\n  /**\n   * If true,the content will be hidden.\n   * @default false\n   */\n  collapsed?: boolean;\n  /**\n   * Used to determine the transition property.\n   * @default 'height'\n   */\n  dimension?: 'height' | 'width';\n  /** Minimum height/width to collapse to. This will set the starting collapsed size as well. */\n  min?: string;\n  /** Maximum height/width to expand to. Expanded state will expanded up until, but not beyond, the natural height/width of the element. */\n  max?: string;\n  /** Callback fired after content collapsed. */\n  onAfterCollapse?: () => void;\n  /** Callback fired after content expanded. */\n  onAfterExpand?: () => void;\n  /** Callback fired before content collapsed. */\n  onBeforeCollapse?: () => void;\n  /** Callback fired before content expanded. */\n  onBeforeExpand?: () => void;\n  /**\n   * Determine the speed of animation. This value comes from `theme.base.animation.speed`.\n   * @default '0.25s'\n   */\n  transitionSpeed?: string;\n  /**\n   * If true, removes the component from the real DOM when collapsed. For full virtual DOM unmount(if necessary), perform at a parent level.\n   * @default false\n   */\n  nullWhenCollapsed?: boolean;\n}\n\ntype ExpandCollapsePropsWithDefaults = PropsWithDefaults<\n  ExpandCollapseProps,\n  'collapsed' | 'dimension' | 'transitionSpeed' | 'nullWhenCollapsed'\n>;\n\ntype Statuses = 'collapsed' | 'collapsing' | 'expanded' | 'expanding';\n\ninterface GetStyleProps\n  extends Pick<\n    ExpandCollapsePropsWithDefaults,\n    'dimension' | 'transitionSpeed' | 'min' | 'max' | 'nullWhenCollapsed'\n  > {\n  status: Statuses;\n  el?: HTMLElement | null;\n  transitionTimingFunction?: string;\n}\n\nconst getScrollSize = (\n  el: HTMLElement,\n  dimension: ExpandCollapsePropsWithDefaults['dimension']\n): string => {\n  if (!el) return '';\n  return dimension === 'height' ? `${el.scrollHeight}px` : `${el.scrollWidth}px`;\n};\n\nconst getStyle = (props: GetStyleProps): CSSProperties => {\n  const {\n    status,\n    dimension,\n    transitionSpeed,\n    transitionTimingFunction,\n    min,\n    max,\n    nullWhenCollapsed,\n    el\n  } = props;\n  const style: CSSProperties = {};\n  let maxSize = max;\n\n  if (el && !max) {\n    maxSize = getScrollSize(el, dimension!);\n  }\n\n  if (status === 'expanded' || status === 'collapsed') {\n    if (max || min) {\n      style[dimension as 'height' | 'width'] = status === 'expanded' ? maxSize : min || 0;\n      style[`overflow${dimension === 'width' ? 'X' : 'Y'}`] = 'hidden';\n    }\n\n    if (status === 'collapsed' && !nullWhenCollapsed && !min) {\n      style.display = 'none';\n    }\n  }\n\n  if (status === 'expanding' || status === 'collapsing') {\n    style[dimension as 'height' | 'width'] = status === 'expanding' ? maxSize : min || 0;\n    style.overflow = 'hidden';\n    style.transitionProperty = dimension;\n    style.transitionDuration = `max(${transitionSpeed}, 0.01ms)`;\n    style.transitionTimingFunction = transitionTimingFunction;\n  }\n\n  return style;\n};\n\nconst ExpandCollapse: FunctionComponent<ExpandCollapseProps & ForwardProps> = forwardRef(\n  (props: PropsWithoutRef<ExpandCollapseProps>, refArg: Ref<HTMLElement>) => {\n    const {\n      base: { animation: themeAnimation }\n    } = useTheme();\n\n    const {\n      children,\n      dimension = 'height',\n      collapsed = false,\n      onBeforeExpand,\n      onAfterExpand,\n      onBeforeCollapse,\n      onAfterCollapse,\n      transitionSpeed = themeAnimation.speed,\n      min,\n      max,\n      nullWhenCollapsed = false,\n      as: Tag = 'div',\n      ...restProps\n    } = props;\n\n    const [status, setStatus] = useState<Statuses>(collapsed ? 'collapsed' : 'expanded');\n    const styleStateHook = useState<CSSProperties>();\n    const setStyle = styleStateHook[1];\n    let style = styleStateHook[0];\n    const previousStatus = usePrevious(status);\n    const ref = useConsolidatedRef(refArg);\n\n    const onTransitionEnd = useCallback(\n      (e: TransitionEvent) => {\n        if (e.target !== ref.current || e.propertyName !== dimension) return;\n        setStatus(status === 'expanding' ? 'expanded' : 'collapsed');\n      },\n      [ref.current, status]\n    );\n\n    useLayoutEffect(() => {\n      const wantsToCollapse = collapsed;\n      const wantsToExpand = !collapsed;\n      const canCollapse = ['expanded', 'expanding'].includes(status);\n      const canExpand = ['collapsed', 'collapsing'].includes(status);\n\n      if (wantsToExpand && canExpand) {\n        onBeforeExpand?.();\n        setStatus('expanding');\n      } else if (wantsToCollapse && canCollapse) {\n        onBeforeCollapse?.();\n        setStatus('collapsing');\n      }\n\n      if (status === 'expanded' && previousStatus !== 'expanded') {\n        onAfterExpand?.();\n      } else if (status === 'collapsed' && previousStatus !== 'collapsed') {\n        onAfterCollapse?.();\n      }\n\n      setStyle(\n        getStyle({\n          dimension,\n          min,\n          max,\n          transitionSpeed,\n          nullWhenCollapsed,\n          status,\n          el: ref.current,\n          transitionTimingFunction: themeAnimation.timing.ease\n        })\n      );\n    }, [collapsed, status, min, max]);\n\n    if (status !== previousStatus && ['expanded', 'collapsed'].includes(previousStatus!)) {\n      style = getStyle({\n        dimension,\n        min,\n        max,\n        transitionSpeed,\n        nullWhenCollapsed,\n        status: status === 'expanding' ? 'collapsing' : 'expanding',\n        el: ref.current,\n        transitionTimingFunction: themeAnimation.timing.ease\n      });\n    }\n\n    return status === 'collapsed' && nullWhenCollapsed && !min ? null : (\n      <Tag ref={ref} onTransitionEnd={onTransitionEnd} {...restProps} style={style}>\n        {children}\n      </Tag>\n    );\n  }\n);\n\nexport default ExpandCollapse;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}