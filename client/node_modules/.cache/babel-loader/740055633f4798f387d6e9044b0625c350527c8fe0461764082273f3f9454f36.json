{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { forwardRef, useCallback, useEffect, useRef, useState } from 'react';\nimport styled, { css } from 'styled-components';\nimport { defaultThemeProp } from '../../theme';\nimport Popover from '../Popover';\nimport { useConsolidatedRef, useUID } from '../../hooks';\nimport { calculateFontSize } from '../../styles';\nexport const StyledTooltip = styled.div(_ref => {\n  let {\n    theme\n  } = _ref;\n  const fontSize = calculateFontSize(theme.base['font-size'], theme.base['font-scale']);\n  return css`\n    background-color: ${theme.components.tooltip['background-color']};\n    color: ${theme.components.tooltip['foreground-color']};\n    font-size: ${fontSize.xxs};\n    max-width: 40ch;\n    padding: ${theme.base.spacing};\n    white-space: pre-line;\n    word-break: break-word;\n    pointer-events: none;\n    z-index: ${theme.base['z-index'].tooltip};\n  `;\n});\nStyledTooltip.defaultProps = defaultThemeProp;\nconst Tooltip = forwardRef((_ref2, ref) => {\n  let {\n    children,\n    target,\n    showDelay = 'short',\n    hideDelay = 'long',\n    portal = true,\n    placement = 'bottom',\n    describeTarget = true,\n    ...restProps\n  } = _ref2;\n  const id = useUID();\n  const [show, setShow] = useState(false);\n  const tooltipRef = useConsolidatedRef(ref);\n  const lastClickedRef = useRef(null);\n  const showTooltip = useCallback(() => {\n    setShow(true);\n  }, []);\n  const onMouseDown = useCallback(_ref3 => {\n    let {\n      target: eTarget\n    } = _ref3;\n    lastClickedRef.current = eTarget;\n    if (eTarget === tooltipRef.current || eTarget === target) return;\n    setShow(false);\n  }, [target]);\n  const onFocusOut = useCallback(() => {\n    if (lastClickedRef.current !== tooltipRef.current) {\n      setShow(false);\n    }\n    lastClickedRef.current = null;\n  }, []);\n  const onMouseEnter = useCallback(() => {\n    setShow(true);\n  }, [target]);\n  const onMouseLeave = useCallback(() => {\n    if (document.activeElement !== target) {\n      setShow(false);\n    }\n  }, [target]);\n  const onKeyDown = useCallback(_ref4 => {\n    let {\n      key\n    } = _ref4;\n    if (key === 'Escape' && document.activeElement === target) {\n      setShow(false);\n    }\n  }, [target]);\n  useEffect(() => {\n    if (!target) return;\n    document.addEventListener('keydown', onKeyDown);\n    document.addEventListener('mousedown', onMouseDown);\n    target.addEventListener('focusin', showTooltip);\n    target.addEventListener('focusout', onFocusOut);\n    target.addEventListener('mouseenter', onMouseEnter);\n    target.addEventListener('mouseleave', onMouseLeave);\n    return () => {\n      document.removeEventListener('keydown', onKeyDown);\n      document.removeEventListener('mousedown', onMouseDown);\n      target.removeEventListener('focusin', showTooltip);\n      target.removeEventListener('focusout', onFocusOut);\n      target.removeEventListener('mouseenter', onMouseEnter);\n      target.removeEventListener('mouseleave', onMouseLeave);\n    };\n  }, [target, showTooltip, onMouseDown, onFocusOut, onMouseLeave, onKeyDown]);\n  useEffect(() => {\n    if (target && describeTarget && show) {\n      const describedBy = target.getAttribute('aria-describedby');\n      // Set the attribute to the old attribute plus the id\n      target.setAttribute('aria-describedby', describedBy ? `${describedBy} ${id}` : id);\n    } else if (target) {\n      // Get the old attribute\n      const describedBy = target.getAttribute('aria-describedby');\n      if (describedBy) {\n        // If the old attribute matches the id just remove it entirely\n        if (describedBy === id) {\n          target.removeAttribute('aria-describedby');\n        } else {\n          // Otherwise we want to just remove the id that was added and reset the attribute to what it was before\n          const oldDescribedBy = describedBy.replace(new RegExp(`(?:^|\\\\s+)${id}`), '');\n          target.setAttribute('aria-describedby', oldDescribedBy);\n        }\n      }\n    }\n  }, [describeTarget, target, show]);\n  return _jsx(Popover, {\n    id: id,\n    ...restProps,\n    show: show,\n    showDelay: showDelay,\n    hideDelay: hideDelay,\n    groupId: 'tooltip',\n    strategy: 'fixed',\n    portal: portal,\n    as: StyledTooltip,\n    role: 'tooltip',\n    target: target,\n    arrow: true,\n    placement: placement,\n    onMouseDown: onMouseDown,\n    hideOnTargetHidden: true,\n    ref: tooltipRef,\n    children: children\n  });\n});\nexport default Tooltip;","map":{"version":3,"names":["forwardRef","useCallback","useEffect","useRef","useState","styled","css","defaultThemeProp","Popover","useConsolidatedRef","useUID","calculateFontSize","StyledTooltip","div","_ref","theme","fontSize","base","components","tooltip","xxs","spacing","defaultProps","Tooltip","_ref2","ref","children","target","showDelay","hideDelay","portal","placement","describeTarget","restProps","id","show","setShow","tooltipRef","lastClickedRef","showTooltip","onMouseDown","_ref3","eTarget","current","onFocusOut","onMouseEnter","onMouseLeave","document","activeElement","onKeyDown","_ref4","key","addEventListener","removeEventListener","describedBy","getAttribute","setAttribute","removeAttribute","oldDescribedBy","replace","RegExp","_jsx","groupId","strategy","as","role","arrow","hideOnTargetHidden"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/components/Tooltip/Tooltip.tsx"],"sourcesContent":["import {\n  forwardRef,\n  FunctionComponent,\n  MutableRefObject,\n  PropsWithoutRef,\n  Ref,\n  useCallback,\n  useEffect,\n  useRef,\n  useState\n} from 'react';\nimport styled, { css } from 'styled-components';\n\nimport { BaseProps, ForwardProps } from '../../types';\nimport { defaultThemeProp } from '../../theme';\nimport Popover, { Delay, PopoverProps } from '../Popover';\nimport { useConsolidatedRef, useUID } from '../../hooks';\nimport { calculateFontSize } from '../../styles';\n\nexport interface TooltipProps extends BaseProps {\n  /** Text content for the tooltip. */\n  children: string | string[];\n  /** Element to serve as the tooltip's target. */\n  target: Element | null;\n  /**\n   * Delay showing the tooltip on mouseenter.\n   * @default 'short'\n   */\n  showDelay?: Delay;\n  /**\n   * Delay hiding the tooltip on mouseleave.\n   * @default 'long'\n   */\n  hideDelay?: Delay;\n  /**\n   * If true, the Tooltip will render outside of the current DOM hierarchy in a [portal](https://reactjs.org/docs/portals.html).\n   * @default true\n   */\n  portal?: PopoverProps['portal'];\n  /**\n   * If true, the Tooltip will automatically apply an aria-describedby attribute to its target.\n   * @default true\n   */\n  describeTarget?: boolean;\n  /**\n   * Sets the placement of the tooltip relative to the target.\n   * @default 'bottom'\n   */\n  placement?: PopoverProps['placement'];\n  ref?: Ref<HTMLDivElement>;\n}\n\nexport const StyledTooltip = styled.div(({ theme }) => {\n  const fontSize = calculateFontSize(theme.base['font-size'], theme.base['font-scale']);\n\n  return css`\n    background-color: ${theme.components.tooltip['background-color']};\n    color: ${theme.components.tooltip['foreground-color']};\n    font-size: ${fontSize.xxs};\n    max-width: 40ch;\n    padding: ${theme.base.spacing};\n    white-space: pre-line;\n    word-break: break-word;\n    pointer-events: none;\n    z-index: ${theme.base['z-index'].tooltip};\n  `;\n});\n\nStyledTooltip.defaultProps = defaultThemeProp;\n\nconst Tooltip: FunctionComponent<TooltipProps & ForwardProps> = forwardRef(\n  (\n    {\n      children,\n      target,\n      showDelay = 'short',\n      hideDelay = 'long',\n      portal = true,\n      placement = 'bottom',\n      describeTarget = true,\n      ...restProps\n    }: PropsWithoutRef<TooltipProps>,\n    ref: Ref<HTMLDivElement>\n  ) => {\n    const id = useUID();\n    const [show, setShow] = useState(false);\n    const tooltipRef = useConsolidatedRef(ref);\n    const lastClickedRef: MutableRefObject<EventTarget | null> = useRef(null);\n\n    const showTooltip = useCallback(() => {\n      setShow(true);\n    }, []);\n\n    const onMouseDown = useCallback(\n      ({ target: eTarget }: MouseEvent) => {\n        lastClickedRef.current = eTarget;\n        if (eTarget === tooltipRef.current || eTarget === target) return;\n        setShow(false);\n      },\n      [target]\n    );\n\n    const onFocusOut = useCallback(() => {\n      if (lastClickedRef.current !== tooltipRef.current) {\n        setShow(false);\n      }\n      lastClickedRef.current = null;\n    }, []);\n\n    const onMouseEnter = useCallback(() => {\n      setShow(true);\n    }, [target]);\n\n    const onMouseLeave = useCallback(() => {\n      if (document.activeElement !== target) {\n        setShow(false);\n      }\n    }, [target]);\n\n    const onKeyDown = useCallback(\n      ({ key }: KeyboardEvent) => {\n        if (key === 'Escape' && document.activeElement === target) {\n          setShow(false);\n        }\n      },\n      [target]\n    );\n\n    useEffect(() => {\n      if (!target) return;\n\n      document.addEventListener('keydown', onKeyDown);\n      document.addEventListener('mousedown', onMouseDown);\n\n      target.addEventListener('focusin', showTooltip);\n      target.addEventListener('focusout', onFocusOut);\n\n      target.addEventListener('mouseenter', onMouseEnter);\n      target.addEventListener('mouseleave', onMouseLeave);\n\n      return () => {\n        document.removeEventListener('keydown', onKeyDown);\n        document.removeEventListener('mousedown', onMouseDown);\n\n        target.removeEventListener('focusin', showTooltip);\n        target.removeEventListener('focusout', onFocusOut);\n\n        target.removeEventListener('mouseenter', onMouseEnter);\n        target.removeEventListener('mouseleave', onMouseLeave);\n      };\n    }, [target, showTooltip, onMouseDown, onFocusOut, onMouseLeave, onKeyDown]);\n\n    useEffect(() => {\n      if (target && describeTarget && show) {\n        const describedBy = target.getAttribute('aria-describedby');\n        // Set the attribute to the old attribute plus the id\n        target.setAttribute('aria-describedby', describedBy ? `${describedBy} ${id}` : id);\n      } else if (target) {\n        // Get the old attribute\n        const describedBy = target.getAttribute('aria-describedby');\n        if (describedBy) {\n          // If the old attribute matches the id just remove it entirely\n          if (describedBy === id) {\n            target.removeAttribute('aria-describedby');\n          } else {\n            // Otherwise we want to just remove the id that was added and reset the attribute to what it was before\n            const oldDescribedBy = describedBy.replace(new RegExp(`(?:^|\\\\s+)${id}`), '');\n            target.setAttribute('aria-describedby', oldDescribedBy);\n          }\n        }\n      }\n    }, [describeTarget, target, show]);\n\n    return (\n      <Popover\n        id={id}\n        {...restProps}\n        show={show}\n        showDelay={showDelay}\n        hideDelay={hideDelay}\n        groupId='tooltip'\n        strategy='fixed'\n        portal={portal}\n        as={StyledTooltip}\n        role='tooltip'\n        target={target}\n        arrow\n        placement={placement}\n        onMouseDown={onMouseDown}\n        hideOnTargetHidden\n        ref={tooltipRef}\n      >\n        {children}\n      </Popover>\n    );\n  }\n);\n\nexport default Tooltip;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}