{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { forwardRef } from 'react';\nimport creditCardType from 'credit-card-type';\nimport Input from '../Input';\nimport { useConsolidatedRef, useInputFormatter } from '../../hooks';\nimport { formatCreditCard, isPossibleCardNumber } from './utils';\nconst CreditCardInput = forwardRef((_ref, ref) => {\n  let {\n    value = '',\n    onChange,\n    onBlur,\n    onFocus,\n    ...restProps\n  } = _ref;\n  const onInputKeyDown = e => {\n    if (value && !isPossibleCardNumber(value) && Number.isFinite(Number.parseInt(e.key, 10))) {\n      e.target.value = '';\n    }\n  };\n  const onInputChange = e => {\n    onChange(e.target.value ? e.target.value.replace(/\\D+/g, '') : undefined);\n  };\n  const onInputBlur = e => {\n    const inputValue = e.target.value;\n    onBlur?.(inputValue ? inputValue.replace(/\\D+/g, '') : undefined);\n  };\n  const onInputFocus = e => {\n    const inputValue = e.target.value;\n    onFocus?.(inputValue ? inputValue.replace(/\\D+/g, '') : undefined);\n  };\n  const onPaste = e => {\n    const text = e.clipboardData.getData('text').replace(/\\D+/g, '');\n    const [{\n      lengths: [inferredLength] = []\n    } = {}] = creditCardType(text);\n    if (text.length > inferredLength) {\n      onChange(Number(text).toString());\n      e.preventDefault();\n    }\n  };\n  const maxLength = value ? Math.max(...(creditCardType(value)[0]?.lengths || [16])) : undefined;\n  const obfuscation = /\\D/.test(value) ? 'partial' : 'none';\n  const inputRef = useConsolidatedRef(ref);\n  const formatted = useInputFormatter(inputRef, value, input => formatCreditCard(input.replace(/\\D+/g, ''), {\n    obfuscation\n  }));\n  return _jsx(Input, {\n    ...restProps,\n    inputMode: 'numeric',\n    ref: inputRef,\n    value: formatted,\n    onChange: onInputChange,\n    onBlur: onInputBlur,\n    onFocus: onInputFocus,\n    onPaste: onPaste,\n    onKeyDown: onInputKeyDown,\n    maxLength: maxLength,\n    autoComplete: 'cc-number'\n  });\n});\nexport default CreditCardInput;","map":{"version":3,"names":["forwardRef","creditCardType","Input","useConsolidatedRef","useInputFormatter","formatCreditCard","isPossibleCardNumber","CreditCardInput","_ref","ref","value","onChange","onBlur","onFocus","restProps","onInputKeyDown","e","Number","isFinite","parseInt","key","target","onInputChange","replace","undefined","onInputBlur","inputValue","onInputFocus","onPaste","text","clipboardData","getData","lengths","inferredLength","length","toString","preventDefault","maxLength","Math","max","obfuscation","test","inputRef","formatted","input","_jsx","inputMode","onKeyDown","autoComplete"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/components/CreditCard/CreditCardInput.tsx"],"sourcesContent":["import {\n  FunctionComponent,\n  forwardRef,\n  PropsWithoutRef,\n  ChangeEvent,\n  ClipboardEvent,\n  KeyboardEvent\n} from 'react';\nimport creditCardType from 'credit-card-type';\n\nimport { ForwardProps } from '../../types';\nimport Input from '../Input';\nimport { useConsolidatedRef, useInputFormatter } from '../../hooks';\n\nimport { CreditCardInputProps } from './CreditCard.types';\nimport { formatCreditCard, isPossibleCardNumber } from './utils';\n\nconst CreditCardInput: FunctionComponent<CreditCardInputProps & ForwardProps> = forwardRef(\n  (\n    { value = '', onChange, onBlur, onFocus, ...restProps }: PropsWithoutRef<CreditCardInputProps>,\n    ref: CreditCardInputProps['ref']\n  ) => {\n    const onInputKeyDown = (e: KeyboardEvent) => {\n      if (value && !isPossibleCardNumber(value) && Number.isFinite(Number.parseInt(e.key, 10))) {\n        (e.target as HTMLInputElement).value = '';\n      }\n    };\n\n    const onInputChange = (e: ChangeEvent<HTMLInputElement>) => {\n      onChange(e.target.value ? e.target.value.replace(/\\D+/g, '') : undefined);\n    };\n\n    const onInputBlur = (e: FocusEvent) => {\n      const inputValue = (e.target as HTMLInputElement).value;\n      onBlur?.(inputValue ? inputValue.replace(/\\D+/g, '') : undefined);\n    };\n\n    const onInputFocus = (e: FocusEvent) => {\n      const inputValue = (e.target as HTMLInputElement).value;\n      onFocus?.(inputValue ? inputValue.replace(/\\D+/g, '') : undefined);\n    };\n\n    const onPaste = (e: ClipboardEvent) => {\n      const text = e.clipboardData.getData('text').replace(/\\D+/g, '');\n      const [{ lengths: [inferredLength] = [] } = {}] = creditCardType(text);\n      if (text.length > inferredLength) {\n        onChange(Number(text).toString());\n        e.preventDefault();\n      }\n    };\n\n    const maxLength = value ? Math.max(...(creditCardType(value)[0]?.lengths || [16])) : undefined;\n\n    const obfuscation = /\\D/.test(value) ? 'partial' : 'none';\n\n    const inputRef = useConsolidatedRef(ref);\n    const formatted = useInputFormatter(inputRef, value, (input: string) =>\n      formatCreditCard(input.replace(/\\D+/g, ''), { obfuscation })\n    );\n\n    return (\n      <Input\n        {...restProps}\n        inputMode='numeric'\n        ref={inputRef}\n        value={formatted}\n        onChange={onInputChange}\n        onBlur={onInputBlur}\n        onFocus={onInputFocus}\n        onPaste={onPaste}\n        onKeyDown={onInputKeyDown}\n        maxLength={maxLength}\n        autoComplete='cc-number'\n      />\n    );\n  }\n);\n\nexport default CreditCardInput;\n"],"mappings":";AAAA,SAEEA,UAAU,QAKL,OAAO;AACd,OAAOC,cAAc,MAAM,kBAAkB;AAG7C,OAAOC,KAAK,MAAM,UAAU;AAC5B,SAASC,kBAAkB,EAAEC,iBAAiB,QAAQ,aAAa;AAGnE,SAASC,gBAAgB,EAAEC,oBAAoB,QAAQ,SAAS;AAEhE,MAAMC,eAAe,GAA2DP,UAAU,CACxF,CAAAQ,IAAA,EAEEC,GAAgC,KAC9B;EAAA,IAFF;IAAEC,KAAK,GAAG,EAAE;IAAEC,QAAQ;IAAEC,MAAM;IAAEC,OAAO;IAAE,GAAGC;EAAS,CAAyC,GAAAN,IAAA;EAG9F,MAAMO,cAAc,GAAIC,CAAgB,IAAI;IAC1C,IAAIN,KAAK,IAAI,CAACJ,oBAAoB,CAACI,KAAK,CAAC,IAAIO,MAAM,CAACC,QAAQ,CAACD,MAAM,CAACE,QAAQ,CAACH,CAAC,CAACI,GAAG,EAAE,EAAE,CAAC,CAAC,EAAE;MACvFJ,CAAC,CAACK,MAA2B,CAACX,KAAK,GAAG,EAAE;;EAE7C,CAAC;EAED,MAAMY,aAAa,GAAIN,CAAgC,IAAI;IACzDL,QAAQ,CAACK,CAAC,CAACK,MAAM,CAACX,KAAK,GAAGM,CAAC,CAACK,MAAM,CAACX,KAAK,CAACa,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,GAAGC,SAAS,CAAC;EAC3E,CAAC;EAED,MAAMC,WAAW,GAAIT,CAAa,IAAI;IACpC,MAAMU,UAAU,GAAIV,CAAC,CAACK,MAA2B,CAACX,KAAK;IACvDE,MAAM,GAAGc,UAAU,GAAGA,UAAU,CAACH,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,GAAGC,SAAS,CAAC;EACnE,CAAC;EAED,MAAMG,YAAY,GAAIX,CAAa,IAAI;IACrC,MAAMU,UAAU,GAAIV,CAAC,CAACK,MAA2B,CAACX,KAAK;IACvDG,OAAO,GAAGa,UAAU,GAAGA,UAAU,CAACH,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,GAAGC,SAAS,CAAC;EACpE,CAAC;EAED,MAAMI,OAAO,GAAIZ,CAAiB,IAAI;IACpC,MAAMa,IAAI,GAAGb,CAAC,CAACc,aAAa,CAACC,OAAO,CAAC,MAAM,CAAC,CAACR,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC;IAChE,MAAM,CAAC;MAAES,OAAO,EAAE,CAACC,cAAc,CAAC,GAAG;IAAE,CAAE,GAAG,EAAE,CAAC,GAAGhC,cAAc,CAAC4B,IAAI,CAAC;IACtE,IAAIA,IAAI,CAACK,MAAM,GAAGD,cAAc,EAAE;MAChCtB,QAAQ,CAACM,MAAM,CAACY,IAAI,CAAC,CAACM,QAAQ,EAAE,CAAC;MACjCnB,CAAC,CAACoB,cAAc,EAAE;;EAEtB,CAAC;EAED,MAAMC,SAAS,GAAG3B,KAAK,GAAG4B,IAAI,CAACC,GAAG,CAAC,IAAItC,cAAc,CAACS,KAAK,CAAC,CAAC,CAAC,CAAC,EAAEsB,OAAO,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAGR,SAAS;EAE9F,MAAMgB,WAAW,GAAG,IAAI,CAACC,IAAI,CAAC/B,KAAK,CAAC,GAAG,SAAS,GAAG,MAAM;EAEzD,MAAMgC,QAAQ,GAAGvC,kBAAkB,CAACM,GAAG,CAAC;EACxC,MAAMkC,SAAS,GAAGvC,iBAAiB,CAACsC,QAAQ,EAAEhC,KAAK,EAAGkC,KAAa,IACjEvC,gBAAgB,CAACuC,KAAK,CAACrB,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;IAAEiB;EAAW,CAAE,CAAC,CAC7D;EAED,OACEK,IAAA,CAAC3C,KAAK;IAAA,GACAY,SAAS;IACbgC,SAAS,EAAC,SAAS;IACnBrC,GAAG,EAAEiC,QAAQ;IACbhC,KAAK,EAAEiC,SAAS;IAChBhC,QAAQ,EAAEW,aAAa;IACvBV,MAAM,EAAEa,WAAW;IACnBZ,OAAO,EAAEc,YAAY;IACrBC,OAAO,EAAEA,OAAO;IAChBmB,SAAS,EAAEhC,cAAc;IACzBsB,SAAS,EAAEA,SAAS;IACpBW,YAAY,EAAC;EAAW,EACxB;AAEN,CAAC,CACF;AAED,eAAezC,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}