{"ast":null,"code":"import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useState, useRef, useMemo, useLayoutEffect } from 'react';\nimport styled from 'styled-components';\nimport { useI18n } from '../../hooks';\nimport { windowIsAvailable } from '../../utils';\nimport Button from '../Button';\nimport ExpandCollapse from '../ExpandCollapse';\nexport const StyledShowMoreLessButton = styled(Button)``;\nconst ShowMoreLess = _ref => {\n  let {\n    children,\n    lines\n  } = _ref;\n  const [collapsed, setCollapsed] = useState(true);\n  const [exceedsMaxHeight, setExceedsMaxHeight] = useState(false);\n  const contentRef = useRef(null);\n  const t = useI18n();\n  const maxTextHeight = useMemo(() => {\n    if (!windowIsAvailable) return Infinity;\n    const computedLineHeight = Number.parseInt(window.getComputedStyle(document.documentElement).getPropertyValue('font-size'), 10) * 1.25 - 1;\n    return lines * computedLineHeight;\n  }, []);\n  useLayoutEffect(() => {\n    if (!contentRef.current) return;\n    const observer = new ResizeObserver(entries => {\n      const exceedsHeight = entries.some(_ref2 => {\n        let {\n          target,\n          contentRect\n        } = _ref2;\n        if (target !== contentRef.current) return;\n        return contentRect.height > maxTextHeight;\n      });\n      setExceedsMaxHeight(exceedsHeight);\n    });\n    observer.observe(contentRef.current);\n    return () => {\n      observer.disconnect();\n    };\n  }, [contentRef.current, maxTextHeight]);\n  return _jsxs(_Fragment, {\n    children: [_jsx(ExpandCollapse, {\n      collapsed: collapsed,\n      min: exceedsMaxHeight ? `${maxTextHeight}px` : 'max-content',\n      children: _jsx(\"div\", {\n        ref: contentRef,\n        children: children\n      })\n    }), exceedsMaxHeight && _jsx(StyledShowMoreLessButton, {\n      variant: 'link',\n      onClick: () => setCollapsed(current => !current),\n      children: collapsed ? t('show_more') : t('show_less')\n    })]\n  });\n};\nexport default ShowMoreLess;","map":{"version":3,"names":["useState","useRef","useMemo","useLayoutEffect","styled","useI18n","windowIsAvailable","Button","ExpandCollapse","StyledShowMoreLessButton","ShowMoreLess","_ref","children","lines","collapsed","setCollapsed","exceedsMaxHeight","setExceedsMaxHeight","contentRef","t","maxTextHeight","Infinity","computedLineHeight","Number","parseInt","window","getComputedStyle","document","documentElement","getPropertyValue","current","observer","ResizeObserver","entries","exceedsHeight","some","_ref2","target","contentRect","height","observe","disconnect","_jsxs","_Fragment","_jsx","min","ref","variant","onClick"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/components/ShowMoreLess/ShowMoreLess.tsx"],"sourcesContent":["import { FunctionComponent, ReactNode, useState, useRef, useMemo, useLayoutEffect } from 'react';\nimport styled from 'styled-components';\n\nimport { useI18n } from '../../hooks';\nimport { windowIsAvailable } from '../../utils';\nimport Button from '../Button';\nimport ExpandCollapse from '../ExpandCollapse';\n\nexport interface ShowMoreLessProps {\n  children: ReactNode;\n  lines: number;\n}\n\nexport const StyledShowMoreLessButton = styled(Button)``;\n\nconst ShowMoreLess: FunctionComponent<ShowMoreLessProps> = ({ children, lines }) => {\n  const [collapsed, setCollapsed] = useState(true);\n  const [exceedsMaxHeight, setExceedsMaxHeight] = useState(false);\n  const contentRef = useRef<HTMLDivElement>(null);\n  const t = useI18n();\n\n  const maxTextHeight = useMemo(() => {\n    if (!windowIsAvailable) return Infinity;\n\n    const computedLineHeight =\n      Number.parseInt(\n        window.getComputedStyle(document.documentElement).getPropertyValue('font-size'),\n        10\n      ) *\n        1.25 -\n      1;\n    return lines * computedLineHeight;\n  }, []);\n\n  useLayoutEffect(() => {\n    if (!contentRef.current) return;\n\n    const observer = new ResizeObserver(entries => {\n      const exceedsHeight = entries.some(({ target, contentRect }) => {\n        if (target !== contentRef.current) return;\n\n        return contentRect.height > maxTextHeight;\n      });\n\n      setExceedsMaxHeight(exceedsHeight);\n    });\n\n    observer.observe(contentRef.current);\n\n    return () => {\n      observer.disconnect();\n    };\n  }, [contentRef.current, maxTextHeight]);\n\n  return (\n    <>\n      <ExpandCollapse\n        collapsed={collapsed}\n        min={exceedsMaxHeight ? `${maxTextHeight}px` : 'max-content'}\n      >\n        <div ref={contentRef}>{children}</div>\n      </ExpandCollapse>\n      {exceedsMaxHeight && (\n        <StyledShowMoreLessButton variant='link' onClick={() => setCollapsed(current => !current)}>\n          {collapsed ? t('show_more') : t('show_less')}\n        </StyledShowMoreLessButton>\n      )}\n    </>\n  );\n};\n\nexport default ShowMoreLess;\n"],"mappings":";AAAA,SAAuCA,QAAQ,EAAEC,MAAM,EAAEC,OAAO,EAAEC,eAAe,QAAQ,OAAO;AAChG,OAAOC,MAAM,MAAM,mBAAmB;AAEtC,SAASC,OAAO,QAAQ,aAAa;AACrC,SAASC,iBAAiB,QAAQ,aAAa;AAC/C,OAAOC,MAAM,MAAM,WAAW;AAC9B,OAAOC,cAAc,MAAM,mBAAmB;AAO9C,OAAO,MAAMC,wBAAwB,GAAGL,MAAM,CAACG,MAAM,CAAC,EAAE;AAExD,MAAMG,YAAY,GAAyCC,IAAA,IAAwB;EAAA,IAAvB;IAAEC,QAAQ;IAAEC;EAAK,CAAE,GAAAF,IAAA;EAC7E,MAAM,CAACG,SAAS,EAAEC,YAAY,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACgB,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;EAC/D,MAAMkB,UAAU,GAAGjB,MAAM,CAAiB,IAAI,CAAC;EAC/C,MAAMkB,CAAC,GAAGd,OAAO,EAAE;EAEnB,MAAMe,aAAa,GAAGlB,OAAO,CAAC,MAAK;IACjC,IAAI,CAACI,iBAAiB,EAAE,OAAOe,QAAQ;IAEvC,MAAMC,kBAAkB,GACtBC,MAAM,CAACC,QAAQ,CACbC,MAAM,CAACC,gBAAgB,CAACC,QAAQ,CAACC,eAAe,CAAC,CAACC,gBAAgB,CAAC,WAAW,CAAC,EAC/E,EAAE,CACH,GACC,IAAI,GACN,CAAC;IACH,OAAOhB,KAAK,GAAGS,kBAAkB;EACnC,CAAC,EAAE,EAAE,CAAC;EAENnB,eAAe,CAAC,MAAK;IACnB,IAAI,CAACe,UAAU,CAACY,OAAO,EAAE;IAEzB,MAAMC,QAAQ,GAAG,IAAIC,cAAc,CAACC,OAAO,IAAG;MAC5C,MAAMC,aAAa,GAAGD,OAAO,CAACE,IAAI,CAACC,KAAA,IAA4B;QAAA,IAA3B;UAAEC,MAAM;UAAEC;QAAW,CAAE,GAAAF,KAAA;QACzD,IAAIC,MAAM,KAAKnB,UAAU,CAACY,OAAO,EAAE;QAEnC,OAAOQ,WAAW,CAACC,MAAM,GAAGnB,aAAa;MAC3C,CAAC,CAAC;MAEFH,mBAAmB,CAACiB,aAAa,CAAC;IACpC,CAAC,CAAC;IAEFH,QAAQ,CAACS,OAAO,CAACtB,UAAU,CAACY,OAAO,CAAC;IAEpC,OAAO,MAAK;MACVC,QAAQ,CAACU,UAAU,EAAE;IACvB,CAAC;EACH,CAAC,EAAE,CAACvB,UAAU,CAACY,OAAO,EAAEV,aAAa,CAAC,CAAC;EAEvC,OACEsB,KAAA,CAAAC,SAAA;IAAA/B,QAAA,GACEgC,IAAA,CAACpC,cAAc;MACbM,SAAS,EAAEA,SAAS;MACpB+B,GAAG,EAAE7B,gBAAgB,GAAG,GAAGI,aAAa,IAAI,GAAG,aAAa;MAAAR,QAAA,EAE5DgC,IAAA;QAAKE,GAAG,EAAE5B,UAAU;QAAAN,QAAA,EAAGA;MAAQ;IAAO,EACvB,EAChBI,gBAAgB,IACf4B,IAAA,CAACnC,wBAAwB;MAACsC,OAAO,EAAC,MAAM;MAACC,OAAO,EAAEA,CAAA,KAAMjC,YAAY,CAACe,OAAO,IAAI,CAACA,OAAO,CAAC;MAAAlB,QAAA,EACtFE,SAAS,GAAGK,CAAC,CAAC,WAAW,CAAC,GAAGA,CAAC,CAAC,WAAW;IAAC,EAE/C;EAAA,EACA;AAEP,CAAC;AAED,eAAeT,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}