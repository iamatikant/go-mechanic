{"ast":null,"code":"import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { forwardRef, useCallback, useState } from 'react';\nimport styled, { css } from 'styled-components';\nimport { hideVisually } from 'polished';\nimport { useConsolidatedRef, useI18n, useUID, useDirection, useTestIds } from '../../hooks';\nimport FormControl from '../FormControl';\nimport { defaultThemeProp } from '../../theme';\nimport Flex from '../Flex';\nimport Text from '../Text';\nimport Icon, { registerIcon } from '../Icon';\nimport * as paperClipIcon from '../Icon/icons/paper-clip.icon';\nimport FormField from '../FormField';\nimport Grid from '../Grid';\nimport FileUploadItem from './FileUploadItem';\nimport { getFileInputTestIds } from './File.test-ids';\nregisterIcon(paperClipIcon);\nexport const StyledDropZone = styled(FormControl)(_ref => {\n  let {\n    dragOver,\n    theme\n  } = _ref;\n  return css`\n    padding: calc(2 * ${theme.base.spacing});\n    min-height: 4rem;\n    border-style: dashed;\n    cursor: pointer;\n\n    ${dragOver && css`\n      border-style: solid;\n    `}\n  `;\n});\nexport const StyledFileInput = styled.div(_ref2 => {\n  let {\n    theme\n  } = _ref2;\n  return css`\n      position: relative;\n\n      input {\n        ${hideVisually}\n      }\n\n      input:enabled:focus + ${StyledDropZone} {\n        box-shadow: ${theme.components['form-control'][':focus']['box-shadow']};\n      }\n\n      input[hidden] + ${StyledDropZone} {\n        display: none;\n      }\n    `;\n});\nStyledFileInput.defaultProps = defaultThemeProp;\nconst StyledInteractiveText = styled.span(_ref3 => {\n  let {\n    theme\n  } = _ref3;\n  return css`\n    color: ${theme.base.palette.interactive};\n  `;\n});\nStyledInteractiveText.defaultProps = defaultThemeProp;\nconst FileInput = forwardRef((props, ref) => {\n  const uid = useUID();\n  const {\n    testId,\n    id = uid,\n    label,\n    labelHidden,\n    info,\n    required = false,\n    disabled = false,\n    files,\n    onFilesAdded,\n    multiple = false,\n    status,\n    ...restProps\n  } = props;\n  const testIds = useTestIds(testId, getFileInputTestIds);\n  const icon = _jsx(Icon, {\n    name: 'paper-clip'\n  });\n  const inputRef = useConsolidatedRef(ref);\n  const onChange = useCallback(e => {\n    if (e.target.files) {\n      onFilesAdded?.(Array.from(e.target.files));\n    }\n    /**\n     * WHY are we doing this?\n     * We are not working with the \"value\" prop of the input but rather the File instances that are created.\n     * The consumer of this component should manage an array or File(s) and allow for a user to remove a selected file.\n     * Since we can not modify the input value of files for browser security reasons,\n     * and since setting the files property is less than ideal, we reset/toggle the input to a fresh state after a render.\n     * This enables onChange to fire even if the user had just previously selected a file, removed it, and selected it again.\n     */\n    if (inputRef.current) inputRef.current.value = '';\n  }, [onFilesAdded]);\n  const t = useI18n();\n  const [dragOver, setDragOver] = useState(false);\n  const {\n    ltr,\n    rtl\n  } = useDirection();\n  const fileInput = _jsxs(StyledFileInput, {\n    children: [_jsx(\"input\", {\n      \"data-testid\": testIds.control,\n      ...restProps,\n      ref: inputRef,\n      type: 'file',\n      id: id,\n      disabled: disabled,\n      onChange: onChange,\n      multiple: multiple\n    }), _jsxs(Flex, {\n      container: {\n        alignItems: 'center',\n        justify: 'center'\n      },\n      item: {\n        grow: 1\n      },\n      as: StyledDropZone,\n      dragOver: dragOver,\n      onClick: () => {\n        inputRef.current?.focus();\n        inputRef.current?.click();\n      },\n      onDragOver: e => {\n        e.preventDefault();\n      },\n      onDragEnter: () => setDragOver(true),\n      onDragLeave: () => setDragOver(false),\n      onDrop: e => {\n        e.preventDefault();\n        setDragOver(false);\n        onFilesAdded?.(Array.from(e.dataTransfer.files));\n      },\n      children: [ltr && icon, _jsxs(Text, {\n        variant: 'primary',\n        children: [\"\\u00A0\", t('file_upload_text_main', [_jsx(StyledInteractiveText, {\n          children: t(multiple ? 'file_upload_text_multiple' : 'file_upload_text_one')\n        })]), \"\\u00A0\"]\n      }), rtl && icon]\n    })]\n  });\n  return _jsxs(Grid, {\n    container: {\n      rowGap: 1\n    },\n    children: [label ? _jsx(FormField, {\n      ...{\n        testId: testIds,\n        label,\n        labelHidden,\n        id,\n        info,\n        required,\n        disabled,\n        status\n      },\n      children: fileInput\n    }) : fileInput, !!files?.length && _jsx(Grid, {\n      \"data-testid\": testIds.files,\n      container: {\n        gap: 1,\n        cols: 'repeat(2, minmax(0, 1fr))'\n      },\n      as: 'ul',\n      children: files.map((_ref4, index) => {\n        let {\n          name,\n          ...file\n        } = _ref4;\n        // eslint-disable-next-line react/no-array-index-key\n        return _jsx(FileUploadItem, {\n          name: name,\n          ...file\n        }, index);\n      })\n    })]\n  });\n});\nexport default FileInput;","map":{"version":3,"names":["forwardRef","useCallback","useState","styled","css","hideVisually","useConsolidatedRef","useI18n","useUID","useDirection","useTestIds","FormControl","defaultThemeProp","Flex","Text","Icon","registerIcon","paperClipIcon","FormField","Grid","FileUploadItem","getFileInputTestIds","StyledDropZone","_ref","dragOver","theme","base","spacing","StyledFileInput","div","_ref2","components","defaultProps","StyledInteractiveText","span","_ref3","palette","interactive","FileInput","props","ref","uid","testId","id","label","labelHidden","info","required","disabled","files","onFilesAdded","multiple","status","restProps","testIds","icon","_jsx","name","inputRef","onChange","e","target","Array","from","current","value","t","setDragOver","ltr","rtl","fileInput","_jsxs","children","control","type","container","alignItems","justify","item","grow","as","onClick","focus","click","onDragOver","preventDefault","onDragEnter","onDragLeave","onDrop","dataTransfer","variant","rowGap","length","gap","cols","map","_ref4","index","file"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/components/File/FileInput.tsx"],"sourcesContent":["import {\n  FunctionComponent,\n  Ref,\n  forwardRef,\n  ChangeEvent,\n  useCallback,\n  PropsWithoutRef,\n  DragEvent,\n  useState\n} from 'react';\nimport styled, { css } from 'styled-components';\nimport { hideVisually } from 'polished';\n\nimport {\n  BaseProps,\n  ForwardProps,\n  NoChildrenProp,\n  PropsWithDefaults,\n  TestIdProp\n} from '../../types';\nimport { useConsolidatedRef, useI18n, useUID, useDirection, useTestIds } from '../../hooks';\nimport FormControl, { FormControlProps } from '../FormControl';\nimport { defaultThemeProp } from '../../theme';\nimport Flex from '../Flex';\nimport Text from '../Text';\nimport Icon, { registerIcon } from '../Icon';\nimport * as paperClipIcon from '../Icon/icons/paper-clip.icon';\nimport FormField from '../FormField';\nimport Grid from '../Grid';\n\nimport FileUploadItem, { FileUploadItemProps } from './FileUploadItem';\nimport { getFileInputTestIds } from './File.test-ids';\n\nregisterIcon(paperClipIcon);\n\ntype FileInputPropsWithDefaults = PropsWithDefaults<FileInputProps>;\n\nexport interface FileInputProps extends BaseProps, NoChildrenProp, TestIdProp {\n  /** Called when files are added either via the input or drop zone. */\n  onFilesAdded?: (files: File[]) => void;\n  /**\n   * Allow multiple files to be selected from the OS specific file browser.\n   * NOTE: This does not restrict multiple files from being added via drag and drop.\n   * Restrict multi file drag and drop via onFilesAdded and custom info message.\n   * @default false\n   */\n  multiple?: boolean;\n  /** An array of files that have been uploaded. */\n  files?: FileUploadItemProps[];\n  /**\n   * Sets DOM id for the control and associates label element via 'for' attribute.\n   * If an id is not pass, a random id will be generated for any render.\n   */\n  id?: FormControlProps['id'];\n  /** Set visual state based on a validation state. */\n  status?: FormControlProps['status'];\n  /** Pass a string or a fragment with an Icon and string. */\n  label?: FormControlProps['label'];\n  /** Visually hides the label region. */\n  labelHidden?: FormControlProps['labelHidden'];\n  /** It is recommended to pass a simple string to offer guidance. Text will be styled based on status prop. */\n  info?: FormControlProps['info'];\n  /** Indicate if the field is required. The browser defaults to false. */\n  required?: FormControlProps['required'];\n  /** Disable the control. The browser defaults to false. */\n  disabled?: FormControlProps['disabled'];\n  /** Sets html name attribute for the underlying control. Useful for mapping to a data field. */\n  name?: FormControlProps['name'];\n  /** Ref for the input element within the component's dom structure. */\n  ref?: Ref<HTMLInputElement>;\n}\n\nexport const StyledDropZone = styled(FormControl)<{ dragOver: boolean }>(({ dragOver, theme }) => {\n  return css`\n    padding: calc(2 * ${theme.base.spacing});\n    min-height: 4rem;\n    border-style: dashed;\n    cursor: pointer;\n\n    ${dragOver &&\n    css`\n      border-style: solid;\n    `}\n  `;\n});\n\nexport const StyledFileInput = styled.div<FileInputPropsWithDefaults & ForwardProps>(\n  ({ theme }) => {\n    return css`\n      position: relative;\n\n      input {\n        ${hideVisually}\n      }\n\n      input:enabled:focus + ${StyledDropZone} {\n        box-shadow: ${theme.components['form-control'][':focus']['box-shadow']};\n      }\n\n      input[hidden] + ${StyledDropZone} {\n        display: none;\n      }\n    `;\n  }\n);\n\nStyledFileInput.defaultProps = defaultThemeProp;\n\nconst StyledInteractiveText = styled.span(({ theme }) => {\n  return css`\n    color: ${theme.base.palette.interactive};\n  `;\n});\n\nStyledInteractiveText.defaultProps = defaultThemeProp;\n\nconst FileInput: FunctionComponent<FileInputProps & ForwardProps> = forwardRef(\n  (props: PropsWithoutRef<FileInputProps>, ref: FileInputProps['ref']) => {\n    const uid = useUID();\n    const {\n      testId,\n      id = uid,\n      label,\n      labelHidden,\n      info,\n      required = false,\n      disabled = false,\n      files,\n      onFilesAdded,\n      multiple = false,\n      status,\n      ...restProps\n    } = props;\n\n    const testIds = useTestIds(testId, getFileInputTestIds);\n\n    const icon = <Icon name='paper-clip' />;\n    const inputRef = useConsolidatedRef(ref);\n\n    const onChange = useCallback(\n      (e: ChangeEvent<HTMLInputElement>) => {\n        if (e.target.files) {\n          onFilesAdded?.(Array.from(e.target.files));\n        }\n        /**\n         * WHY are we doing this?\n         * We are not working with the \"value\" prop of the input but rather the File instances that are created.\n         * The consumer of this component should manage an array or File(s) and allow for a user to remove a selected file.\n         * Since we can not modify the input value of files for browser security reasons,\n         * and since setting the files property is less than ideal, we reset/toggle the input to a fresh state after a render.\n         * This enables onChange to fire even if the user had just previously selected a file, removed it, and selected it again.\n         */\n        if (inputRef.current) inputRef.current.value = '';\n      },\n      [onFilesAdded]\n    );\n\n    const t = useI18n();\n    const [dragOver, setDragOver] = useState(false);\n    const { ltr, rtl } = useDirection();\n\n    const fileInput = (\n      <StyledFileInput>\n        <input\n          data-testid={testIds.control}\n          {...restProps}\n          ref={inputRef}\n          type='file'\n          id={id}\n          disabled={disabled}\n          onChange={onChange}\n          multiple={multiple}\n        />\n        <Flex\n          container={{ alignItems: 'center', justify: 'center' }}\n          item={{ grow: 1 }}\n          as={StyledDropZone}\n          dragOver={dragOver}\n          onClick={() => {\n            inputRef.current?.focus();\n            inputRef.current?.click();\n          }}\n          onDragOver={(e: DragEvent<HTMLDivElement>) => {\n            e.preventDefault();\n          }}\n          onDragEnter={() => setDragOver(true)}\n          onDragLeave={() => setDragOver(false)}\n          onDrop={(e: DragEvent<HTMLDivElement>) => {\n            e.preventDefault();\n            setDragOver(false);\n            onFilesAdded?.(Array.from(e.dataTransfer.files));\n          }}\n        >\n          {ltr && icon}\n          <Text variant='primary'>\n            &nbsp;\n            {t('file_upload_text_main', [\n              <StyledInteractiveText>\n                {t(multiple ? 'file_upload_text_multiple' : 'file_upload_text_one')}\n              </StyledInteractiveText>\n            ])}\n            &nbsp;\n          </Text>\n          {rtl && icon}\n        </Flex>\n      </StyledFileInput>\n    );\n\n    return (\n      <Grid container={{ rowGap: 1 }}>\n        {label ? (\n          <FormField\n            {...{\n              testId: testIds,\n              label,\n              labelHidden,\n              id,\n              info,\n              required,\n              disabled,\n              status\n            }}\n          >\n            {fileInput}\n          </FormField>\n        ) : (\n          fileInput\n        )}\n        {!!files?.length && (\n          <Grid\n            data-testid={testIds.files}\n            container={{\n              gap: 1,\n              cols: 'repeat(2, minmax(0, 1fr))'\n            }}\n            as='ul'\n          >\n            {files.map(({ name, ...file }, index) => {\n              // eslint-disable-next-line react/no-array-index-key\n              return <FileUploadItem key={index} name={name} {...file} />;\n            })}\n          </Grid>\n        )}\n      </Grid>\n    );\n  }\n);\n\nexport default FileInput;\n"],"mappings":";AAAA,SAGEA,UAAU,EAEVC,WAAW,EAGXC,QAAQ,QACH,OAAO;AACd,OAAOC,MAAM,IAAIC,GAAG,QAAQ,mBAAmB;AAC/C,SAASC,YAAY,QAAQ,UAAU;AASvC,SAASC,kBAAkB,EAAEC,OAAO,EAAEC,MAAM,EAAEC,YAAY,EAAEC,UAAU,QAAQ,aAAa;AAC3F,OAAOC,WAAiC,MAAM,gBAAgB;AAC9D,SAASC,gBAAgB,QAAQ,aAAa;AAC9C,OAAOC,IAAI,MAAM,SAAS;AAC1B,OAAOC,IAAI,MAAM,SAAS;AAC1B,OAAOC,IAAI,IAAIC,YAAY,QAAQ,SAAS;AAC5C,OAAO,KAAKC,aAAa,MAAM,+BAA+B;AAC9D,OAAOC,SAAS,MAAM,cAAc;AACpC,OAAOC,IAAI,MAAM,SAAS;AAE1B,OAAOC,cAAuC,MAAM,kBAAkB;AACtE,SAASC,mBAAmB,QAAQ,iBAAiB;AAErDL,YAAY,CAACC,aAAa,CAAC;AAuC3B,OAAO,MAAMK,cAAc,GAAGnB,MAAM,CAACQ,WAAW,CAAC,CAAwBY,IAAA,IAAwB;EAAA,IAAvB;IAAEC,QAAQ;IAAEC;EAAK,CAAE,GAAAF,IAAA;EAC3F,OAAOnB,GAAG;wBACYqB,KAAK,CAACC,IAAI,CAACC,OAAO;;;;;MAKpCH,QAAQ,IACVpB,GAAG;;KAEF;GACF;AACH,CAAC,CAAC;AAEF,OAAO,MAAMwB,eAAe,GAAGzB,MAAM,CAAC0B,GAAG,CACvCC,KAAA,IAAc;EAAA,IAAb;IAAEL;EAAK,CAAE,GAAAK,KAAA;EACR,OAAO1B,GAAG;;;;UAIJC,YAAY;;;8BAGQiB,cAAc;sBACtBG,KAAK,CAACM,UAAU,CAAC,cAAc,CAAC,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC;;;wBAGtDT,cAAc;;;KAGjC;AACH,CAAC,CACF;AAEDM,eAAe,CAACI,YAAY,GAAGpB,gBAAgB;AAE/C,MAAMqB,qBAAqB,GAAG9B,MAAM,CAAC+B,IAAI,CAACC,KAAA,IAAc;EAAA,IAAb;IAAEV;EAAK,CAAE,GAAAU,KAAA;EAClD,OAAO/B,GAAG;aACCqB,KAAK,CAACC,IAAI,CAACU,OAAO,CAACC,WAAW;GACxC;AACH,CAAC,CAAC;AAEFJ,qBAAqB,CAACD,YAAY,GAAGpB,gBAAgB;AAErD,MAAM0B,SAAS,GAAqDtC,UAAU,CAC5E,CAACuC,KAAsC,EAAEC,GAA0B,KAAI;EACrE,MAAMC,GAAG,GAAGjC,MAAM,EAAE;EACpB,MAAM;IACJkC,MAAM;IACNC,EAAE,GAAGF,GAAG;IACRG,KAAK;IACLC,WAAW;IACXC,IAAI;IACJC,QAAQ,GAAG,KAAK;IAChBC,QAAQ,GAAG,KAAK;IAChBC,KAAK;IACLC,YAAY;IACZC,QAAQ,GAAG,KAAK;IAChBC,MAAM;IACN,GAAGC;EAAS,CACb,GAAGd,KAAK;EAET,MAAMe,OAAO,GAAG5C,UAAU,CAACgC,MAAM,EAAErB,mBAAmB,CAAC;EAEvD,MAAMkC,IAAI,GAAGC,IAAA,CAACzC,IAAI;IAAC0C,IAAI,EAAC;EAAY,EAAG;EACvC,MAAMC,QAAQ,GAAGpD,kBAAkB,CAACkC,GAAG,CAAC;EAExC,MAAMmB,QAAQ,GAAG1D,WAAW,CACzB2D,CAAgC,IAAI;IACnC,IAAIA,CAAC,CAACC,MAAM,CAACZ,KAAK,EAAE;MAClBC,YAAY,GAAGY,KAAK,CAACC,IAAI,CAACH,CAAC,CAACC,MAAM,CAACZ,KAAK,CAAC,CAAC;;IAE5C;;;;;;;;IAQA,IAAIS,QAAQ,CAACM,OAAO,EAAEN,QAAQ,CAACM,OAAO,CAACC,KAAK,GAAG,EAAE;EACnD,CAAC,EACD,CAACf,YAAY,CAAC,CACf;EAED,MAAMgB,CAAC,GAAG3D,OAAO,EAAE;EACnB,MAAM,CAACiB,QAAQ,EAAE2C,WAAW,CAAC,GAAGjE,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM;IAAEkE,GAAG;IAAEC;EAAG,CAAE,GAAG5D,YAAY,EAAE;EAEnC,MAAM6D,SAAS,GACbC,KAAA,CAAC3C,eAAe;IAAA4C,QAAA,GACdhB,IAAA;MAAA,eACeF,OAAO,CAACmB,OAAO;MAAA,GACxBpB,SAAS;MACbb,GAAG,EAAEkB,QAAQ;MACbgB,IAAI,EAAC,MAAM;MACX/B,EAAE,EAAEA,EAAE;MACNK,QAAQ,EAAEA,QAAQ;MAClBW,QAAQ,EAAEA,QAAQ;MAClBR,QAAQ,EAAEA;IAAQ,EAClB,EACFoB,KAAA,CAAC1D,IAAI;MACH8D,SAAS,EAAE;QAAEC,UAAU,EAAE,QAAQ;QAAEC,OAAO,EAAE;MAAQ,CAAE;MACtDC,IAAI,EAAE;QAAEC,IAAI,EAAE;MAAC,CAAE;MACjBC,EAAE,EAAE1D,cAAc;MAClBE,QAAQ,EAAEA,QAAQ;MAClByD,OAAO,EAAEA,CAAA,KAAK;QACZvB,QAAQ,CAACM,OAAO,EAAEkB,KAAK,EAAE;QACzBxB,QAAQ,CAACM,OAAO,EAAEmB,KAAK,EAAE;MAC3B,CAAC;MACDC,UAAU,EAAGxB,CAA4B,IAAI;QAC3CA,CAAC,CAACyB,cAAc,EAAE;MACpB,CAAC;MACDC,WAAW,EAAEA,CAAA,KAAMnB,WAAW,CAAC,IAAI,CAAC;MACpCoB,WAAW,EAAEA,CAAA,KAAMpB,WAAW,CAAC,KAAK,CAAC;MACrCqB,MAAM,EAAG5B,CAA4B,IAAI;QACvCA,CAAC,CAACyB,cAAc,EAAE;QAClBlB,WAAW,CAAC,KAAK,CAAC;QAClBjB,YAAY,GAAGY,KAAK,CAACC,IAAI,CAACH,CAAC,CAAC6B,YAAY,CAACxC,KAAK,CAAC,CAAC;MAClD,CAAC;MAAAuB,QAAA,GAEAJ,GAAG,IAAIb,IAAI,EACZgB,KAAA,CAACzD,IAAI;QAAC4E,OAAO,EAAC,SAAS;QAAAlB,QAAA,aAEpBN,CAAC,CAAC,uBAAuB,EAAE,CAC1BV,IAAA,CAACvB,qBAAqB;UAAAuC,QAAA,EACnBN,CAAC,CAACf,QAAQ,GAAG,2BAA2B,GAAG,sBAAsB;QAAC,EAC7C,CACzB,CAAC;MAAA,EAEG,EACNkB,GAAG,IAAId,IAAI;IAAA,EACP;EAAA,EAEV;EAED,OACEgB,KAAA,CAACpD,IAAI;IAACwD,SAAS,EAAE;MAAEgB,MAAM,EAAE;IAAC,CAAE;IAAAnB,QAAA,GAC3B5B,KAAK,GACJY,IAAA,CAACtC,SAAS;MAAA,GACJ;QACFwB,MAAM,EAAEY,OAAO;QACfV,KAAK;QACLC,WAAW;QACXF,EAAE;QACFG,IAAI;QACJC,QAAQ;QACRC,QAAQ;QACRI;OACD;MAAAoB,QAAA,EAEAF;IAAS,EACA,GAEZA,SACD,EACA,CAAC,CAACrB,KAAK,EAAE2C,MAAM,IACdpC,IAAA,CAACrC,IAAI;MAAA,eACUmC,OAAO,CAACL,KAAK;MAC1B0B,SAAS,EAAE;QACTkB,GAAG,EAAE,CAAC;QACNC,IAAI,EAAE;OACP;MACDd,EAAE,EAAC,IAAI;MAAAR,QAAA,EAENvB,KAAK,CAAC8C,GAAG,CAAC,CAAAC,KAAA,EAAoBC,KAAK,KAAI;QAAA,IAA5B;UAAExC,IAAI;UAAE,GAAGyC;QAAI,CAAE,GAAAF,KAAA;QAC3B;QACA,OAAOxC,IAAA,CAACpC,cAAc;UAAaqC,IAAI,EAAEA,IAAI;UAAA,GAAMyC;QAAI,GAA3BD,KAAK,CAA0B;MAC7D,CAAC;IAAC,EAEL;EAAA,EACI;AAEX,CAAC,CACF;AAED,eAAe3D,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}