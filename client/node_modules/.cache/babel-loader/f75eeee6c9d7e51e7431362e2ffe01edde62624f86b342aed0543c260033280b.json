{"ast":null,"code":"import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { forwardRef, useCallback, useRef } from 'react';\nimport styled, { css } from 'styled-components';\nimport { useConsolidatedRef, useFocusWithin, useI18n, useInputFormatter, useTestIds } from '../../hooks';\nimport { defaultThemeProp } from '../../theme';\nimport FormField from '../FormField';\nimport { StyledFormControl } from '../FormControl';\nimport StyledInput from '../Input/Input.styles';\nimport Select, { Option } from '../Select';\nimport Input from '../Input';\nimport { StyledSelect } from '../Select/Select';\nimport Flex from '../Flex';\nimport callingCodes from './callingCodes';\nimport { convertToCallbackParameter, formatPhoneNumber, getPhoneNumberParts } from './utils';\nimport { getPhoneInputTestIds } from './Phone.test-ids';\nconst StyledPhoneInput = styled.div(() => {\n  return css`\n    border: 0;\n    > ${StyledSelect} {\n      max-width: max-content;\n      border-inline-end: none;\n      border-start-end-radius: 0;\n      border-end-end-radius: 0;\n    }\n\n    > ${StyledSelect} + ${StyledInput} {\n      border-start-start-radius: 0;\n      border-end-start-radius: 0;\n    }\n  `;\n});\nStyledPhoneInput.defaultProps = defaultThemeProp;\nconst PhoneInput = forwardRef((props, ref) => {\n  const {\n    testId,\n    value,\n    id,\n    label,\n    labelHidden,\n    info,\n    status,\n    required,\n    readOnly,\n    disabled,\n    showCountryCode = false,\n    callingCodesList = callingCodes,\n    onChange,\n    onBlur,\n    onFocus,\n    onResolveSuggestion,\n    additionalInfo,\n    ...restProps\n  } = props;\n  const testIds = useTestIds(testId, getPhoneInputTestIds);\n  const t = useI18n();\n  const [countryCode = callingCodesList[0], subscriberNumber = ''] = value ? getPhoneNumberParts(value, callingCodesList) : [];\n  const onFocusChange = focused => {\n    const callbackParam = convertToCallbackParameter(countryCode, subscriberNumber);\n    if (focused) onFocus?.(callbackParam);else onBlur?.(callbackParam);\n  };\n  const onInputChange = e => {\n    onChange?.(convertToCallbackParameter(countryCode, e.target.value));\n  };\n  const onSelectChange = e => {\n    onChange?.(convertToCallbackParameter(e.target.value, subscriberNumber));\n  };\n  const inputRef = useConsolidatedRef(ref);\n  const containerRef = useRef(null);\n  useFocusWithin([containerRef], onFocusChange);\n  const formatter = useCallback(number => {\n    return formatPhoneNumber(number.replace(/\\D+/g, ''), countryCode);\n  }, [countryCode]);\n  const formatted = useInputFormatter(inputRef, subscriberNumber, formatter);\n  const codesOptions = _jsx(_Fragment, {\n    children: callingCodesList.map(code => _jsx(Option, {\n      value: code,\n      children: code\n    }, code))\n  });\n  const Comp = _jsxs(StyledPhoneInput, {\n    \"data-testid\": testIds.root,\n    as: StyledFormControl,\n    forwardedAs: Flex,\n    container: {\n      alignItems: 'center',\n      wrap: 'nowrap'\n    },\n    ref: containerRef,\n    status: status,\n    readOnly: readOnly,\n    disabled: disabled,\n    children: [showCountryCode && _jsx(Select, {\n      \"data-testid\": testIds.countryCode,\n      value: countryCode,\n      \"aria-label\": t('select_country_code'),\n      onChange: onSelectChange,\n      required: required,\n      status: status,\n      readOnly: readOnly,\n      disabled: disabled,\n      autoComplete: 'tel-country-code',\n      hasSuggestion: status === 'pending' && !!onResolveSuggestion,\n      children: codesOptions\n    }), _jsx(Input, {\n      \"data-testid\": testIds.control,\n      ...restProps,\n      inputMode: 'tel',\n      ref: inputRef,\n      value: formatted,\n      \"aria-label\": t('enter_a_number'),\n      onChange: onInputChange,\n      required: required,\n      status: status,\n      readOnly: readOnly,\n      disabled: disabled,\n      autoComplete: 'tel-national',\n      hasSuggestion: status === 'pending' && !!onResolveSuggestion\n    })]\n  });\n  return label ? _jsx(FormField, {\n    as: 'fieldset',\n    labelAs: 'legend',\n    ...{\n      testId: testIds,\n      additionalInfo,\n      label,\n      labelHidden,\n      id,\n      info,\n      status,\n      required,\n      disabled,\n      onResolveSuggestion\n    },\n    children: Comp\n  }) : Comp;\n});\nexport default PhoneInput;","map":{"version":3,"names":["forwardRef","useCallback","useRef","styled","css","useConsolidatedRef","useFocusWithin","useI18n","useInputFormatter","useTestIds","defaultThemeProp","FormField","StyledFormControl","StyledInput","Select","Option","Input","StyledSelect","Flex","callingCodes","convertToCallbackParameter","formatPhoneNumber","getPhoneNumberParts","getPhoneInputTestIds","StyledPhoneInput","div","defaultProps","PhoneInput","props","ref","testId","value","id","label","labelHidden","info","status","required","readOnly","disabled","showCountryCode","callingCodesList","onChange","onBlur","onFocus","onResolveSuggestion","additionalInfo","restProps","testIds","t","countryCode","subscriberNumber","onFocusChange","focused","callbackParam","onInputChange","e","target","onSelectChange","inputRef","containerRef","formatter","number","replace","formatted","codesOptions","_jsx","_Fragment","children","map","code","Comp","_jsxs","root","as","forwardedAs","container","alignItems","wrap","autoComplete","hasSuggestion","control","inputMode","labelAs"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/components/Phone/PhoneInput.tsx"],"sourcesContent":["import {\n  ChangeEvent,\n  forwardRef,\n  FunctionComponent,\n  PropsWithoutRef,\n  Ref,\n  useCallback,\n  useRef\n} from 'react';\nimport styled, { css } from 'styled-components';\n\nimport {\n  useConsolidatedRef,\n  useFocusWithin,\n  useI18n,\n  useInputFormatter,\n  useTestIds\n} from '../../hooks';\nimport { defaultThemeProp } from '../../theme';\nimport {\n  BaseProps,\n  ForwardProps,\n  NoChildrenProp,\n  PropsWithDefaults,\n  TestIdProp\n} from '../../types';\nimport FormField from '../FormField';\nimport { FormControlProps, StyledFormControl } from '../FormControl';\nimport StyledInput from '../Input/Input.styles';\nimport Select, { Option } from '../Select';\nimport Input from '../Input';\nimport { StyledSelect } from '../Select/Select';\nimport Flex from '../Flex';\n\nimport callingCodes from './callingCodes';\nimport { convertToCallbackParameter, formatPhoneNumber, getPhoneNumberParts } from './utils';\nimport { getPhoneInputTestIds } from './Phone.test-ids';\n\nexport interface PhoneInputProps extends FormControlProps, BaseProps, NoChildrenProp, TestIdProp {\n  /**\n   * Display select with countries calling codes\n   * @default false\n   */\n  showCountryCode?: boolean;\n  /** Changes lists of countries calling codes */\n  callingCodesList?: string[];\n  /** Callback fired on input value change */\n  onChange?: (value: string) => void;\n  /** Callback fired when the component loses focus */\n  onBlur?: (value: string) => void;\n  /** CCallback fired when the component gets focus */\n  onFocus?: (value: string) => void;\n  /** Ref for the wrapping element. */\n  ref?: Ref<HTMLInputElement>;\n}\n\ntype PhoneInputPropsWithDefaults = PropsWithDefaults<PhoneInputProps>;\n\nconst StyledPhoneInput = styled.div<PhoneInputPropsWithDefaults>(() => {\n  return css`\n    border: 0;\n    > ${StyledSelect} {\n      max-width: max-content;\n      border-inline-end: none;\n      border-start-end-radius: 0;\n      border-end-end-radius: 0;\n    }\n\n    > ${StyledSelect} + ${StyledInput} {\n      border-start-start-radius: 0;\n      border-end-start-radius: 0;\n    }\n  `;\n});\n\nStyledPhoneInput.defaultProps = defaultThemeProp;\n\nconst PhoneInput: FunctionComponent<PhoneInputProps & ForwardProps> = forwardRef(\n  (props: PropsWithoutRef<PhoneInputProps>, ref: PhoneInputProps['ref']) => {\n    const {\n      testId,\n      value,\n      id,\n      label,\n      labelHidden,\n      info,\n      status,\n      required,\n      readOnly,\n      disabled,\n      showCountryCode = false,\n      callingCodesList = callingCodes,\n      onChange,\n      onBlur,\n      onFocus,\n      onResolveSuggestion,\n      additionalInfo,\n      ...restProps\n    } = props;\n\n    const testIds = useTestIds(testId, getPhoneInputTestIds);\n\n    const t = useI18n();\n\n    const [countryCode = callingCodesList[0], subscriberNumber = ''] = value\n      ? getPhoneNumberParts(value, callingCodesList)\n      : [];\n\n    const onFocusChange = (focused: boolean) => {\n      const callbackParam = convertToCallbackParameter(countryCode, subscriberNumber);\n      if (focused) onFocus?.(callbackParam);\n      else onBlur?.(callbackParam);\n    };\n\n    const onInputChange = (e: ChangeEvent<HTMLInputElement>) => {\n      onChange?.(convertToCallbackParameter(countryCode, e.target.value));\n    };\n\n    const onSelectChange = (e: ChangeEvent<HTMLSelectElement>) => {\n      onChange?.(convertToCallbackParameter(e.target.value, subscriberNumber));\n    };\n\n    const inputRef = useConsolidatedRef<HTMLInputElement>(ref);\n    const containerRef = useRef<HTMLElement>(null);\n    useFocusWithin([containerRef], onFocusChange);\n\n    const formatter = useCallback(\n      number => {\n        return formatPhoneNumber(number.replace(/\\D+/g, ''), countryCode);\n      },\n      [countryCode]\n    );\n\n    const formatted = useInputFormatter(inputRef, subscriberNumber, formatter);\n\n    const codesOptions = (\n      <>\n        {callingCodesList.map(code => (\n          <Option key={code} value={code}>\n            {code}\n          </Option>\n        ))}\n      </>\n    );\n\n    const Comp = (\n      <StyledPhoneInput\n        data-testid={testIds.root}\n        as={StyledFormControl}\n        forwardedAs={Flex as any}\n        container={{ alignItems: 'center', wrap: 'nowrap' }}\n        ref={containerRef}\n        status={status}\n        readOnly={readOnly}\n        disabled={disabled}\n      >\n        {showCountryCode && (\n          <Select\n            data-testid={testIds.countryCode}\n            value={countryCode}\n            aria-label={t('select_country_code')}\n            onChange={onSelectChange}\n            required={required}\n            status={status}\n            readOnly={readOnly}\n            disabled={disabled}\n            autoComplete='tel-country-code'\n            hasSuggestion={status === 'pending' && !!onResolveSuggestion}\n          >\n            {codesOptions}\n          </Select>\n        )}\n        <Input\n          data-testid={testIds.control}\n          {...restProps}\n          inputMode='tel'\n          ref={inputRef}\n          value={formatted}\n          aria-label={t('enter_a_number')}\n          onChange={onInputChange}\n          required={required}\n          status={status}\n          readOnly={readOnly}\n          disabled={disabled}\n          autoComplete='tel-national'\n          hasSuggestion={status === 'pending' && !!onResolveSuggestion}\n        />\n      </StyledPhoneInput>\n    );\n\n    return label ? (\n      <FormField\n        as='fieldset'\n        labelAs='legend'\n        {...{\n          testId: testIds,\n          additionalInfo,\n          label,\n          labelHidden,\n          id,\n          info,\n          status,\n          required,\n          disabled,\n          onResolveSuggestion\n        }}\n      >\n        {Comp}\n      </FormField>\n    ) : (\n      Comp\n    );\n  }\n);\n\nexport default PhoneInput;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}