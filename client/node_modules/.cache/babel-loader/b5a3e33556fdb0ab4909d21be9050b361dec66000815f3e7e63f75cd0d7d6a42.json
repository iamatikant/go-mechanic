{"ast":null,"code":"import { useRef, useState } from 'react';\nimport { debounce } from '../utils';\n/**\n * @example const [ref, resizeFunction] = useAutoResize();\n * maxHeight should be provided in pixels without units\n * minHeight should be provided in pixels without units\n * @returns * ref:: A reference for the element that the resize functionality should be applied to. [React RefObject](https://reactjs.org/docs/refs-and-the-dom.html)\n *          * resizeFunction:: The function to call to automatically resize the element.\n * element refers to auto resizable element\n */\nconst useAutoResize = (maxHeight, minHeightProp) => {\n  const element = useRef(null);\n  const [minHeight, setMinHeight] = useState(minHeightProp || 0);\n  const autoResize = () => {\n    let scrollHeightElement = element.current;\n    let iframe;\n    if (element.current && element.current instanceof HTMLIFrameElement) {\n      iframe = element.current;\n      scrollHeightElement = element.current.contentDocument?.querySelector('body') ?? element.current;\n    }\n    if (element.current) {\n      let newMinHeight = minHeight;\n      if (!minHeight) {\n        newMinHeight = scrollHeightElement.scrollHeight + (scrollHeightElement.offsetHeight - scrollHeightElement.clientHeight);\n        setMinHeight(newMinHeight);\n      }\n      // Reset the heights to the base height so there is an overflow / or none to calculate the new height\n      scrollHeightElement.style.height = `${newMinHeight}px`;\n      if (maxHeight) {\n        scrollHeightElement.style.overflowY = scrollHeightElement.scrollHeight > maxHeight ? 'auto' : 'hidden';\n        const height = `${Math.min(scrollHeightElement.scrollHeight + (scrollHeightElement.offsetHeight - scrollHeightElement.clientHeight), maxHeight)}px`;\n        scrollHeightElement.style.height = height;\n        if (iframe) iframe.style.height = height;\n      } else {\n        scrollHeightElement.style.overflowY = 'hidden';\n        const height = scrollHeightElement.scrollHeight + (scrollHeightElement.offsetHeight - scrollHeightElement.clientHeight);\n        scrollHeightElement.style.height = `${height}px`;\n        if (iframe) iframe.style.height = `${height}px`;\n      }\n    }\n  };\n  const debouncedAutoResize = debounce(autoResize, 100);\n  return [element, debouncedAutoResize];\n};\nexport default useAutoResize;","map":{"version":3,"names":["useRef","useState","debounce","useAutoResize","maxHeight","minHeightProp","element","minHeight","setMinHeight","autoResize","scrollHeightElement","current","iframe","HTMLIFrameElement","contentDocument","querySelector","newMinHeight","scrollHeight","offsetHeight","clientHeight","style","height","overflowY","Math","min","debouncedAutoResize"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/hooks/useAutoResize.ts"],"sourcesContent":["import { useRef, useState, MutableRefObject } from 'react';\n\nimport { debounce } from '../utils';\n\n/**\n * @example const [ref, resizeFunction] = useAutoResize();\n * maxHeight should be provided in pixels without units\n * minHeight should be provided in pixels without units\n * @returns * ref:: A reference for the element that the resize functionality should be applied to. [React RefObject](https://reactjs.org/docs/refs-and-the-dom.html)\n *          * resizeFunction:: The function to call to automatically resize the element.\n * element refers to auto resizable element\n */\nconst useAutoResize = <T extends HTMLElement = HTMLElement>(\n  maxHeight?: number,\n  minHeightProp?: number\n): [MutableRefObject<T | null>, () => void] => {\n  const element = useRef<T | null>(null);\n  const [minHeight, setMinHeight] = useState(minHeightProp || 0);\n\n  const autoResize = () => {\n    let scrollHeightElement: HTMLElement = element.current as HTMLElement;\n    let iframe: HTMLIFrameElement | undefined;\n    if (element.current && element.current instanceof HTMLIFrameElement) {\n      iframe = element.current;\n      scrollHeightElement =\n        element.current.contentDocument?.querySelector('body') ?? element.current;\n    }\n    if (element.current) {\n      let newMinHeight = minHeight;\n      if (!minHeight) {\n        newMinHeight =\n          scrollHeightElement.scrollHeight +\n          (scrollHeightElement.offsetHeight - scrollHeightElement.clientHeight);\n        setMinHeight(newMinHeight);\n      }\n      // Reset the heights to the base height so there is an overflow / or none to calculate the new height\n      scrollHeightElement.style.height = `${newMinHeight}px`;\n\n      if (maxHeight) {\n        scrollHeightElement.style.overflowY =\n          scrollHeightElement.scrollHeight > maxHeight ? 'auto' : 'hidden';\n        const height = `${Math.min(\n          scrollHeightElement.scrollHeight +\n            (scrollHeightElement.offsetHeight - scrollHeightElement.clientHeight),\n          maxHeight\n        )}px`;\n        scrollHeightElement.style.height = height;\n        if (iframe) iframe.style.height = height;\n      } else {\n        scrollHeightElement.style.overflowY = 'hidden';\n        const height =\n          scrollHeightElement.scrollHeight +\n          (scrollHeightElement.offsetHeight - scrollHeightElement.clientHeight);\n        scrollHeightElement.style.height = `${height}px`;\n        if (iframe) iframe.style.height = `${height}px`;\n      }\n    }\n  };\n\n  const debouncedAutoResize = debounce(autoResize, 100);\n\n  return [element, debouncedAutoResize];\n};\n\nexport default useAutoResize;\n"],"mappings":"AAAA,SAASA,MAAM,EAAEC,QAAQ,QAA0B,OAAO;AAE1D,SAASC,QAAQ,QAAQ,UAAU;AAEnC;;;;;;;;AAQA,MAAMC,aAAa,GAAGA,CACpBC,SAAkB,EAClBC,aAAsB,KACsB;EAC5C,MAAMC,OAAO,GAAGN,MAAM,CAAW,IAAI,CAAC;EACtC,MAAM,CAACO,SAAS,EAAEC,YAAY,CAAC,GAAGP,QAAQ,CAACI,aAAa,IAAI,CAAC,CAAC;EAE9D,MAAMI,UAAU,GAAGA,CAAA,KAAK;IACtB,IAAIC,mBAAmB,GAAgBJ,OAAO,CAACK,OAAsB;IACrE,IAAIC,MAAqC;IACzC,IAAIN,OAAO,CAACK,OAAO,IAAIL,OAAO,CAACK,OAAO,YAAYE,iBAAiB,EAAE;MACnED,MAAM,GAAGN,OAAO,CAACK,OAAO;MACxBD,mBAAmB,GACjBJ,OAAO,CAACK,OAAO,CAACG,eAAe,EAAEC,aAAa,CAAC,MAAM,CAAC,IAAIT,OAAO,CAACK,OAAO;;IAE7E,IAAIL,OAAO,CAACK,OAAO,EAAE;MACnB,IAAIK,YAAY,GAAGT,SAAS;MAC5B,IAAI,CAACA,SAAS,EAAE;QACdS,YAAY,GACVN,mBAAmB,CAACO,YAAY,IAC/BP,mBAAmB,CAACQ,YAAY,GAAGR,mBAAmB,CAACS,YAAY,CAAC;QACvEX,YAAY,CAACQ,YAAY,CAAC;;MAE5B;MACAN,mBAAmB,CAACU,KAAK,CAACC,MAAM,GAAG,GAAGL,YAAY,IAAI;MAEtD,IAAIZ,SAAS,EAAE;QACbM,mBAAmB,CAACU,KAAK,CAACE,SAAS,GACjCZ,mBAAmB,CAACO,YAAY,GAAGb,SAAS,GAAG,MAAM,GAAG,QAAQ;QAClE,MAAMiB,MAAM,GAAG,GAAGE,IAAI,CAACC,GAAG,CACxBd,mBAAmB,CAACO,YAAY,IAC7BP,mBAAmB,CAACQ,YAAY,GAAGR,mBAAmB,CAACS,YAAY,CAAC,EACvEf,SAAS,CACV,IAAI;QACLM,mBAAmB,CAACU,KAAK,CAACC,MAAM,GAAGA,MAAM;QACzC,IAAIT,MAAM,EAAEA,MAAM,CAACQ,KAAK,CAACC,MAAM,GAAGA,MAAM;OACzC,MAAM;QACLX,mBAAmB,CAACU,KAAK,CAACE,SAAS,GAAG,QAAQ;QAC9C,MAAMD,MAAM,GACVX,mBAAmB,CAACO,YAAY,IAC/BP,mBAAmB,CAACQ,YAAY,GAAGR,mBAAmB,CAACS,YAAY,CAAC;QACvET,mBAAmB,CAACU,KAAK,CAACC,MAAM,GAAG,GAAGA,MAAM,IAAI;QAChD,IAAIT,MAAM,EAAEA,MAAM,CAACQ,KAAK,CAACC,MAAM,GAAG,GAAGA,MAAM,IAAI;;;EAGrD,CAAC;EAED,MAAMI,mBAAmB,GAAGvB,QAAQ,CAACO,UAAU,EAAE,GAAG,CAAC;EAErD,OAAO,CAACH,OAAO,EAAEmB,mBAAmB,CAAC;AACvC,CAAC;AAED,eAAetB,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}