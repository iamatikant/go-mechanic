{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { forwardRef, useEffect, useRef, useState } from 'react';\nimport * as QRCodeLib from 'qrcode';\nimport styled, { css } from 'styled-components';\nimport { defaultThemeProp } from '../../theme';\nimport Flex from '../Flex';\nimport Image from '../Image';\nimport { useI18n } from '../../hooks';\nimport EmptyState from '../EmptyState';\nexport const StyledEmptyQRWrapper = styled.div(_ref => {\n  let {\n    theme\n  } = _ref;\n  return css`\n    height: ${theme.base['content-width'].xs};\n    width: ${theme.base['content-width'].xs};\n    border: 0.0625rem solid ${theme.base.palette['border-line']};\n    border-radius: calc(${theme.base['border-radius']} / 2);\n    text-align: center;\n  `;\n});\nStyledEmptyQRWrapper.defaultProps = defaultThemeProp;\nconst QRCode = forwardRef((_ref2, ref) => {\n  let {\n    value,\n    label = value,\n    ...restProps\n  } = _ref2;\n  const [dataURL, setDataURL] = useState('');\n  const t = useI18n();\n  const mounted = useRef(false);\n  useEffect(() => {\n    mounted.current = true;\n    return () => {\n      mounted.current = false;\n    };\n  }, []);\n  useEffect(() => {\n    QRCodeLib.toDataURL(value).then(results => {\n      if (mounted.current) setDataURL(results);\n    }).catch(() => {\n      setDataURL('');\n    });\n  }, [value]);\n  return dataURL ? _jsx(Image, {\n    ...restProps,\n    ref: ref,\n    src: dataURL,\n    alt: label\n  }) : _jsx(Flex, {\n    ...restProps,\n    ref: ref,\n    container: {\n      direction: 'column',\n      alignItems: 'center',\n      justify: 'center',\n      gap: 1,\n      pad: 2\n    },\n    as: StyledEmptyQRWrapper,\n    children: _jsx(EmptyState, {\n      message: t('qr_code_not_available')\n    })\n  });\n});\nexport default QRCode;","map":{"version":3,"names":["forwardRef","useEffect","useRef","useState","QRCodeLib","styled","css","defaultThemeProp","Flex","Image","useI18n","EmptyState","StyledEmptyQRWrapper","div","_ref","theme","base","xs","palette","defaultProps","QRCode","_ref2","ref","value","label","restProps","dataURL","setDataURL","t","mounted","current","toDataURL","then","results","catch","_jsx","src","alt","container","direction","alignItems","justify","gap","pad","as","children","message"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/components/QRCode/QRCode.tsx"],"sourcesContent":["import {\n  forwardRef,\n  FunctionComponent,\n  PropsWithoutRef,\n  Ref,\n  useEffect,\n  useRef,\n  useState\n} from 'react';\nimport * as QRCodeLib from 'qrcode';\nimport styled, { css } from 'styled-components';\n\nimport { BaseProps, ForwardProps } from '../../types';\nimport { defaultThemeProp } from '../../theme';\nimport Flex from '../Flex';\nimport Image from '../Image';\nimport { useI18n } from '../../hooks';\nimport EmptyState from '../EmptyState';\n\nexport const StyledEmptyQRWrapper = styled.div(({ theme }) => {\n  return css`\n    height: ${theme.base['content-width'].xs};\n    width: ${theme.base['content-width'].xs};\n    border: 0.0625rem solid ${theme.base.palette['border-line']};\n    border-radius: calc(${theme.base['border-radius']} / 2);\n    text-align: center;\n  `;\n});\n\nStyledEmptyQRWrapper.defaultProps = defaultThemeProp;\n\nexport interface QRCodeProps extends BaseProps {\n  /** Text that need to be encoded into QR code. */\n  value: string;\n  /** The HTML alt attribute for the image. */\n  label?: string;\n  /** Ref for the wrapping element. */\n  ref?: Ref<HTMLImageElement | HTMLDivElement>;\n}\n\nconst QRCode: FunctionComponent<QRCodeProps & ForwardProps> = forwardRef(\n  (\n    { value, label = value, ...restProps }: PropsWithoutRef<QRCodeProps>,\n    ref: QRCodeProps['ref']\n  ) => {\n    const [dataURL, setDataURL] = useState('');\n    const t = useI18n();\n\n    const mounted = useRef(false);\n    useEffect(() => {\n      mounted.current = true;\n      return () => {\n        mounted.current = false;\n      };\n    }, []);\n\n    useEffect(() => {\n      QRCodeLib.toDataURL(value)\n        .then(results => {\n          if (mounted.current) setDataURL(results);\n        })\n        .catch(() => {\n          setDataURL('');\n        });\n    }, [value]);\n\n    return dataURL ? (\n      <Image {...restProps} ref={ref as Ref<HTMLImageElement>} src={dataURL} alt={label} />\n    ) : (\n      <Flex\n        {...restProps}\n        ref={ref}\n        container={{\n          direction: 'column',\n          alignItems: 'center',\n          justify: 'center',\n          gap: 1,\n          pad: 2\n        }}\n        as={StyledEmptyQRWrapper}\n      >\n        <EmptyState message={t('qr_code_not_available')} />\n      </Flex>\n    );\n  }\n);\n\nexport default QRCode;\n"],"mappings":";AAAA,SACEA,UAAU,EAIVC,SAAS,EACTC,MAAM,EACNC,QAAQ,QACH,OAAO;AACd,OAAO,KAAKC,SAAS,MAAM,QAAQ;AACnC,OAAOC,MAAM,IAAIC,GAAG,QAAQ,mBAAmB;AAG/C,SAASC,gBAAgB,QAAQ,aAAa;AAC9C,OAAOC,IAAI,MAAM,SAAS;AAC1B,OAAOC,KAAK,MAAM,UAAU;AAC5B,SAASC,OAAO,QAAQ,aAAa;AACrC,OAAOC,UAAU,MAAM,eAAe;AAEtC,OAAO,MAAMC,oBAAoB,GAAGP,MAAM,CAACQ,GAAG,CAACC,IAAA,IAAc;EAAA,IAAb;IAAEC;EAAK,CAAE,GAAAD,IAAA;EACvD,OAAOR,GAAG;cACES,KAAK,CAACC,IAAI,CAAC,eAAe,CAAC,CAACC,EAAE;aAC/BF,KAAK,CAACC,IAAI,CAAC,eAAe,CAAC,CAACC,EAAE;8BACbF,KAAK,CAACC,IAAI,CAACE,OAAO,CAAC,aAAa,CAAC;0BACrCH,KAAK,CAACC,IAAI,CAAC,eAAe,CAAC;;GAElD;AACH,CAAC,CAAC;AAEFJ,oBAAoB,CAACO,YAAY,GAAGZ,gBAAgB;AAWpD,MAAMa,MAAM,GAAkDpB,UAAU,CACtE,CAAAqB,KAAA,EAEEC,GAAuB,KACrB;EAAA,IAFF;IAAEC,KAAK;IAAEC,KAAK,GAAGD,KAAK;IAAE,GAAGE;EAAS,CAAgC,GAAAJ,KAAA;EAGpE,MAAM,CAACK,OAAO,EAAEC,UAAU,CAAC,GAAGxB,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAMyB,CAAC,GAAGlB,OAAO,EAAE;EAEnB,MAAMmB,OAAO,GAAG3B,MAAM,CAAC,KAAK,CAAC;EAC7BD,SAAS,CAAC,MAAK;IACb4B,OAAO,CAACC,OAAO,GAAG,IAAI;IACtB,OAAO,MAAK;MACVD,OAAO,CAACC,OAAO,GAAG,KAAK;IACzB,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN7B,SAAS,CAAC,MAAK;IACbG,SAAS,CAAC2B,SAAS,CAACR,KAAK,CAAC,CACvBS,IAAI,CAACC,OAAO,IAAG;MACd,IAAIJ,OAAO,CAACC,OAAO,EAAEH,UAAU,CAACM,OAAO,CAAC;IAC1C,CAAC,CAAC,CACDC,KAAK,CAAC,MAAK;MACVP,UAAU,CAAC,EAAE,CAAC;IAChB,CAAC,CAAC;EACN,CAAC,EAAE,CAACJ,KAAK,CAAC,CAAC;EAEX,OAAOG,OAAO,GACZS,IAAA,CAAC1B,KAAK;IAAA,GAAKgB,SAAS;IAAEH,GAAG,EAAEA,GAA4B;IAAEc,GAAG,EAAEV,OAAO;IAAEW,GAAG,EAAEb;EAAK,EAAI,GAErFW,IAAA,CAAC3B,IAAI;IAAA,GACCiB,SAAS;IACbH,GAAG,EAAEA,GAAG;IACRgB,SAAS,EAAE;MACTC,SAAS,EAAE,QAAQ;MACnBC,UAAU,EAAE,QAAQ;MACpBC,OAAO,EAAE,QAAQ;MACjBC,GAAG,EAAE,CAAC;MACNC,GAAG,EAAE;KACN;IACDC,EAAE,EAAEhC,oBAAoB;IAAAiC,QAAA,EAExBV,IAAA,CAACxB,UAAU;MAACmC,OAAO,EAAElB,CAAC,CAAC,uBAAuB;IAAC;EAAI,EAEtD;AACH,CAAC,CACF;AAED,eAAeR,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}