{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { forwardRef, useCallback, useState, useEffect } from 'react';\nimport FormField from '../FormField';\nimport { StyledFormControl } from '../FormControl';\nimport { hasProp } from '../../utils';\nimport { useAutoResize, useConsolidatedRef, useI18n, useTestIds, useUID } from '../../hooks';\nimport Text from '../Text';\nimport StyledTextArea from './TextArea.styles';\nimport { getTextAreaTestIds } from './TextArea.test-ids';\nconst TextArea = forwardRef((props, ref) => {\n  const uid = useUID();\n  const {\n    testId,\n    additionalInfo,\n    id = uid,\n    value,\n    defaultValue,\n    required = false,\n    disabled = false,\n    readOnly = false,\n    label,\n    labelHidden,\n    info,\n    status,\n    resizable = false,\n    autoResize = true,\n    maxLength,\n    displayCharCount = false,\n    hardStop = true,\n    onChange: onChangeProp,\n    onResolveSuggestion,\n    ...restProps\n  } = props;\n  const t = useI18n();\n  const testIds = useTestIds(testId, getTextAreaTestIds);\n  const [textAreaRef, resizeTextArea] = useAutoResize();\n  const consolidatedRef = useConsolidatedRef(textAreaRef, ref);\n  const [charCount, setCharCount] = useState(0);\n  const controlProp = {};\n  useEffect(() => {\n    if ('value' in props) {\n      setCharCount(props.value ? props.value.length : 0);\n    } else if ('defaultValue' in props) {\n      setCharCount(props.defaultValue ? props.defaultValue.length : 0);\n    }\n  }, [props]);\n  // Conditionally render component as controlled/uncontrolled\n  if (hasProp(props, 'value')) {\n    controlProp.value = value ?? '';\n  } else if (hasProp(props, 'defaultValue')) {\n    controlProp.defaultValue = defaultValue ?? '';\n  }\n  const onChange = useCallback(e => {\n    if (!hardStop || maxLength === undefined || e.target.value.length <= maxLength) {\n      onChangeProp?.(e);\n      setCharCount(e.target.value.length);\n      resizeTextArea();\n    }\n  }, [onChangeProp, resizeTextArea, hardStop, maxLength]);\n  const Comp = _jsx(StyledFormControl, {\n    ...{\n      'data-testid': testIds.control,\n      ref: autoResize ? consolidatedRef : ref,\n      id,\n      required,\n      disabled,\n      status,\n      readOnly,\n      resizable,\n      maxLength: hardStop ? maxLength : undefined,\n      hasSuggestion: status === 'pending' && !!onResolveSuggestion,\n      ...controlProp,\n      ...restProps,\n      onChange,\n      as: StyledTextArea\n    }\n  });\n  return label || displayCharCount ? _jsx(FormField, {\n    ...{\n      testId: testIds,\n      additionalInfo,\n      label,\n      labelHidden,\n      id,\n      readOnly,\n      info,\n      status,\n      charLimitDisplay: displayCharCount && typeof maxLength === 'number' ? _jsx(Text, {\n        readOnly: readOnly,\n        variant: 'secondary',\n        \"aria-live\": maxLength >= 0 && maxLength - charCount <= 20 ? 'polite' : 'off',\n        children: maxLength >= 0 ? t('x_of_y', [charCount || '0', maxLength]) : charCount\n      }) : undefined,\n      required,\n      disabled,\n      onResolveSuggestion\n    },\n    children: Comp\n  }) : Comp;\n});\nexport default TextArea;","map":{"version":3,"names":["forwardRef","useCallback","useState","useEffect","FormField","StyledFormControl","hasProp","useAutoResize","useConsolidatedRef","useI18n","useTestIds","useUID","Text","StyledTextArea","getTextAreaTestIds","TextArea","props","ref","uid","testId","additionalInfo","id","value","defaultValue","required","disabled","readOnly","label","labelHidden","info","status","resizable","autoResize","maxLength","displayCharCount","hardStop","onChange","onChangeProp","onResolveSuggestion","restProps","t","testIds","textAreaRef","resizeTextArea","consolidatedRef","charCount","setCharCount","controlProp","length","e","undefined","target","Comp","_jsx","control","hasSuggestion","as","charLimitDisplay","variant","children"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/components/TextArea/TextArea.tsx"],"sourcesContent":["import {\n  FC,\n  Ref,\n  forwardRef,\n  PropsWithoutRef,\n  ChangeEvent,\n  useCallback,\n  useState,\n  ChangeEventHandler,\n  useEffect\n} from 'react';\n\nimport { BaseProps, ForwardProps, NoChildrenProp, TestIdProp } from '../../types';\nimport FormField from '../FormField';\nimport { FormControlProps, StyledFormControl } from '../FormControl';\nimport { hasProp } from '../../utils';\nimport { useAutoResize, useConsolidatedRef, useI18n, useTestIds, useUID } from '../../hooks';\nimport Text from '../Text';\n\nimport StyledTextArea from './TextArea.styles';\nimport { getTextAreaTestIds } from './TextArea.test-ids';\n\nexport interface TextAreaProps extends FormControlProps, BaseProps, NoChildrenProp, TestIdProp {\n  /** Minimum length of characters that can be input. */\n  minLength?: number;\n  /** Maximum length of characters that can be input. */\n  maxLength?: number;\n  /**\n   * Allows the user to resize the Text Area.\n   * @default false\n   */\n  resizable?: boolean;\n  /**\n   * Enables the Text Area to resize itself automatically.\n   * @default true\n   */\n  autoResize?: boolean;\n  /**\n   * Display a live character count in relation to the maxLength.\n   * @default false\n   */\n  displayCharCount?: boolean;\n  /**\n   * Allow or disallow a value beyond the maxLength.\n   * @default true\n   */\n  hardStop?: boolean;\n  onChange?: ChangeEventHandler<HTMLTextAreaElement>;\n}\n\nconst TextArea: FC<TextAreaProps & ForwardProps> = forwardRef(\n  (props: PropsWithoutRef<TextAreaProps>, ref: Ref<HTMLTextAreaElement>) => {\n    const uid = useUID();\n    const {\n      testId,\n      additionalInfo,\n      id = uid,\n      value,\n      defaultValue,\n      required = false,\n      disabled = false,\n      readOnly = false,\n      label,\n      labelHidden,\n      info,\n      status,\n      resizable = false,\n      autoResize = true,\n      maxLength,\n      displayCharCount = false,\n      hardStop = true,\n      onChange: onChangeProp,\n      onResolveSuggestion,\n      ...restProps\n    } = props;\n    const t = useI18n();\n\n    const testIds = useTestIds(testId, getTextAreaTestIds);\n\n    const [textAreaRef, resizeTextArea] = useAutoResize<HTMLTextAreaElement>();\n    const consolidatedRef = useConsolidatedRef(textAreaRef, ref);\n    const [charCount, setCharCount] = useState(0);\n\n    const controlProp: {\n      value?: string;\n      defaultValue?: string;\n    } = {};\n\n    useEffect(() => {\n      if ('value' in props) {\n        setCharCount(props.value ? props.value.length : 0);\n      } else if ('defaultValue' in props) {\n        setCharCount(props.defaultValue ? props.defaultValue.length : 0);\n      }\n    }, [props]);\n\n    // Conditionally render component as controlled/uncontrolled\n    if (hasProp(props, 'value')) {\n      controlProp.value = value ?? '';\n    } else if (hasProp(props, 'defaultValue')) {\n      controlProp.defaultValue = defaultValue ?? '';\n    }\n\n    const onChange = useCallback(\n      (e: ChangeEvent<HTMLTextAreaElement>) => {\n        if (!hardStop || maxLength === undefined || e.target.value.length <= maxLength) {\n          onChangeProp?.(e);\n          setCharCount(e.target.value.length);\n          resizeTextArea();\n        }\n      },\n      [onChangeProp, resizeTextArea, hardStop, maxLength]\n    );\n\n    const Comp = (\n      <StyledFormControl\n        {...{\n          'data-testid': testIds.control,\n          ref: autoResize ? consolidatedRef : ref,\n          id,\n          required,\n          disabled,\n          status,\n          readOnly,\n          resizable,\n          maxLength: hardStop ? maxLength : undefined,\n          hasSuggestion: status === 'pending' && !!onResolveSuggestion,\n          ...controlProp,\n          ...restProps,\n          onChange,\n          as: StyledTextArea\n        }}\n      />\n    );\n\n    return label || displayCharCount ? (\n      <FormField\n        {...{\n          testId: testIds,\n          additionalInfo,\n          label,\n          labelHidden,\n          id,\n          readOnly,\n          info,\n          status,\n          charLimitDisplay:\n            displayCharCount && typeof maxLength === 'number' ? (\n              <Text\n                readOnly={readOnly}\n                variant='secondary'\n                aria-live={maxLength >= 0 && maxLength - charCount <= 20 ? 'polite' : 'off'}\n              >\n                {maxLength >= 0 ? t('x_of_y', [charCount || '0', maxLength]) : charCount}\n              </Text>\n            ) : undefined,\n          required,\n          disabled,\n          onResolveSuggestion\n        }}\n      >\n        {Comp}\n      </FormField>\n    ) : (\n      Comp\n    );\n  }\n);\n\nexport default TextArea;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}