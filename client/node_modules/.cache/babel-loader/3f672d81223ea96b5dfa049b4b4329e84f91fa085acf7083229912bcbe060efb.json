{"ast":null,"code":"import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useState, useEffect, useRef } from 'react';\nimport Flex from '../../Flex';\nimport MonthInput from '../Input/MonthInput';\nimport Button from '../../Button';\nimport Icon, { registerIcon } from '../../Icon';\nimport * as caretLeftIcon from '../../Icon/icons/caret-left.icon';\nimport * as caretRightIcon from '../../Icon/icons/caret-right.icon';\nimport { useConfiguration, useI18n } from '../../../hooks';\nimport { getCalendarTypeFromLocale } from '../Input/utils';\nimport Calendar from './Calendar';\nimport Weeks from './Weeks';\nimport { StyledDatePicker, StyledMonthPicker } from './DatePicker.styles';\nimport { isValidDate, toDateTimeString } from './utils';\nregisterIcon(caretLeftIcon, caretRightIcon);\nconst DateRangePicker = props => {\n  const {\n    locale\n  } = useConfiguration();\n  const {\n    selected: initial,\n    selectedRange,\n    onChange,\n    min,\n    max,\n    mode,\n    showWeekNumber,\n    ...restProps\n  } = props;\n  const [selected, setSelected] = useState(initial);\n  const [current, setCurrent] = useState(selected && isValidDate(selected) ? selected : new Date());\n  useEffect(() => {\n    if (toDateTimeString(initial) !== toDateTimeString(selected)) {\n      setSelected(initial);\n      setCurrent(initial || new Date());\n    }\n  }, [toDateTimeString(initial)]);\n  const calendarRef = useRef(null);\n  useEffect(() => {\n    // need to postpone focusing to make sure onFocusWithin has been attached\n    setTimeout(() => {\n      calendarRef.current?.querySelector('button[tabindex=\"0\"]:enabled')?.focus();\n    });\n  }, []);\n  const calendarType = getCalendarTypeFromLocale(locale);\n  const t = useI18n();\n  return _jsxs(StyledDatePicker, {\n    \"aria-label\": t('calendar'),\n    role: 'region',\n    ...restProps,\n    children: [_jsxs(Flex, {\n      as: StyledMonthPicker,\n      container: {\n        justify: 'between',\n        alignItems: 'center'\n      },\n      children: [_jsx(Button, {\n        variant: 'simple',\n        icon: true,\n        onClick: () => {\n          const newCurrent = new Date(current);\n          newCurrent.setUTCMonth(newCurrent.getUTCMonth() - 1);\n          setCurrent(newCurrent);\n        },\n        \"aria-label\": t('picker_prev_month'),\n        children: _jsx(Icon, {\n          name: 'caret-left'\n        })\n      }), _jsx(MonthInput, {\n        value: current,\n        required: true,\n        role: 'group',\n        \"aria-label\": t('picker_jump_to_month_and_year'),\n        onChange: _ref => {\n          let {\n            valueAsTimestamp\n          } = _ref;\n          const newCurrent = new Date(valueAsTimestamp);\n          newCurrent.setUTCDate(current.getUTCDate());\n          setCurrent(newCurrent);\n        },\n        min: min,\n        max: max\n      }), _jsx(Button, {\n        variant: 'simple',\n        icon: true,\n        onClick: () => {\n          const newCurrent = new Date(current);\n          newCurrent.setUTCMonth(newCurrent.getUTCMonth() + 1);\n          setCurrent(newCurrent);\n        },\n        \"aria-label\": t('picker_next_month'),\n        children: _jsx(Icon, {\n          name: 'caret-right'\n        })\n      })]\n    }), _jsxs(Flex, {\n      container: {\n        wrap: 'nowrap'\n      },\n      children: [showWeekNumber && _jsx(Weeks, {\n        current: current,\n        calendarType: calendarType,\n        disabled: true\n      }), _jsx(Calendar, {\n        ref: calendarRef,\n        selected: selected && isValidDate(selected) ? selected : undefined,\n        current: current,\n        selectedRange: selectedRange,\n        showHighlight: true,\n        calendarType: calendarType,\n        onFocus: date => {\n          setCurrent(date);\n        },\n        onSelect: date => {\n          setCurrent(date);\n          setSelected(date);\n          onChange?.(date);\n        },\n        min: min,\n        max: max\n      })]\n    })]\n  });\n};\nexport default DateRangePicker;","map":{"version":3,"names":["useState","useEffect","useRef","Flex","MonthInput","Button","Icon","registerIcon","caretLeftIcon","caretRightIcon","useConfiguration","useI18n","getCalendarTypeFromLocale","Calendar","Weeks","StyledDatePicker","StyledMonthPicker","isValidDate","toDateTimeString","DateRangePicker","props","locale","selected","initial","selectedRange","onChange","min","max","mode","showWeekNumber","restProps","setSelected","current","setCurrent","Date","calendarRef","setTimeout","querySelector","focus","calendarType","t","_jsxs","role","children","as","container","justify","alignItems","_jsx","variant","icon","onClick","newCurrent","setUTCMonth","getUTCMonth","name","value","required","_ref","valueAsTimestamp","setUTCDate","getUTCDate","wrap","disabled","ref","undefined","showHighlight","onFocus","date","onSelect"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/components/DateTime/Picker/DateRangePicker.tsx"],"sourcesContent":["import { FunctionComponent, useState, useEffect, useRef } from 'react';\n\nimport Flex from '../../Flex';\nimport MonthInput from '../Input/MonthInput';\nimport Button from '../../Button';\nimport Icon, { registerIcon } from '../../Icon';\nimport * as caretLeftIcon from '../../Icon/icons/caret-left.icon';\nimport * as caretRightIcon from '../../Icon/icons/caret-right.icon';\nimport { useConfiguration, useI18n } from '../../../hooks';\nimport { getCalendarTypeFromLocale } from '../Input/utils';\n\nimport Calendar from './Calendar';\nimport DatePickerProps from './DatePicker.types';\nimport Weeks from './Weeks';\nimport { StyledDatePicker, StyledMonthPicker } from './DatePicker.styles';\nimport { isValidDate, toDateTimeString } from './utils';\n\nregisterIcon(caretLeftIcon, caretRightIcon);\n\nexport interface DateRangePickerProps extends DatePickerProps {\n  /** Defines dates range that can be set by the user. */\n  selectedRange?: { startDate: Date | undefined; endDate: Date | undefined };\n}\n\nconst DateRangePicker: FunctionComponent<DateRangePickerProps> = (props: DateRangePickerProps) => {\n  const { locale } = useConfiguration();\n  const {\n    selected: initial,\n    selectedRange,\n    onChange,\n    min,\n    max,\n    mode,\n    showWeekNumber,\n    ...restProps\n  } = props;\n\n  const [selected, setSelected] = useState(initial);\n  const [current, setCurrent] = useState(selected && isValidDate(selected) ? selected : new Date());\n\n  useEffect(() => {\n    if (toDateTimeString(initial) !== toDateTimeString(selected)) {\n      setSelected(initial);\n      setCurrent(initial || new Date());\n    }\n  }, [toDateTimeString(initial)]);\n\n  const calendarRef = useRef<HTMLDivElement>(null);\n  useEffect(() => {\n    // need to postpone focusing to make sure onFocusWithin has been attached\n    setTimeout(() => {\n      calendarRef.current?.querySelector<HTMLElement>('button[tabindex=\"0\"]:enabled')?.focus();\n    });\n  }, []);\n\n  const calendarType = getCalendarTypeFromLocale(locale);\n  const t = useI18n();\n\n  return (\n    <StyledDatePicker aria-label={t('calendar')} role='region' {...restProps}>\n      <Flex as={StyledMonthPicker} container={{ justify: 'between', alignItems: 'center' }}>\n        <Button\n          variant='simple'\n          icon\n          onClick={() => {\n            const newCurrent = new Date(current);\n            newCurrent.setUTCMonth(newCurrent.getUTCMonth() - 1);\n            setCurrent(newCurrent);\n          }}\n          aria-label={t('picker_prev_month')}\n        >\n          <Icon name='caret-left' />\n        </Button>\n        <MonthInput\n          value={current}\n          required\n          role='group'\n          aria-label={t('picker_jump_to_month_and_year')}\n          onChange={({ valueAsTimestamp }) => {\n            const newCurrent = new Date(valueAsTimestamp!);\n            newCurrent.setUTCDate(current.getUTCDate());\n            setCurrent(newCurrent);\n          }}\n          min={min}\n          max={max}\n        />\n        <Button\n          variant='simple'\n          icon\n          onClick={() => {\n            const newCurrent = new Date(current);\n            newCurrent.setUTCMonth(newCurrent.getUTCMonth() + 1);\n            setCurrent(newCurrent);\n          }}\n          aria-label={t('picker_next_month')}\n        >\n          <Icon name='caret-right' />\n        </Button>\n      </Flex>\n      <Flex container={{ wrap: 'nowrap' }}>\n        {showWeekNumber && <Weeks current={current} calendarType={calendarType} disabled />}\n        <Calendar\n          ref={calendarRef}\n          selected={selected && isValidDate(selected) ? selected : undefined}\n          current={current}\n          selectedRange={selectedRange}\n          showHighlight\n          calendarType={calendarType}\n          onFocus={date => {\n            setCurrent(date);\n          }}\n          onSelect={date => {\n            setCurrent(date);\n            setSelected(date);\n            onChange?.(date);\n          }}\n          min={min}\n          max={max}\n        />\n      </Flex>\n    </StyledDatePicker>\n  );\n};\n\nexport default DateRangePicker;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}