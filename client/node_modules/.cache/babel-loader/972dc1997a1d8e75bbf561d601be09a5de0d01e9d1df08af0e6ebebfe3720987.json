{"ast":null,"code":"import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { forwardRef, useState, useEffect, useContext, useMemo } from 'react';\nimport BareButton from '../Button/BareButton';\nimport Popover from '../Popover';\nimport Menu from '../Menu';\nimport { useConsolidatedRef } from '../../hooks';\nimport AppShellContext from './AppShellContext';\nconst Operator = forwardRef((_ref, ref) => {\n  let {\n    children,\n    actions,\n    popover,\n    as\n  } = _ref;\n  const {\n    navOpen\n  } = useContext(AppShellContext);\n  const buttonRef = useConsolidatedRef(ref);\n  const operatorMenuItems = useMemo(() => {\n    return actions.flat().map(_ref2 => {\n      let {\n        id,\n        primary,\n        onClick: click,\n        ...rest\n      } = _ref2;\n      return {\n        id: id || primary,\n        primary,\n        onClick: (menuId, e) => click?.(e),\n        ...rest\n      };\n    });\n  }, [actions]);\n  const [showMenu, setShowMenu] = useState(false);\n  useEffect(() => {\n    if (!navOpen) setShowMenu(false);\n  }, [navOpen]);\n  return _jsxs(_Fragment, {\n    children: [_jsx(BareButton, {\n      as: as,\n      ref: buttonRef,\n      \"aria-expanded\": showMenu ? 'true' : 'false',\n      \"aria-haspopup\": 'menu',\n      onClick: () => {\n        setShowMenu(cur => !cur);\n      },\n      onKeyDown: e => {\n        if (e.key === 'Escape') setShowMenu(false);\n      },\n      onBlur: () => {\n        setShowMenu(false);\n      },\n      children: children\n    }), _jsx(Popover, {\n      ...popover,\n      show: showMenu,\n      target: buttonRef.current,\n      children: _jsx(Menu, {\n        focusControlEl: buttonRef.current ?? undefined,\n        mode: 'action',\n        items: operatorMenuItems,\n        /** @see {@link MenuButton} implementation for explanation of conditions. This is in essence duplicated. */\n        onItemClick: (_, e) => {\n          if (e.detail > 0) {\n            setShowMenu(false);\n          }\n        }\n      })\n    })]\n  });\n});\nexport default Operator;","map":{"version":3,"names":["forwardRef","useState","useEffect","useContext","useMemo","BareButton","Popover","Menu","useConsolidatedRef","AppShellContext","Operator","_ref","ref","children","actions","popover","as","navOpen","buttonRef","operatorMenuItems","flat","map","_ref2","id","primary","onClick","click","rest","menuId","e","showMenu","setShowMenu","_jsxs","_Fragment","_jsx","cur","onKeyDown","key","onBlur","show","target","current","focusControlEl","undefined","mode","items","onItemClick","_","detail"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/components/AppShell/Operator.tsx"],"sourcesContent":["import { forwardRef, useState, useEffect, useContext, useMemo } from 'react';\nimport type { Ref, ReactNode, MouseEvent, UIEvent } from 'react';\n\nimport BareButton from '../Button/BareButton';\nimport Popover from '../Popover';\nimport type { PopoverProps } from '../Popover';\nimport Menu, { MenuItemProps } from '../Menu';\nimport type { AcceptedMouseEventElement } from '../Menu/Menu.types';\nimport { useConsolidatedRef } from '../../hooks';\nimport type { AsProp, OmitStrict } from '../../types';\n\nimport AppShellContext from './AppShellContext';\nimport { OperatorProps } from './AppShell.types';\n\nconst Operator = forwardRef(\n  (\n    {\n      children,\n      actions,\n      popover,\n      as\n    }: {\n      children: ReactNode;\n      actions: OperatorProps['actions'];\n      popover?: OmitStrict<PopoverProps, 'show' | 'target' | 'children'>;\n    } & AsProp,\n    ref: Ref<HTMLButtonElement> | undefined\n  ) => {\n    const { navOpen } = useContext(AppShellContext);\n    const buttonRef = useConsolidatedRef(ref);\n\n    const operatorMenuItems = useMemo(() => {\n      return actions.flat().map<MenuItemProps>(({ id, primary, onClick: click, ...rest }) => ({\n        id: id || primary,\n        primary,\n        onClick: (menuId, e) => click?.(e),\n        ...rest\n      }));\n    }, [actions]);\n\n    const [showMenu, setShowMenu] = useState(false);\n\n    useEffect(() => {\n      if (!navOpen) setShowMenu(false);\n    }, [navOpen]);\n\n    return (\n      <>\n        <BareButton\n          as={as}\n          ref={buttonRef}\n          aria-expanded={showMenu ? 'true' : 'false'}\n          aria-haspopup='menu'\n          onClick={() => {\n            setShowMenu(cur => !cur);\n          }}\n          onKeyDown={(e: KeyboardEvent) => {\n            if (e.key === 'Escape') setShowMenu(false);\n          }}\n          onBlur={() => {\n            setShowMenu(false);\n          }}\n        >\n          {children}\n        </BareButton>\n        <Popover {...popover} show={showMenu} target={buttonRef.current}>\n          <Menu\n            focusControlEl={buttonRef.current ?? undefined}\n            mode='action'\n            items={operatorMenuItems}\n            /** @see {@link MenuButton} implementation for explanation of conditions. This is in essence duplicated. */\n            onItemClick={(_, e) => {\n              if (\n                (e as MouseEvent<AcceptedMouseEventElement> & UIEvent<AcceptedMouseEventElement>)\n                  .detail > 0\n              ) {\n                setShowMenu(false);\n              }\n            }}\n          />\n        </Popover>\n      </>\n    );\n  }\n);\n\nexport default Operator;\n"],"mappings":";AAAA,SAASA,UAAU,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,UAAU,EAAEC,OAAO,QAAQ,OAAO;AAG5E,OAAOC,UAAU,MAAM,sBAAsB;AAC7C,OAAOC,OAAO,MAAM,YAAY;AAEhC,OAAOC,IAAuB,MAAM,SAAS;AAE7C,SAASC,kBAAkB,QAAQ,aAAa;AAGhD,OAAOC,eAAe,MAAM,mBAAmB;AAG/C,MAAMC,QAAQ,GAAGV,UAAU,CACzB,CAAAW,IAAA,EAWEC,GAAuC,KACrC;EAAA,IAXF;IACEC,QAAQ;IACRC,OAAO;IACPC,OAAO;IACPC;EAAE,CAKM,GAAAL,IAAA;EAGV,MAAM;IAAEM;EAAO,CAAE,GAAGd,UAAU,CAACM,eAAe,CAAC;EAC/C,MAAMS,SAAS,GAAGV,kBAAkB,CAACI,GAAG,CAAC;EAEzC,MAAMO,iBAAiB,GAAGf,OAAO,CAAC,MAAK;IACrC,OAAOU,OAAO,CAACM,IAAI,EAAE,CAACC,GAAG,CAAgBC,KAAA;MAAA,IAAC;QAAEC,EAAE;QAAEC,OAAO;QAAEC,OAAO,EAAEC,KAAK;QAAE,GAAGC;MAAI,CAAE,GAAAL,KAAA;MAAA,OAAM;QACtFC,EAAE,EAAEA,EAAE,IAAIC,OAAO;QACjBA,OAAO;QACPC,OAAO,EAAEA,CAACG,MAAM,EAAEC,CAAC,KAAKH,KAAK,GAAGG,CAAC,CAAC;QAClC,GAAGF;OACJ;IAAA,CAAC,CAAC;EACL,CAAC,EAAE,CAACb,OAAO,CAAC,CAAC;EAEb,MAAM,CAACgB,QAAQ,EAAEC,WAAW,CAAC,GAAG9B,QAAQ,CAAC,KAAK,CAAC;EAE/CC,SAAS,CAAC,MAAK;IACb,IAAI,CAACe,OAAO,EAAEc,WAAW,CAAC,KAAK,CAAC;EAClC,CAAC,EAAE,CAACd,OAAO,CAAC,CAAC;EAEb,OACEe,KAAA,CAAAC,SAAA;IAAApB,QAAA,GACEqB,IAAA,CAAC7B,UAAU;MACTW,EAAE,EAAEA,EAAE;MACNJ,GAAG,EAAEM,SAAS;MAAA,iBACCY,QAAQ,GAAG,MAAM,GAAG,OAAO;MAAA,iBAC5B,MAAM;MACpBL,OAAO,EAAEA,CAAA,KAAK;QACZM,WAAW,CAACI,GAAG,IAAI,CAACA,GAAG,CAAC;MAC1B,CAAC;MACDC,SAAS,EAAGP,CAAgB,IAAI;QAC9B,IAAIA,CAAC,CAACQ,GAAG,KAAK,QAAQ,EAAEN,WAAW,CAAC,KAAK,CAAC;MAC5C,CAAC;MACDO,MAAM,EAAEA,CAAA,KAAK;QACXP,WAAW,CAAC,KAAK,CAAC;MACpB,CAAC;MAAAlB,QAAA,EAEAA;IAAQ,EACE,EACbqB,IAAA,CAAC5B,OAAO;MAAA,GAAKS,OAAO;MAAEwB,IAAI,EAAET,QAAQ;MAAEU,MAAM,EAAEtB,SAAS,CAACuB,OAAO;MAAA5B,QAAA,EAC7DqB,IAAA,CAAC3B,IAAI;QACHmC,cAAc,EAAExB,SAAS,CAACuB,OAAO,IAAIE,SAAS;QAC9CC,IAAI,EAAC,QAAQ;QACbC,KAAK,EAAE1B,iBAAiB;QACxB;QACA2B,WAAW,EAAEA,CAACC,CAAC,EAAElB,CAAC,KAAI;UACpB,IACGA,CAAgF,CAC9EmB,MAAM,GAAG,CAAC,EACb;YACAjB,WAAW,CAAC,KAAK,CAAC;;QAEtB;MAAC;IACD,EACM;EAAA,EACT;AAEP,CAAC,CACF;AAED,eAAerB,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}