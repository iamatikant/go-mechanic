{"ast":null,"code":"import { useState } from 'react';\nimport { useElement, useEscape, useOuterEvent } from '../../../hooks';\nconst usePickerButton = onClose => {\n  const [open, setOpen] = useState(false);\n  const [popoverEl, setPopoverRef] = useElement();\n  const [buttonEl, setButtonEl] = useElement();\n  // Input calls onBlur callback in 'focusout' handler, so any immediate changes to the value, like\n  // setting midnight by default in DateTimeInput, must be made earlier - in 'mousedown' event. Although,\n  // we can't close the popover before all the events' processing ends, so we need to delay it.\n  useOuterEvent('mousedown', [popoverEl, buttonEl], () => {\n    if (open) {\n      onClose?.();\n      setTimeout(() => setOpen(false));\n    }\n  });\n  useEscape(e => {\n    e.preventDefault();\n    onClose?.();\n    setOpen(false);\n    // Stop propagation if triggered inside the picker to prevent closing a modal\n    if (e.currentTarget === popoverEl) {\n      e.stopPropagation();\n      buttonEl?.focus();\n    }\n  }, popoverEl, [popoverEl]);\n  return [open, setOpen, popoverEl, setPopoverRef, buttonEl, setButtonEl];\n};\nexport default usePickerButton;","map":{"version":3,"names":["useState","useElement","useEscape","useOuterEvent","usePickerButton","onClose","open","setOpen","popoverEl","setPopoverRef","buttonEl","setButtonEl","setTimeout","e","preventDefault","currentTarget","stopPropagation","focus"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/components/DateTime/Input/usePickerButton.ts"],"sourcesContent":["import { Dispatch, SetStateAction, useState } from 'react';\n\nimport { useElement, useEscape, useOuterEvent } from '../../../hooks';\n\nconst usePickerButton = (\n  onClose?: () => void\n): [\n  boolean,\n  Dispatch<SetStateAction<boolean>>,\n  HTMLElement | null,\n  (instance: HTMLElement | null) => void,\n  HTMLElement | null,\n  (instance: HTMLElement | null) => void\n] => {\n  const [open, setOpen] = useState(false);\n  const [popoverEl, setPopoverRef] = useElement<HTMLElement>();\n  const [buttonEl, setButtonEl] = useElement<HTMLElement>();\n\n  // Input calls onBlur callback in 'focusout' handler, so any immediate changes to the value, like\n  // setting midnight by default in DateTimeInput, must be made earlier - in 'mousedown' event. Although,\n  // we can't close the popover before all the events' processing ends, so we need to delay it.\n  useOuterEvent('mousedown', [popoverEl, buttonEl], () => {\n    if (open) {\n      onClose?.();\n      setTimeout(() => setOpen(false));\n    }\n  });\n\n  useEscape(\n    e => {\n      e.preventDefault();\n      onClose?.();\n      setOpen(false);\n      // Stop propagation if triggered inside the picker to prevent closing a modal\n      if (e.currentTarget === popoverEl) {\n        e.stopPropagation();\n        buttonEl?.focus();\n      }\n    },\n    popoverEl,\n    [popoverEl]\n  );\n\n  return [open, setOpen, popoverEl, setPopoverRef, buttonEl, setButtonEl];\n};\n\nexport default usePickerButton;\n"],"mappings":"AAAA,SAAmCA,QAAQ,QAAQ,OAAO;AAE1D,SAASC,UAAU,EAAEC,SAAS,EAAEC,aAAa,QAAQ,gBAAgB;AAErE,MAAMC,eAAe,GACnBC,OAAoB,IAQlB;EACF,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGP,QAAQ,CAAC,KAAK,CAAC;EACvC,MAAM,CAACQ,SAAS,EAAEC,aAAa,CAAC,GAAGR,UAAU,EAAe;EAC5D,MAAM,CAACS,QAAQ,EAAEC,WAAW,CAAC,GAAGV,UAAU,EAAe;EAEzD;EACA;EACA;EACAE,aAAa,CAAC,WAAW,EAAE,CAACK,SAAS,EAAEE,QAAQ,CAAC,EAAE,MAAK;IACrD,IAAIJ,IAAI,EAAE;MACRD,OAAO,IAAI;MACXO,UAAU,CAAC,MAAML,OAAO,CAAC,KAAK,CAAC,CAAC;;EAEpC,CAAC,CAAC;EAEFL,SAAS,CACPW,CAAC,IAAG;IACFA,CAAC,CAACC,cAAc,EAAE;IAClBT,OAAO,IAAI;IACXE,OAAO,CAAC,KAAK,CAAC;IACd;IACA,IAAIM,CAAC,CAACE,aAAa,KAAKP,SAAS,EAAE;MACjCK,CAAC,CAACG,eAAe,EAAE;MACnBN,QAAQ,EAAEO,KAAK,EAAE;;EAErB,CAAC,EACDT,SAAS,EACT,CAACA,SAAS,CAAC,CACZ;EAED,OAAO,CAACF,IAAI,EAAEC,OAAO,EAAEC,SAAS,EAAEC,aAAa,EAAEC,QAAQ,EAAEC,WAAW,CAAC;AACzE,CAAC;AAED,eAAeP,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}