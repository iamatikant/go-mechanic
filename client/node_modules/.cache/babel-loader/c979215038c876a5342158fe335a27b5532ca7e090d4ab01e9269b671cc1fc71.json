{"ast":null,"code":"import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { forwardRef, useCallback, useImperativeHandle, useReducer, useRef } from 'react';\nimport { useConsolidatedRef, useI18n, useFocusWithin, useTestIds } from '../../hooks';\nimport { StyledRangeInputContainer } from '../Input/Input.styles';\nimport FormField from '../FormField';\nimport Flex from '../Flex';\nimport NumberInput from './NumberInput';\nimport { getNumberRangeTestIds } from './Number.test-ids';\nconst reducer = (prevState, _ref) => {\n  let {\n    type,\n    value\n  } = _ref;\n  switch (type) {\n    case 'start':\n      {\n        return {\n          ...prevState,\n          start: value\n        };\n      }\n    case 'end':\n      {\n        return {\n          ...prevState,\n          end: value\n        };\n      }\n    default:\n      return prevState;\n  }\n};\nconst NumberRangeInput = forwardRef((_ref2, ref) => {\n  let {\n    testId,\n    value = {},\n    onChange,\n    onBlur,\n    onFocus,\n    label,\n    fromLabel,\n    toLabel,\n    labelHidden,\n    placeholder,\n    disabled,\n    readOnly,\n    required,\n    status,\n    unit,\n    showDecimal,\n    numberOfDecimals,\n    showGroupSeparators,\n    min,\n    max,\n    step,\n    variant,\n    fromAdditionalInfo,\n    toAdditionalInfo,\n    autoFocus,\n    handle,\n    ...restProps\n  } = _ref2;\n  const testIds = useTestIds(testId, getNumberRangeTestIds);\n  const t = useI18n();\n  const startValueInputRef = useRef(null);\n  const endValueInputRef = useRef(null);\n  const [state, dispatch] = useReducer(reducer, {\n    start: value.start ?? '',\n    end: value.end ?? ''\n  });\n  // Need to keep the value in ref also, to be able to call onBlur with newest value\n  const startValueRef = useRef(state.start);\n  const endValueRef = useRef(state.end);\n  const onFocusChange = useCallback(focused => {\n    (focused ? onFocus : onBlur)?.({\n      start: startValueRef.current,\n      end: endValueRef.current\n    });\n  }, [onBlur, value.start, value.end]);\n  const containerRef = useConsolidatedRef(ref);\n  useFocusWithin([containerRef], onFocusChange);\n  useImperativeHandle(handle, () => ({\n    clear: () => {\n      if (startValueInputRef.current) startValueInputRef.current.value = '';\n      if (endValueInputRef.current) endValueInputRef.current.value = '';\n      startValueRef.current = '';\n      endValueRef.current = '';\n      dispatch({\n        type: 'start',\n        value: ''\n      });\n      dispatch({\n        type: 'end',\n        value: ''\n      });\n      onChange({\n        start: '',\n        end: ''\n      });\n    }\n  }), [onChange]);\n  const commonProps = {\n    status,\n    placeholder,\n    readOnly,\n    required,\n    unit,\n    showDecimal,\n    numberOfDecimals,\n    showGroupSeparators,\n    min,\n    max,\n    variant\n  };\n  return _jsx(FormField, {\n    testId: testIds,\n    as: 'fieldset',\n    ...restProps,\n    ref: containerRef,\n    container: {\n      wrap: 'nowrap'\n    },\n    labelHidden: labelHidden,\n    labelAs: 'legend',\n    label: label,\n    disabled: disabled,\n    required: required,\n    readOnly: readOnly,\n    status: status,\n    children: _jsxs(Flex, {\n      container: true,\n      as: StyledRangeInputContainer,\n      children: [_jsx(NumberInput, {\n        testId: testIds.min,\n        ...commonProps,\n        value: state.start,\n        onChange: fromValue => {\n          onChange({\n            start: fromValue,\n            end: value.end ?? ''\n          });\n          dispatch({\n            type: 'start',\n            value: fromValue ?? ''\n          });\n        },\n        onBlur: changedValue => {\n          dispatch({\n            type: 'start',\n            value: changedValue ?? ''\n          });\n          startValueRef.current = changedValue ?? '';\n          onChange({\n            start: changedValue ?? '',\n            end: state.end\n          });\n        },\n        label: fromLabel,\n        \"aria-label\": `${t('range_from_numeric') + (label ? ` - ${label}` : '')}`,\n        additionalInfo: fromAdditionalInfo,\n        autoFocus: autoFocus,\n        ref: startValueInputRef\n      }), _jsx(NumberInput, {\n        testId: testIds.max,\n        ...commonProps,\n        value: state.end,\n        onChange: toValue => {\n          onChange({\n            start: value.start ?? '',\n            end: toValue\n          });\n          dispatch({\n            type: 'end',\n            value: toValue ?? ''\n          });\n        },\n        onBlur: changedValue => {\n          dispatch({\n            type: 'end',\n            value: changedValue ?? ''\n          });\n          endValueRef.current = changedValue ?? '';\n          onChange({\n            start: state.start,\n            end: changedValue ?? ''\n          });\n        },\n        label: toLabel,\n        \"aria-label\": `${t('range_to_numeric') + (label ? ` - ${label}` : '')}`,\n        additionalInfo: toAdditionalInfo,\n        ref: endValueInputRef\n      })]\n    })\n  });\n});\nexport default NumberRangeInput;","map":{"version":3,"names":["forwardRef","useCallback","useImperativeHandle","useReducer","useRef","useConsolidatedRef","useI18n","useFocusWithin","useTestIds","StyledRangeInputContainer","FormField","Flex","NumberInput","getNumberRangeTestIds","reducer","prevState","_ref","type","value","start","end","NumberRangeInput","_ref2","ref","testId","onChange","onBlur","onFocus","label","fromLabel","toLabel","labelHidden","placeholder","disabled","readOnly","required","status","unit","showDecimal","numberOfDecimals","showGroupSeparators","min","max","step","variant","fromAdditionalInfo","toAdditionalInfo","autoFocus","handle","restProps","testIds","t","startValueInputRef","endValueInputRef","state","dispatch","startValueRef","endValueRef","onFocusChange","focused","current","containerRef","clear","commonProps","_jsx","as","container","wrap","labelAs","children","_jsxs","fromValue","changedValue","additionalInfo","toValue"],"sources":["/Users/dasp10/Documents/KT_project/go-mechanic/client/node_modules/@pega/cosmos-react-core/src/components/Number/NumberRangeInput.tsx"],"sourcesContent":["import {\n  forwardRef,\n  FunctionComponent,\n  Ref,\n  useCallback,\n  useImperativeHandle,\n  useReducer,\n  useRef\n} from 'react';\n\nimport type { ForwardProps } from '../../types';\nimport { useConsolidatedRef, useI18n, useFocusWithin, useTestIds } from '../../hooks';\nimport { StyledRangeInputContainer } from '../Input/Input.styles';\nimport FormField from '../FormField';\nimport Flex from '../Flex';\n\nimport NumberInput from './NumberInput';\nimport type { NumberRangeInputProps } from './NumberInput.types';\nimport { getNumberRangeTestIds } from './Number.test-ids';\n\ntype DateRangeAction = { type: 'start' | 'end'; value: string };\ntype State = { start: string; end: string };\n\nconst reducer = (prevState: State, { type, value }: DateRangeAction): State => {\n  switch (type) {\n    case 'start': {\n      return { ...prevState, start: value };\n    }\n    case 'end': {\n      return { ...prevState, end: value };\n    }\n    default:\n      return prevState;\n  }\n};\n\nconst NumberRangeInput: FunctionComponent<NumberRangeInputProps & ForwardProps> = forwardRef(\n  (\n    {\n      testId,\n      value = {},\n      onChange,\n      onBlur,\n      onFocus,\n      label,\n      fromLabel,\n      toLabel,\n      labelHidden,\n      placeholder,\n      disabled,\n      readOnly,\n      required,\n      status,\n      unit,\n      showDecimal,\n      numberOfDecimals,\n      showGroupSeparators,\n      min,\n      max,\n      step,\n      variant,\n      fromAdditionalInfo,\n      toAdditionalInfo,\n      autoFocus,\n      handle,\n      ...restProps\n    }: NumberRangeInputProps,\n    ref: Ref<HTMLDivElement>\n  ) => {\n    const testIds = useTestIds(testId, getNumberRangeTestIds);\n\n    const t = useI18n();\n\n    const startValueInputRef = useRef<HTMLInputElement>(null);\n    const endValueInputRef = useRef<HTMLInputElement>(null);\n\n    const [state, dispatch] = useReducer(reducer, {\n      start: value.start ?? '',\n      end: value.end ?? ''\n    });\n\n    // Need to keep the value in ref also, to be able to call onBlur with newest value\n    const startValueRef = useRef(state.start);\n    const endValueRef = useRef(state.end);\n\n    const onFocusChange = useCallback(\n      (focused: boolean) => {\n        (focused ? onFocus : onBlur)?.({ start: startValueRef.current, end: endValueRef.current });\n      },\n      [onBlur, value.start, value.end]\n    );\n\n    const containerRef = useConsolidatedRef(ref);\n    useFocusWithin([containerRef], onFocusChange);\n\n    useImperativeHandle(\n      handle,\n      () => ({\n        clear: () => {\n          if (startValueInputRef.current) startValueInputRef.current.value = '';\n          if (endValueInputRef.current) endValueInputRef.current.value = '';\n          startValueRef.current = '';\n          endValueRef.current = '';\n          dispatch({ type: 'start', value: '' });\n          dispatch({ type: 'end', value: '' });\n          onChange({ start: '', end: '' });\n        }\n      }),\n      [onChange]\n    );\n\n    const commonProps = {\n      status,\n      placeholder,\n      readOnly,\n      required,\n      unit,\n      showDecimal,\n      numberOfDecimals,\n      showGroupSeparators,\n      min,\n      max,\n      variant\n    };\n\n    return (\n      <FormField\n        testId={testIds}\n        as='fieldset'\n        {...restProps}\n        ref={containerRef}\n        container={{ wrap: 'nowrap' }}\n        labelHidden={labelHidden}\n        labelAs='legend'\n        label={label}\n        disabled={disabled}\n        required={required}\n        readOnly={readOnly}\n        status={status}\n      >\n        <Flex container as={StyledRangeInputContainer}>\n          <NumberInput\n            testId={testIds.min}\n            {...commonProps}\n            value={state.start}\n            onChange={fromValue => {\n              onChange({ start: fromValue, end: value.end ?? '' });\n              dispatch({\n                type: 'start',\n                value: fromValue ?? ''\n              });\n            }}\n            onBlur={changedValue => {\n              dispatch({\n                type: 'start',\n                value: changedValue ?? ''\n              });\n              startValueRef.current = changedValue ?? '';\n              onChange({\n                start: changedValue ?? '',\n                end: state.end\n              });\n            }}\n            label={fromLabel}\n            aria-label={`${t('range_from_numeric') + (label ? ` - ${label}` : '')}`}\n            additionalInfo={fromAdditionalInfo}\n            autoFocus={autoFocus}\n            ref={startValueInputRef}\n          />\n          <NumberInput\n            testId={testIds.max}\n            {...commonProps}\n            value={state.end}\n            onChange={toValue => {\n              onChange({ start: value.start ?? '', end: toValue });\n              dispatch({\n                type: 'end',\n                value: toValue ?? ''\n              });\n            }}\n            onBlur={changedValue => {\n              dispatch({\n                type: 'end',\n                value: changedValue ?? ''\n              });\n              endValueRef.current = changedValue ?? '';\n              onChange({\n                start: state.start,\n                end: changedValue ?? ''\n              });\n            }}\n            label={toLabel}\n            aria-label={`${t('range_to_numeric') + (label ? ` - ${label}` : '')}`}\n            additionalInfo={toAdditionalInfo}\n            ref={endValueInputRef}\n          />\n        </Flex>\n      </FormField>\n    );\n  }\n);\n\nexport default NumberRangeInput;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}