{"version":3,"file":"DateRangeInput.js","sourceRoot":"","sources":["../../../../src/components/DateTime/Input/DateRangeInput.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  FunctionComponent,\n  useRef,\n  forwardRef,\n  PropsWithoutRef,\n  Ref,\n  useCallback,\n  useReducer,\n  useImperativeHandle\n} from 'react';\nimport styled, { css } from 'styled-components';\n\nimport { useConsolidatedRef, useFocusWithin, useI18n } from '../../../hooks';\nimport { ForwardProps } from '../../../types';\nimport { defaultThemeProp } from '../../../theme';\nimport { FormControlProps, HandleValue } from '../../FormControl';\nimport Flex from '../../Flex';\nimport FormField, { StyledFormField } from '../../FormField/FormField';\nimport DateRangePicker from '../Picker/DateRangePicker';\nimport type {\n  DateRangeCallbackParameter,\n  DateTimeCallbackParameter,\n  DateTimeProperties\n} from '../DateTime.types';\nimport { StyledRangeInputContainer } from '../../Input/Input.styles';\nimport DateTimeProps from '../DateTime.types';\n\nimport DateInput, { DateInputRefObject } from './DateInput';\nimport { parseToDate } from './utils';\nimport StyledDateInput from './DateTime.styles';\n\nexport interface DateRangeInputProps extends DateTimeProperties {\n  /** Object of range boundaries. */\n  value?: { start?: DateTimeProps['value']; end?: DateTimeProps['value'] };\n  /**\n   * Display additional column with week number in date picker popover.\n   * @default false\n   */\n  showWeekNumber?: boolean;\n  /** Pass a string or a fragment with an Icon and string for first part of DataRangeInput. */\n  fromLabel?: FormControlProps['label'];\n  /** Pass a string or a fragment with an Icon and string for second part of DataRangeInput. */\n  toLabel?: FormControlProps['label'];\n  /** Pass an object with \"heading\" and \"content\" properties to show AdditionalInfo for second part of DataRangeInput. */\n  toAdditionalInfo?: FormControlProps['additionalInfo'];\n  /** Pass an object with \"heading\" and \"content\" properties to show AdditionalInfo for first part of DataRangeInput. */\n  fromAdditionalInfo?: FormControlProps['additionalInfo'];\n  /** Callback fired when input value changes. */\n  onChange: (value: DateRangeCallbackParameter) => void;\n  /** Callback fired when the component gets focused. */\n  onFocus?: (value: DateRangeCallbackParameter) => void;\n  /** Callback fired when the component loses focus. */\n  onBlur?: (value: DateRangeCallbackParameter) => void;\n  /** Automatically focuses the input on render. */\n  autoFocus?: boolean;\n  /** Imperative handle */\n  handle?: Ref<HandleValue>;\n}\n\nconst StyledDateRangeInput = styled.div<DateRangeInputProps>(props => {\n  const {\n    theme: {\n      components: { input }\n    }\n  } = props;\n\n  return css`\n    border: 0;\n    min-width: min-content;\n\n    ${StyledFormField} {\n      &:last-child > ${StyledDateInput} {\n        margin-inline-start: -${input['border-width']};\n      }\n      & legend {\n        align-self: center;\n      }\n      &:focus,\n      &:hover,\n      &:focus-within {\n        z-index: 2;\n      }\n    }\n  `;\n});\n\nStyledDateRangeInput.defaultProps = defaultThemeProp;\n\ntype DateRepresentable = string | number | Date;\n\ntype DateRangeAction = { type: 'start' | 'end'; value?: number };\ntype State = { start?: number; end?: number };\n\nconst reducer = (prevState: State, { type, value }: DateRangeAction): State => {\n  switch (type) {\n    case 'start': {\n      return { ...prevState, start: value };\n    }\n    case 'end': {\n      return { ...prevState, end: value };\n    }\n    default:\n      return prevState;\n  }\n};\n\nconst convertToCallbackParameter = (v?: number): DateTimeCallbackParameter => {\n  return {\n    valueAsISOString: v === undefined || Number.isNaN(v) ? undefined : new Date(v).toISOString(),\n    valueAsTimestamp: v\n  };\n};\n\nconst getSelected = (first: number | undefined, second: number | undefined) => {\n  const selected = first ?? second;\n  return selected ? parseToDate(selected) : undefined;\n};\n\nconst parseValueToDate = (value: DateRepresentable | undefined) => {\n  return value ? parseToDate(value) : undefined;\n};\n\nconst DateRangeInput: FunctionComponent<DateRangeInputProps & ForwardProps> = forwardRef(\n  (\n    {\n      value = {},\n      min,\n      max,\n      label,\n      fromLabel,\n      toLabel,\n      labelHidden,\n      status,\n      required,\n      readOnly,\n      disabled,\n      onChange,\n      onFocus,\n      onBlur,\n      showWeekNumber,\n      autoFocus,\n      fromAdditionalInfo,\n      toAdditionalInfo,\n      handle,\n      ...restProps\n    }: PropsWithoutRef<DateRangeInputProps>,\n    ref: Ref<HTMLDivElement>\n  ) => {\n    const t = useI18n();\n\n    const startDateInputRef = useRef<DateInputRefObject>(null);\n    const endDateInputRef = useRef<DateInputRefObject>(null);\n\n    const startDateClearHandle = useRef<HandleValue>(null);\n    const endDateClearHandle = useRef<HandleValue>(null);\n\n    const [state, dispatch] = useReducer(reducer, {\n      start: value.start ? parseToDate(value.start).getTime() : undefined,\n      end: value.end ? parseToDate(value.end).getTime() : undefined\n    });\n\n    // Need to keep the value in ref also, to be able to call onBlur with newest value\n    const startDateRef = useRef<DateTimeCallbackParameter>(convertToCallbackParameter(state.start));\n    const endDateRef = useRef<DateTimeCallbackParameter>(convertToCallbackParameter(state.end));\n\n    useImperativeHandle(\n      handle,\n      () => ({\n        clear: () => {\n          startDateClearHandle.current?.clear();\n          endDateClearHandle.current?.clear();\n          const emptyCallbackParameter = convertToCallbackParameter(undefined);\n          startDateRef.current = emptyCallbackParameter;\n          endDateRef.current = emptyCallbackParameter;\n          dispatch({ type: 'start', value: undefined });\n          dispatch({ type: 'end', value: undefined });\n          onChange({\n            start: emptyCallbackParameter,\n            end: emptyCallbackParameter\n          });\n        }\n      }),\n      [onChange]\n    );\n\n    const onFocusChange = useCallback(\n      (focused: boolean) => {\n        (focused ? onFocus : onBlur)?.({\n          start: startDateRef.current,\n          end: endDateRef.current\n        });\n      },\n      [onFocus, onBlur]\n    );\n\n    const containerRef = useConsolidatedRef(ref);\n    useFocusWithin([containerRef], onFocusChange);\n\n    const onStartDateChange = (selectedDate?: Date) => {\n      const selected = selectedDate?.getTime();\n      let start;\n      let end;\n      if (state.end && selected && selected > state.end) {\n        dispatch({ type: 'start', value: state.end });\n        dispatch({ type: 'end', value: selected });\n        onChange({\n          start: convertToCallbackParameter(state.end),\n          end: convertToCallbackParameter(selected)\n        });\n        start = state.end;\n        end = selected;\n      } else {\n        dispatch({ type: 'start', value: selected });\n        onChange({\n          start: convertToCallbackParameter(selected),\n          end: convertToCallbackParameter(state.end)\n        });\n        start = selected;\n        end = state.end;\n      }\n      startDateRef.current = convertToCallbackParameter(start);\n      endDateRef.current = convertToCallbackParameter(end);\n      endDateInputRef.current?.setOpen(true);\n    };\n\n    const onEndDateChange = (selectedDate?: Date) => {\n      const selected = selectedDate?.getTime();\n      let start;\n      let end;\n      if (state.start && selected && selected < state.start) {\n        dispatch({ type: 'end', value: state.start });\n        dispatch({ type: 'start', value: selected });\n        onChange({\n          start: convertToCallbackParameter(selected),\n          end: convertToCallbackParameter(state.start)\n        });\n        start = selected;\n        end = state.start;\n      } else {\n        dispatch({ type: 'end', value: selected });\n        onChange({\n          start: convertToCallbackParameter(state.start),\n          end: convertToCallbackParameter(selected)\n        });\n        start = state.start;\n        end = selected;\n      }\n      startDateRef.current = convertToCallbackParameter(start);\n      endDateRef.current = convertToCallbackParameter(end);\n    };\n\n    const getSelectedRange = () => {\n      const startDate = parseValueToDate(state.start);\n      const endDate = parseValueToDate(state.end);\n\n      if (startDate && endDate && startDate > endDate) return undefined;\n\n      return {\n        startDate,\n        endDate\n      };\n    };\n\n    const commonProps = {\n      required,\n      readOnly,\n      disabled,\n      min,\n      max,\n      status\n    };\n\n    return (\n      <FormField\n        as={StyledDateRangeInput}\n        {...restProps}\n        ref={containerRef}\n        container={{ wrap: 'nowrap' }}\n        labelHidden={labelHidden}\n        label={label}\n        labelAs='legend'\n        required={required}\n        readOnly={readOnly}\n        status={status}\n        disabled={disabled}\n      >\n        <Flex container as={StyledRangeInputContainer}>\n          <DateInput\n            {...commonProps}\n            value={state.start}\n            ref={startDateInputRef}\n            handle={startDateClearHandle}\n            picker={{\n              renderer: DateRangePicker,\n              rendererProps: {\n                selected: getSelected(state.start, state.end),\n                selectedRange: getSelectedRange(),\n                onChange: onStartDateChange\n              }\n            }}\n            onBlur={changedValue => {\n              // invalid value stored only in ref, state holds undefined\n              dispatch({\n                type: 'start',\n                value: changedValue.state ? undefined : changedValue.valueAsTimestamp\n              });\n\n              startDateRef.current = changedValue;\n              onChange({\n                start: changedValue,\n                end: convertToCallbackParameter(state.end)\n              });\n            }}\n            additionalInfo={fromAdditionalInfo}\n            label={fromLabel}\n            aria-label={`${t('range_from_datetime') + (label ? ` - ${label}` : '')}`}\n            autoFocus={autoFocus}\n          />\n          <DateInput\n            {...commonProps}\n            value={state.end}\n            ref={endDateInputRef}\n            handle={endDateClearHandle}\n            picker={{\n              renderer: DateRangePicker,\n              rendererProps: {\n                selected: getSelected(state.end, state.start),\n                selectedRange: getSelectedRange(),\n                onChange: onEndDateChange\n              }\n            }}\n            onBlur={changedValue => {\n              // invalid value stored only in ref, state holds undefined\n              dispatch({\n                type: 'end',\n                value: changedValue.state ? undefined : changedValue.valueAsTimestamp\n              });\n\n              endDateRef.current = changedValue;\n              onChange({\n                start: convertToCallbackParameter(state.start),\n                end: changedValue\n              });\n            }}\n            additionalInfo={toAdditionalInfo}\n            label={toLabel}\n            aria-label={`${t('range_to_datetime') + (label ? ` - ${label}` : '')}`}\n          />\n        </Flex>\n      </FormField>\n    );\n  }\n);\n\nexport default DateRangeInput;\n"]}